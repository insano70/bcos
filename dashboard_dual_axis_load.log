ðŸŒ MIDDLEWARE: Processing request for: /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa
ðŸŒ MIDDLEWARE: Protected route detected
ðŸŒ MIDDLEWARE: Checking auth - access token: true, refresh token: true
ðŸŒ MIDDLEWARE: Access token valid - allowing access
ðŸŒ MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa 200 in 91ms
{"@timestamp":"2025-10-12T10:56:15.790Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:15.790Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:15.799Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:15.800Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:15.831Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":2,"remaining":198,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:15.831Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:15.831Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:15.835Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":3,"remaining":197,"limit":200}
{"@timestamp":"2025-10-12T10:56:15.836Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
ðŸ” AUTH: Using access token from httpOnly cookie
{"@timestamp":"2025-10-12T10:56:15.879Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":89,"type":"api","identifier":"::1","current":1,"remaining":199,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:15.879Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":89,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:15.879Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":89,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:15.880Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":81,"type":"api","identifier":"::1","current":4,"remaining":196,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:15.880Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":81,"pathname":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:15.880Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":81,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:15.880Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"mirq91tbHGHNYKhiM403kEto-nD59VHa","tokenSource":"[REDACTED]","validationDuration":44}
ðŸ” AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-12T10:56:15.911Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":121,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:15.911Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":121,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:15.911Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":121,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.049Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":256,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":89,"fromRedis":true}
{"@timestamp":"2025-10-12T10:56:16.050Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"mirq91tbHGHNYKhiM403kEto-nD59VHa","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":89,"duration":215}
{"@timestamp":"2025-10-12T10:56:16.050Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-12T10:56:16.050Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":215,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":90}
{"@timestamp":"2025-10-12T10:56:16.050Z","level":"INFO","message":"user context retrieved successfully from JWT token","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"GET","operation":"get_user_context","userId":"[UUID]","email":"[REDACTED]","rbac":{"roles":1,"permissions":89,"isSuperAdmin":true,"orgAdminFor":0},"organizations":{"direct":0,"accessible":0,"current":null},"duration":249,"slow":false,"component":"auth","cached":true}
 GET /api/auth/me 200 in 288ms
{"@timestamp":"2025-10-12T10:56:16.072Z","level":"INFO","message":"GET /api/csrf - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:56:16.072Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/csrf","requiredPermissions":[],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:56:16.083Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":284,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
(node:5783) TimeoutNegativeWarning: -12151.475021504171 is a negative number.
Timeout duration was set to 1.
(Use `node --trace-warnings ...` to show where the warning was created)
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-12T10:56:16.105Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:56:16.105Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:56:16.106Z","level":"DEBUG","message":"Route marked as public","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":80,"function":"eval","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"reason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:56:16.106Z","level":"DEBUG","message":"Public route - skipping user context and RBAC checks","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":102,"function":"eval","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"endpoint":"/api/csrf","publicReason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["AoXkbuMhl67oluYrdDaEd", 1]
{"@timestamp":"2025-10-12T10:56:16.114Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":315,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.114Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":324,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.114Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":234,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.114Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":203,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.114Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":283,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.114Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":315,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.114Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.114Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":315,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.115Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.115Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":325,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.115Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.115Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":325,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.115Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.115Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":316,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.115Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":316,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:238:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-12T10:56:16.159Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":360,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:238:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
{"@timestamp":"2025-10-12T10:56:16.198Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":83,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.198Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":408,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":83,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.198Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":408,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["a0324818-ae41-4bf5-8291-447f30322faa", 1]
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
{"@timestamp":"2025-10-12T10:56:16.200Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["a0324818-ae41-4bf5-8291-447f30322faa"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["a0324818-ae41-4bf5-8291-447f30322faa"]
{"@timestamp":"2025-10-12T10:56:16.210Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":95,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.210Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":95,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-12T10:56:16.210Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9qir_m5ajw63c","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":411,"userId":"[UUID]","statusCode":200,"totalDuration":411,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
 GET /api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa 200 in 449ms
{"@timestamp":"2025-10-12T10:56:16.211Z","level":"INFO","message":"CSRF token request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"getCSRFTokenHandler","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"isAuthenticated":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:56:16.211Z","level":"INFO","message":"Authenticated CSRF token generated","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"getCSRFTokenHandler","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:56:16.212Z","level":"INFO","message":"CSRF token issued successfully","service":"bendcare-os","env":"development","file":"route.ts","line":82,"function":"getCSRFTokenHandler","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"tokenType":"[REDACTED]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:56:16.212Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":109,"function":"eval","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"statusCode":200,"isPublic":true,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:56:16.212Z","level":"INFO","message":"Public route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":115,"function":"eval","correlationId":"cor_mgnl9qrc_uryjtknh","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"endpoint":"/api/csrf","statusCode":200,"totalDuration":140,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
 GET /api/csrf 200 in 156ms
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-12T10:56:16.225Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"published":7,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":27,"averageChartsPerDashboard":4,"page":1,"pageSize":7},"duration":27,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.225Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":27,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:56:16.226Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9qir_wjx3x3n0","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":436,"userId":"[UUID]","statusCode":200,"totalDuration":436,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 475ms
{"@timestamp":"2025-10-12T10:56:16.249Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.250Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.257Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.257Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.281Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":7,"remaining":193,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.281Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.281Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.286Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"type":"api","identifier":"::1","current":8,"remaining":192,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.287Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.287Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.313Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"type":"api","identifier":"::1","current":9,"remaining":191,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.313Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.313Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.321Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":10,"remaining":190,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.321Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.321Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.374Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.374Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":61,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.374Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":93,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.374Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.374Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.374Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.374Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.374Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.374Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-12T10:56:16.380Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"stacked-bar":2,"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":4},"activeCount":13,"inactiveCount":0},"duration":5,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.380Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.381Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9qw6_hpikzi60","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"userId":"[UUID]","statusCode":200,"totalDuration":131,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 150ms
{"@timestamp":"2025-10-12T10:56:16.382Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.382Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":61,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.382Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":95,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.382Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.382Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.382Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.382Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.382Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.382Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-12T10:56:16.386Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"stacked-bar":2,"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":4},"activeCount":13,"inactiveCount":0},"duration":4,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.387Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:56:16.387Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9qw6_pwtl5n7u","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"userId":"[UUID]","statusCode":200,"totalDuration":131,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 157ms
{"@timestamp":"2025-10-12T10:56:16.401Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":1,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:16.405Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:16.418Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:16.431Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:16.432Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:16.442Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.442Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.458Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.458Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.477Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.477Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.477Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":11,"remaining":189,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.477Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.477Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.495Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.495Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.496Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.496Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.500Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.500Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.570Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"type":"api","identifier":"::1","current":12,"remaining":188,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.570Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.570Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.602Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"type":"api","identifier":"::1","current":13,"remaining":187,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.602Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.602Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.602Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"type":"api","identifier":"::1","current":14,"remaining":186,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.602Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.602Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"type":"api","identifier":"::1","current":15,"remaining":185,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"type":"api","identifier":"::1","current":16,"remaining":184,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"type":"api","identifier":"::1","current":17,"remaining":183,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"type":"api","identifier":"::1","current":18,"remaining":182,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.603Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.641Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"type":"api","identifier":"::1","current":19,"remaining":181,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.641Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.641Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.642Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"type":"api","identifier":"::1","current":20,"remaining":180,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.642Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.642Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.642Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"type":"api","identifier":"::1","current":21,"remaining":179,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.642Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.642Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.642Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"type":"api","identifier":"::1","current":22,"remaining":178,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.643Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.643Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":233,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":198,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":233,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":233,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":233,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":233,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.675Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":233,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.676Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":234,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.676Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":234,"chartType":"bar","dataSourceId":1,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [1]
{"@timestamp":"2025-10-12T10:56:16.676Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":218,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.676Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"number","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.677Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"chartType":"number","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [1, true]
{"@timestamp":"2025-10-12T10:56:16.685Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":243,"dataSourceId":1,"dataSourceName":"Practice Analytics","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":244,"dataSourceId":1,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":244,"chartType":"bar","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":244,"chartType":"bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":244,"chartType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":244,"chartType":"bar","dataSourceId":1,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":527,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":244,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"chartType":"number","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"chartType":"number","handlerType":"number","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"chartType":"number","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"MetricChartHandler.fetchData","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"chartType":"number","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.686Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cash Transfer","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.713Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.714Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.714Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.714Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.714Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.714Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.714Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.714Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.714Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.714Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":238,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"dual-axis","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":238,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.715Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"progress-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"chartType":"progress-bar","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":113,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.716Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"stacked-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"chartType":"stacked-bar","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":114,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.717Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.718Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":218,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.718Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":218,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.719Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":null,"advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
{"@timestamp":"2025-10-12T10:56:16.719Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":277,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-12T10:56:16.722Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.722Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.722Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"chartType":"progress-bar","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.722Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"chartType":"progress-bar","handlerType":"progress-bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.722Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"chartType":"progress-bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.722Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ProgressBarChartHandler.fetchData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"chartType":"progress-bar","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.722Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-12-31","limit":10000,"measure":"Top Procedures","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"chartType":"stacked-bar","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"DEBUG","message":"Handler found via canHandle() method","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":52,"function":"ChartTypeRegistry.getHandler","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"chartType":"stacked-bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"chartType":"stacked-bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"chartType":"stacked-bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"chartType":"bar","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-12","limit":10000,"measure":"Cash Transfer","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":246,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":246,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":246,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":246,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.723Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":246,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.724Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":45,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.724Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.724Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cancellations","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.724Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.724Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cash Transfer","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:16.724Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":266,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
{"@timestamp":"2025-10-12T10:56:16.733Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":233,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-12T10:56:16.735Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:16.735Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE "date_value" >= $1 AND "date_value" <= $2 LIMIT 1000 -- params: ["2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-12T10:56:16.756Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":261,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Top Procedures', 'Monthly', '2025-01-01', '2025-12-31' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:16.761Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":266,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-12' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:16.761Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":284,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cancellations', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:16.762Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":285,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:16.854Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
{"@timestamp":"2025-10-12T10:56:17.452Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":734,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.453Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":735,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.453Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9r1n_mzlv8oiu","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":953,"userId":"[UUID]","statusCode":200,"totalDuration":953,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?start_date=2025-01-01&end_date=2025-10-06&practice=114&limit=1000&_t=1760266576399 200 in 1010ms
âœ… QUERY RESULT: {
  duration: '732ms',
  rowCount: 46,
  sampleData: {
    id: 22824,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 145,
    provider_name: 'Busch-Feuer, Rachael',
    entity_type: 'Provider',
    entity_id: '145',
    entity_name: 'Busch-Feuer, Rachael',
    measure: 'Cash Transfer',
    measure_type: 'currency',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '143781.79',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.748293+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:17.472Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
âœ… QUERY RESULT: {
  duration: '731ms',
  rowCount: 1154,
  sampleData: {
    id: 26467,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 420,
    provider_name: 'Ray, Madina',
    entity_type: 'Procedures',
    entity_id: 'J1745',
    entity_name: 'Remicade',
    measure: 'Top Procedures',
    measure_type: 'count',
    frequency: 'Monthly',
    date_index: '2025-01-06',
    display_date: '2025-01-06 00:00:00+00',
    measure_value: '1.00',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 14:03:21.509173+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Top Procedures', 'Monthly', '2025-01-01', '2025-12-31' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:17.490Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.490Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: {
  duration: '729ms',
  rowCount: 46,
  sampleData: {
    id: 22824,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 145,
    provider_name: 'Busch-Feuer, Rachael',
    entity_type: 'Provider',
    entity_id: '145',
    entity_name: 'Busch-Feuer, Rachael',
    measure: 'Cash Transfer',
    measure_type: 'currency',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '143781.79',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.748293+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-12' ],
  paramCount: 4
}
âœ… QUERY RESULT: {
  duration: '775ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:17.521Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"type":"api","identifier":"::1","current":23,"remaining":177,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.521Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.522Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: {
  duration: '861ms',
  rowCount: 46,
  sampleData: {
    id: 22824,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 145,
    provider_name: 'Busch-Feuer, Rachael',
    entity_type: 'Provider',
    entity_id: '145',
    entity_name: 'Busch-Feuer, Rachael',
    measure: 'Cash Transfer',
    measure_type: 'currency',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '143781.79',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.748293+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
âœ… QUERY RESULT: {
  duration: '863ms',
  rowCount: 48,
  sampleData: {
    id: 21626,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 420,
    provider_name: 'Ray, Madina',
    entity_type: 'Provider',
    entity_id: '420',
    entity_name: 'Ray, Madina',
    measure: 'Cancellations',
    measure_type: 'count',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '7.00',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.224414+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cancellations', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:17.624Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"type":"api","identifier":"::1","current":24,"remaining":176,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.625Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.625Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: {
  duration: '170ms',
  rowCount: 1,
  sampleData: { total: '5289376.44', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:56:17.627Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1169,"queryTime":940,"resultCount":46,"totalCount":5289376,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.627Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"MetricChartHandler.fetchData","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1169,"chartType":"number","recordCount":46,"queryTimeMs":940,"fetchDuration":941,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.628Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1170,"chartType":"number","recordCount":46,"fetchDuration":941,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.628Z","level":"INFO","message":"Transforming metric chart data","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":84,"function":"MetricChartHandler.transform","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1170,"chartType":"number","recordCount":46,"aggregationType":"sum","valueColumn":"measure_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.629Z","level":"INFO","message":"Data aggregated","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":68,"function":"MetricChartHandler.aggregateData","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","aggregationType":"sum","valueColumn":"measure_value","valueCount":46,"result":5289376.44,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.630Z","level":"INFO","message":"Metric chart data transformed","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":133,"function":"MetricChartHandler.transform","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"number","duration":1,"aggregationType":"sum","aggregatedValue":5289376.44,"measureType":"currency","datasetCount":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.630Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1172,"chartType":"number","datasetCount":1,"labelCount":0,"transformDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.631Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1173,"chartType":"number","totalDuration":954,"fetchDuration":941,"transformDuration":2,"recordCount":46,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.632Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1174,"requestingUserId":"[UUID]","chartType":"number","recordCount":46,"orchestratorDuration":954,"queryTimeMs":941,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.632Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"number","duration":955,"recordCount":46,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.633Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":955,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.633Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9r0z_j4110xhk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1175,"userId":"[UUID]","statusCode":200,"totalDuration":1175,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1225ms
âœ… QUERY RESULT: {
  duration: '147ms',
  rowCount: 1,
  sampleData: { total: '1154', measure_type: 'count' }
}
{"@timestamp":"2025-10-12T10:56:17.635Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1140,"queryTime":913,"resultCount":1154,"totalCount":1154,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.635Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ProgressBarChartHandler.fetchData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1140,"chartType":"progress-bar","recordCount":1154,"queryTimeMs":913,"fetchDuration":913,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.636Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1141,"chartType":"progress-bar","recordCount":1154,"fetchDuration":914,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.636Z","level":"INFO","message":"Transforming progress bar chart data","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":73,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1141,"recordCount":1154,"aggregationType":"sum","groupBy":"entity_name","hasTarget":false,"valueColumn":"measure_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.636Z","level":"DEBUG","message":"Sample raw data records","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":99,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1141,"sampleCount":3,"samples":[{"groupBy":"Remicade","valueColumn":"1.00","valueType":"string"},{"groupBy":"Orencia","valueColumn":"2.00","valueType":"string"},{"groupBy":"Saphnelo","valueColumn":"1.00","valueType":"string"}],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.638Z","level":"INFO","message":"Data grouped for progress bars","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":117,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1143,"groupCount":10,"groups":["Remicade","Orencia","Saphnelo","Cimzia","Celestone Soluspan","Simponi Aria","Evenity","Actemra","Benlysta","Reclast"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.638Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1143,"aggregationType":"sum","valueCount":80,"sampleValues":[1,3,4],"result":206,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.639Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1144,"aggregationType":"sum","valueCount":138,"sampleValues":[2,2,3],"result":524,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.639Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1144,"aggregationType":"sum","valueCount":86,"sampleValues":[1,4,1],"result":157,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.639Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1144,"aggregationType":"sum","valueCount":123,"sampleValues":[2,1,5],"result":369,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.639Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1144,"aggregationType":"sum","valueCount":101,"sampleValues":[1,3,1],"result":162,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.639Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1144,"aggregationType":"sum","valueCount":110,"sampleValues":[2,4,2],"result":392,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.640Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1145,"aggregationType":"sum","valueCount":144,"sampleValues":[3,10,4],"result":434,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.640Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1145,"aggregationType":"sum","valueCount":157,"sampleValues":[3,11,2],"result":631,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.640Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1145,"aggregationType":"sum","valueCount":112,"sampleValues":[8,2,8],"result":497,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.640Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1145,"aggregationType":"sum","valueCount":103,"sampleValues":[1,1,2],"result":195,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.640Z","level":"INFO","message":"Dynamic target calculated for progress bars","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":134,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1145,"groupCount":10,"dynamicTarget":3567,"usingDynamicTarget":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.640Z","level":"DEBUG","message":"Progress bar groups calculated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":151,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1145,"sampleGroups":[{"label":"Actemra","value":631,"percentage":"17.69%"},{"label":"Orencia","value":524,"percentage":"14.69%"},{"label":"Benlysta","value":497,"percentage":"13.93%"}],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.641Z","level":"INFO","message":"Progress bar chart data transformed","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":181,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"aggregationType":"sum","groupCount":10,"datasetCount":1,"sampleLabels":["Actemra","Orencia","Benlysta"],"sampleRawValues":[631,524,497],"samplePercentages":[17.689935520044855,14.690215867675919,13.93327726380712],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.641Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1146,"chartType":"progress-bar","datasetCount":1,"labelCount":10,"transformDuration":5,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.641Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1146,"chartType":"progress-bar","totalDuration":925,"fetchDuration":914,"transformDuration":5,"recordCount":1154,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.641Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1146,"requestingUserId":"[UUID]","chartType":"progress-bar","recordCount":1154,"orchestratorDuration":925,"queryTimeMs":914,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.641Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"progress-bar","duration":926,"recordCount":1154,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.646Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":930,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.646Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9r1n_hkdy3qug","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1151,"userId":"[UUID]","statusCode":200,"totalDuration":1151,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1211ms
âœ… QUERY RESULT: {
  duration: '171ms',
  rowCount: 1,
  sampleData: { total: '5289376.44', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:56:17.661Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1166,"queryTime":938,"resultCount":46,"totalCount":5289376,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.661Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1166,"chartType":"bar","recordCount":46,"queryTimeMs":938,"fetchDuration":938,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.662Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1167,"chartType":"stacked-bar","recordCount":46,"fetchDuration":938,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.662Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1167,"chartType":"stacked-bar","recordCount":46,"groupBy":"provider_name","colorPalette":"blue","stackingMode":"normal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.662Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"stacked-bar","duration":0,"datasetCount":6,"labelCount":9,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.662Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1167,"chartType":"stacked-bar","datasetCount":6,"labelCount":9,"transformDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.662Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1167,"chartType":"stacked-bar","totalDuration":945,"fetchDuration":938,"transformDuration":0,"recordCount":46,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.662Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1167,"requestingUserId":"[UUID]","chartType":"stacked-bar","recordCount":46,"orchestratorDuration":945,"queryTimeMs":938,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.662Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"stacked-bar","duration":945,"recordCount":46,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.662Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":946,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.663Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9r1n_3ybd6gwg","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1168,"userId":"[UUID]","statusCode":200,"totalDuration":1167,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1227ms
{"@timestamp":"2025-10-12T10:56:17.668Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:17.669Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:17.669Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:17.688Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.688Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.696Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.696Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.696Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.696Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: { duration: '199ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-12T10:56:17.698Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":660,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1256,"seriesCount":2,"totalRecords":3081,"queryTime":1012,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.698Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1256,"chartType":"bar","recordCount":3081,"queryTimeMs":1012,"fetchDuration":1012,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.698Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1256,"chartType":"bar","recordCount":3081,"fetchDuration":1012,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.698Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1256,"chartType":"bar","recordCount":3081,"groupBy":"provider_name","colorPalette":"default","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.699Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"bar","duration":1,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.699Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1257,"chartType":"bar","datasetCount":2,"labelCount":6,"transformDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.699Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1257,"chartType":"bar","totalDuration":1023,"fetchDuration":1012,"transformDuration":1,"recordCount":3081,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.699Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1257,"requestingUserId":"[UUID]","chartType":"bar","recordCount":3081,"orchestratorDuration":1023,"queryTimeMs":1012,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.699Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"bar","duration":1024,"recordCount":3081,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.702Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1027,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.702Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9r0w_o9hlooql","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1260,"userId":"[UUID]","statusCode":200,"totalDuration":1260,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1301ms
{"@timestamp":"2025-10-12T10:56:17.707Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:17.713Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":223,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
{"@timestamp":"2025-10-12T10:56:17.720Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":25,"remaining":175,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.720Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.720Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.723Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.723Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-12T10:56:17.729Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":239,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.729Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":104,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.729Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":207,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.729Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":239,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.729Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.729Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":239,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.730Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.730Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":240,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.730Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":240,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.730Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":240,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.730Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":240,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"horizontal-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.730Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":240,"chartType":"horizontal-bar","dataSourceId":1,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [1]
âœ… QUERY RESULT: {
  duration: '107ms',
  rowCount: 1,
  sampleData: { total: '5289376.44', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:56:17.730Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1253,"queryTime":1006,"resultCount":46,"totalCount":5289376,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.731Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1254,"chartType":"dual-axis","recordCount":46,"queryTimeMs":1006,"fetchDuration":1007,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [1, true]
{"@timestamp":"2025-10-12T10:56:17.733Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":26,"remaining":174,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.733Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.733Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.733Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":27,"remaining":173,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.733Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.733Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: {
  duration: '110ms',
  rowCount: 1,
  sampleData: { total: '48', measure_type: 'count' }
}
{"@timestamp":"2025-10-12T10:56:17.734Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1257,"queryTime":1010,"resultCount":48,"totalCount":48,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.734Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1257,"chartType":"dual-axis","recordCount":48,"queryTimeMs":1010,"fetchDuration":1010,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.734Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":66,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":1011,"parallelFetch":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.734Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1257,"chartType":"dual-axis","recordCount":94,"fetchDuration":1011,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.734Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":193,"function":"ComboChartHandler.transform","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.734Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1257,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.735Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1258,"chartType":"dual-axis","totalDuration":1019,"fetchDuration":1011,"transformDuration":0,"recordCount":94,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.735Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1258,"requestingUserId":"[UUID]","chartType":"dual-axis","recordCount":94,"orchestratorDuration":1020,"queryTimeMs":1011,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.735Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"dual-axis","duration":1021,"recordCount":94,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.735Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1021,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.735Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9r18_cv5wi9r3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1258,"userId":"[UUID]","statusCode":200,"totalDuration":1258,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1316ms
{"@timestamp":"2025-10-12T10:56:17.739Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":249,"dataSourceId":1,"dataSourceName":"Practice Analytics","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.740Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"dataSourceId":1,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.740Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"chartType":"horizontal-bar","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.740Z","level":"DEBUG","message":"Handler found via canHandle() method","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":52,"function":"ChartTypeRegistry.getHandler","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"chartType":"horizontal-bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.740Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"chartType":"horizontal-bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.740Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"chartType":"horizontal-bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.740Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"chartType":"bar","dataSourceId":1,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.740Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"params":{"data_source_id":1,"start_date":"2025-01-01","end_date":"2025-09-30","limit":10000,"measure":"Charges by Provider","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.759Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":28,"remaining":172,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.759Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.759Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.759Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":29,"remaining":171,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.759Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.759Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.763Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.763Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.764Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":30,"remaining":170,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.764Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.764Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.769Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"type":"api","identifier":"::1","current":31,"remaining":169,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.769Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.769Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.773Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":283,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '        FROM ih.agg_app_measures\n' +
    '        WHERE measure = $1 AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '        ORDER BY date_index ASC\n' +
    '      ',
  parameters: [ 'Charges by Provider', 'Monthly', '2025-01-01', '2025-09-30' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:17.802Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":79,"type":"api","identifier":"::1","current":32,"remaining":168,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.802Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":79,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.802Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":79,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.802Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"type":"api","identifier":"::1","current":33,"remaining":167,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.802Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.802Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.844Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.844Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":85,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.844Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":124,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.844Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.844Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.844Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.844Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.845Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.845Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.845Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.845Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.846Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"bar","dataSourceId":1,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [1]
{"@timestamp":"2025-10-12T10:56:17.846Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":83,"type":"api","identifier":"::1","current":34,"remaining":166,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.846Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":83,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.846Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":83,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.846Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.846Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":82,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.846Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":113,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"number","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"number","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":78,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.847Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":114,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.848Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.848Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.848Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.848Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.848Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.848Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.848Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.848Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"dual-axis","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.848Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [1, true]
{"@timestamp":"2025-10-12T10:56:17.850Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.850Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.850Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"number","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.850Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"number","handlerType":"number","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.850Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"number","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.850Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"MetricChartHandler.fetchData","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"number","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.850Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cash Transfer","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.851Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"dataSourceId":1,"dataSourceName":"Practice Analytics","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.851Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"dataSourceId":1,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.851Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"chartType":"bar","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.851Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"chartType":"bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.851Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"chartType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.851Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"chartType":"bar","dataSourceId":1,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":527,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":45,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cancellations","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.852Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.853Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cash Transfer","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: {
  duration: '81ms',
  rowCount: 1501,
  sampleData: {
    practice: 'Arthritis & Rheumatology Care Cente',
    practice_primary: 'Relan, Manish',
    practice_uid: 138,
    provider_name: 'Relan, Manish',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '687699',
    measure_type: 'currency'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(measure_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_app_measures\n' +
    '        WHERE measure = $1 AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Charges by Provider', 'Monthly', '2025-01-01', '2025-09-30' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:17.900Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":177,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.900Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":98,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"progress-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.901Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"chartType":"progress-bar","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
{"@timestamp":"2025-10-12T10:56:17.902Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:17.902Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":214,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:17.902Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cancellations', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-12T10:56:17.903Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":180,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.904Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":181,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.904Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":181,"chartType":"progress-bar","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.904Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":181,"chartType":"progress-bar","handlerType":"progress-bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.904Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":181,"chartType":"progress-bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.904Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ProgressBarChartHandler.fetchData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":181,"chartType":"progress-bar","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.904Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":181,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-12-31","limit":10000,"measure":"Top Procedures","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.977Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":281,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:17.978Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":215,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.978Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":132,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.978Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":176,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.978Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":215,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.978Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.978Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":215,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.978Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.978Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":215,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.978Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":215,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.979Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":216,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":null,"advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
{"@timestamp":"2025-10-12T10:56:17.979Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":256,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Top Procedures', 'Monthly', '2025-01-01', '2025-12-31' ],
  paramCount: 4
}
âœ… QUERY RESULT: {
  duration: '126ms',
  rowCount: 1,
  sampleData: { total: '1057348789', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:56:17.980Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":490,"queryTime":240,"resultCount":1501,"totalCount":1057348789,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.980Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":490,"chartType":"bar","recordCount":1501,"queryTimeMs":240,"fetchDuration":240,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.980Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":490,"chartType":"horizontal-bar","recordCount":1501,"fetchDuration":240,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.980Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":490,"chartType":"horizontal-bar","recordCount":1501,"groupBy":"provider_name","colorPalette":"purple","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.981Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"horizontal-bar","duration":1,"datasetCount":1,"labelCount":289,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.981Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":491,"chartType":"horizontal-bar","datasetCount":1,"labelCount":289,"transformDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.981Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":491,"chartType":"horizontal-bar","totalDuration":251,"fetchDuration":240,"transformDuration":1,"recordCount":1501,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.981Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":491,"requestingUserId":"[UUID]","chartType":"horizontal-bar","recordCount":1501,"orchestratorDuration":251,"queryTimeMs":240,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.981Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"horizontal-bar","duration":251,"recordCount":1501,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.982Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:17.983Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9run_dwboif55","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":493,"userId":"[UUID]","statusCode":200,"totalDuration":492,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 512ms
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
{"@timestamp":"2025-10-12T10:56:17.988Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-12T10:56:17.990Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:56:17.994Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":7,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:17.994Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":231,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE "date_value" >= $1 AND "date_value" <= $2 LIMIT 1000 -- params: ["2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-12T10:56:18.006Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.006Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: {
  duration: '120ms',
  rowCount: 46,
  sampleData: {
    id: 22824,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 145,
    provider_name: 'Busch-Feuer, Rachael',
    entity_type: 'Provider',
    entity_id: '145',
    entity_name: 'Busch-Feuer, Rachael',
    measure: 'Cash Transfer',
    measure_type: 'currency',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '143781.79',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.748293+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
âœ… QUERY RESULT: {
  duration: '121ms',
  rowCount: 48,
  sampleData: {
    id: 21626,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 420,
    provider_name: 'Ray, Madina',
    entity_type: 'Provider',
    entity_id: '420',
    entity_name: 'Ray, Madina',
    measure: 'Cancellations',
    measure_type: 'count',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '7.00',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.224414+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cancellations', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
âœ… QUERY RESULT: {
  duration: '137ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:18.040Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":35,"remaining":165,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.040Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.040Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.127Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
âœ… QUERY RESULT: {
  duration: '169ms',
  rowCount: 46,
  sampleData: {
    id: 22824,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 145,
    provider_name: 'Busch-Feuer, Rachael',
    entity_type: 'Provider',
    entity_id: '145',
    entity_name: 'Busch-Feuer, Rachael',
    measure: 'Cash Transfer',
    measure_type: 'currency',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '143781.79',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.748293+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
âœ… QUERY RESULT: {
  duration: '179ms',
  rowCount: 1154,
  sampleData: {
    id: 26467,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 420,
    provider_name: 'Ray, Madina',
    entity_type: 'Procedures',
    entity_id: 'J1745',
    entity_name: 'Remicade',
    measure: 'Top Procedures',
    measure_type: 'count',
    frequency: 'Monthly',
    date_index: '2025-01-06',
    display_date: '2025-01-06 00:00:00+00',
    measure_value: '1.00',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 14:03:21.509173+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Top Procedures', 'Monthly', '2025-01-01', '2025-12-31' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:18.161Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"type":"api","identifier":"::1","current":36,"remaining":164,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.161Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.161Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.178Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:18.178Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":200,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-12T10:56:18.178Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9s27_mtkgpp54","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":415,"userId":"[UUID]","statusCode":200,"totalDuration":415,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?start_date=2025-01-01&end_date=2025-10-06&practice=114&limit=1000&_t=1760266576409 200 in 433ms
âœ… QUERY RESULT: {
  duration: '158ms',
  rowCount: 1,
  sampleData: { total: '5289376.44', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":484,"queryTime":330,"resultCount":46,"totalCount":5289376,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"MetricChartHandler.fetchData","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":484,"chartType":"number","recordCount":46,"queryTimeMs":330,"fetchDuration":330,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":484,"chartType":"number","recordCount":46,"fetchDuration":330,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Transforming metric chart data","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":84,"function":"MetricChartHandler.transform","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":484,"chartType":"number","recordCount":46,"aggregationType":"sum","valueColumn":"measure_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Data aggregated","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":68,"function":"MetricChartHandler.aggregateData","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","aggregationType":"sum","valueColumn":"measure_value","valueCount":46,"result":5289376.44,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Metric chart data transformed","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":133,"function":"MetricChartHandler.transform","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"number","duration":0,"aggregationType":"sum","aggregatedValue":5289376.44,"measureType":"currency","datasetCount":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":484,"chartType":"number","datasetCount":1,"labelCount":0,"transformDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":484,"chartType":"number","totalDuration":333,"fetchDuration":330,"transformDuration":0,"recordCount":46,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":484,"requestingUserId":"[UUID]","chartType":"number","recordCount":46,"orchestratorDuration":333,"queryTimeMs":330,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"number","duration":333,"recordCount":46,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.180Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.181Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9s03_qdm5vls2","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":485,"userId":"[UUID]","statusCode":200,"totalDuration":485,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 511ms
{"@timestamp":"2025-10-12T10:56:18.185Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
âœ… QUERY RESULT: {
  duration: '169ms',
  rowCount: 1,
  sampleData: { total: '48', measure_type: 'count' }
}
{"@timestamp":"2025-10-12T10:56:18.192Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":496,"queryTime":340,"resultCount":48,"totalCount":48,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.193Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":497,"chartType":"dual-axis","recordCount":48,"queryTimeMs":340,"fetchDuration":340,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.200Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.200Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: { duration: '170ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-12T10:56:18.210Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":660,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":522,"seriesCount":2,"totalRecords":3081,"queryTime":358,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.210Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":522,"chartType":"bar","recordCount":3081,"queryTimeMs":358,"fetchDuration":359,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.210Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":522,"chartType":"bar","recordCount":3081,"fetchDuration":359,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.210Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":522,"chartType":"bar","recordCount":3081,"groupBy":"provider_name","colorPalette":"default","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.211Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"bar","duration":1,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.211Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":523,"chartType":"bar","datasetCount":2,"labelCount":6,"transformDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.211Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":523,"chartType":"bar","totalDuration":366,"fetchDuration":359,"transformDuration":1,"recordCount":3081,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.211Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":523,"requestingUserId":"[UUID]","chartType":"bar","recordCount":3081,"orchestratorDuration":366,"queryTimeMs":359,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.211Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"bar","duration":366,"recordCount":3081,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.213Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":368,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.214Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9s03_546t3sh8","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":526,"userId":"[UUID]","statusCode":200,"totalDuration":525,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 545ms
âœ… QUERY RESULT: {
  duration: '77ms',
  rowCount: 1,
  sampleData: { total: '5289376.44', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:56:18.225Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":529,"queryTime":373,"resultCount":46,"totalCount":5289376,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.225Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":529,"chartType":"dual-axis","recordCount":46,"queryTimeMs":373,"fetchDuration":373,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.225Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":66,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":373,"parallelFetch":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.225Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":529,"chartType":"dual-axis","recordCount":94,"fetchDuration":373,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.225Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":193,"function":"ComboChartHandler.transform","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.225Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":529,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.225Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":529,"chartType":"dual-axis","totalDuration":377,"fetchDuration":373,"transformDuration":0,"recordCount":94,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.225Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":529,"requestingUserId":"[UUID]","chartType":"dual-axis","recordCount":94,"orchestratorDuration":377,"queryTimeMs":373,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.225Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"dual-axis","duration":377,"recordCount":94,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.226Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":378,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.226Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9s03_qx1hi0tk","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":530,"userId":"[UUID]","statusCode":200,"totalDuration":530,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 556ms
{"@timestamp":"2025-10-12T10:56:18.227Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.227Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.227Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":187,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.227Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.227Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.227Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.227Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.227Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.227Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.228Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.228Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"stacked-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.228Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"chartType":"stacked-bar","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-12T10:56:18.230Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"type":"api","identifier":"::1","current":37,"remaining":163,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.230Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.230Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.231Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.231Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.231Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"chartType":"stacked-bar","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.231Z","level":"DEBUG","message":"Handler found via canHandle() method","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":52,"function":"ChartTypeRegistry.getHandler","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"chartType":"stacked-bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.231Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"chartType":"stacked-bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.231Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"chartType":"stacked-bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.231Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"chartType":"bar","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.231Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-12","limit":10000,"measure":"Cash Transfer","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: {
  duration: '94ms',
  rowCount: 1,
  sampleData: { total: '1154', measure_type: 'count' }
}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"queryTime":350,"resultCount":1154,"totalCount":1154,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ProgressBarChartHandler.fetchData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"chartType":"progress-bar","recordCount":1154,"queryTimeMs":350,"fetchDuration":351,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"chartType":"progress-bar","recordCount":1154,"fetchDuration":351,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"INFO","message":"Transforming progress bar chart data","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":73,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"recordCount":1154,"aggregationType":"sum","groupBy":"entity_name","hasTarget":false,"valueColumn":"measure_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"DEBUG","message":"Sample raw data records","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":99,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"sampleCount":3,"samples":[{"groupBy":"Remicade","valueColumn":"1.00","valueType":"string"},{"groupBy":"Orencia","valueColumn":"2.00","valueType":"string"},{"groupBy":"Saphnelo","valueColumn":"1.00","valueType":"string"}],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"INFO","message":"Data grouped for progress bars","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":117,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"groupCount":10,"groups":["Remicade","Orencia","Saphnelo","Cimzia","Celestone Soluspan","Simponi Aria","Evenity","Actemra","Benlysta","Reclast"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"aggregationType":"sum","valueCount":80,"sampleValues":[1,3,4],"result":206,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"aggregationType":"sum","valueCount":138,"sampleValues":[2,2,3],"result":524,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"aggregationType":"sum","valueCount":86,"sampleValues":[1,4,1],"result":157,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"aggregationType":"sum","valueCount":123,"sampleValues":[2,1,5],"result":369,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"aggregationType":"sum","valueCount":101,"sampleValues":[1,3,1],"result":162,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"aggregationType":"sum","valueCount":110,"sampleValues":[2,4,2],"result":392,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.255Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"aggregationType":"sum","valueCount":144,"sampleValues":[3,10,4],"result":434,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":533,"aggregationType":"sum","valueCount":157,"sampleValues":[3,11,2],"result":631,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":533,"aggregationType":"sum","valueCount":112,"sampleValues":[8,2,8],"result":497,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"DEBUG","message":"Data aggregated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":55,"function":"ProgressBarChartHandler.aggregateData","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":533,"aggregationType":"sum","valueCount":103,"sampleValues":[1,1,2],"result":195,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"INFO","message":"Dynamic target calculated for progress bars","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":134,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":533,"groupCount":10,"dynamicTarget":3567,"usingDynamicTarget":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"DEBUG","message":"Progress bar groups calculated","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":151,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":533,"sampleGroups":[{"label":"Actemra","value":631,"percentage":"17.69%"},{"label":"Orencia","value":524,"percentage":"14.69%"},{"label":"Benlysta","value":497,"percentage":"13.93%"}],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"INFO","message":"Progress bar chart data transformed","service":"bendcare-os","env":"development","file":"progress-bar-handler.ts","line":181,"function":"ProgressBarChartHandler.transform","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"aggregationType":"sum","groupCount":10,"datasetCount":1,"sampleLabels":["Actemra","Orencia","Benlysta"],"sampleRawValues":[631,524,497],"samplePercentages":[17.689935520044855,14.690215867675919,13.93327726380712],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":533,"chartType":"progress-bar","datasetCount":1,"labelCount":10,"transformDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":533,"chartType":"progress-bar","totalDuration":355,"fetchDuration":351,"transformDuration":1,"recordCount":1154,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":533,"requestingUserId":"[UUID]","chartType":"progress-bar","recordCount":1154,"orchestratorDuration":355,"queryTimeMs":351,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.256Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"progress-bar","duration":355,"recordCount":1154,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.257Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":356,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.257Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9s17_3e7i236e","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":534,"userId":"[UUID]","statusCode":200,"totalDuration":534,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 550ms
{"@timestamp":"2025-10-12T10:56:18.269Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":38,"remaining":162,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.269Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.269Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.269Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-12' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:18.336Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.336Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.336Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.336Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.336Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.336Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.337Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.337Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.337Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.337Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.337Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"horizontal-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.337Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"chartType":"horizontal-bar","dataSourceId":1,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [1]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [1, true]
{"@timestamp":"2025-10-12T10:56:18.340Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"dataSourceId":1,"dataSourceName":"Practice Analytics","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.340Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"dataSourceId":1,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.340Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"chartType":"horizontal-bar","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.340Z","level":"DEBUG","message":"Handler found via canHandle() method","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":52,"function":"ChartTypeRegistry.getHandler","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"chartType":"horizontal-bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.340Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"chartType":"horizontal-bar","handlerType":"bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.340Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"chartType":"horizontal-bar","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.341Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"chartType":"bar","dataSourceId":1,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.341Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"params":{"data_source_id":1,"start_date":"2025-01-01","end_date":"2025-09-30","limit":10000,"measure":"Charges by Provider","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
âœ… QUERY RESULT: {
  duration: '72ms',
  rowCount: 46,
  sampleData: {
    id: 22824,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 145,
    provider_name: 'Busch-Feuer, Rachael',
    entity_type: 'Provider',
    entity_id: '145',
    entity_name: 'Busch-Feuer, Rachael',
    measure: 'Cash Transfer',
    measure_type: 'currency',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '143781.79',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.748293+00'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-12' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:56:18.376Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":176,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '        FROM ih.agg_app_measures\n' +
    '        WHERE measure = $1 AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '        ORDER BY date_index ASC\n' +
    '      ',
  parameters: [ 'Charges by Provider', 'Monthly', '2025-01-01', '2025-09-30' ],
  paramCount: 4
}
âœ… QUERY RESULT: {
  duration: '68ms',
  rowCount: 1,
  sampleData: { total: '5289376.44', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:56:18.409Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":403,"queryTime":178,"resultCount":46,"totalCount":5289376,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.410Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":404,"chartType":"bar","recordCount":46,"queryTimeMs":178,"fetchDuration":178,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.410Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":404,"chartType":"stacked-bar","recordCount":46,"fetchDuration":179,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.410Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":404,"chartType":"stacked-bar","recordCount":46,"groupBy":"provider_name","colorPalette":"blue","stackingMode":"normal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.411Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"stacked-bar","duration":1,"datasetCount":6,"labelCount":9,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.412Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":406,"chartType":"stacked-bar","datasetCount":6,"labelCount":9,"transformDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.412Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":406,"chartType":"stacked-bar","totalDuration":184,"fetchDuration":179,"transformDuration":2,"recordCount":46,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.413Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":407,"requestingUserId":"[UUID]","chartType":"stacked-bar","recordCount":46,"orchestratorDuration":185,"queryTimeMs":179,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.413Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"stacked-bar","duration":186,"recordCount":46,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.414Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":186,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.414Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9s91_4c4gjf2c","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":408,"userId":"[UUID]","statusCode":200,"totalDuration":408,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 425ms
âœ… QUERY RESULT: {
  duration: '79ms',
  rowCount: 1501,
  sampleData: {
    practice: 'Arthritis & Rheumatology Care Cente',
    practice_primary: 'Relan, Manish',
    practice_uid: 138,
    provider_name: 'Relan, Manish',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '687699',
    measure_type: 'currency'
  }
}
ðŸ” EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(measure_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_app_measures\n' +
    '        WHERE measure = $1 AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Charges by Provider', 'Monthly', '2025-01-01', '2025-09-30' ],
  paramCount: 4
}
âœ… QUERY RESULT: {
  duration: '73ms',
  rowCount: 1,
  sampleData: { total: '1057348789', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:56:18.531Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"queryTime":190,"resultCount":1501,"totalCount":1057348789,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.531Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"BarChartHandler.fetchData","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"chartType":"bar","recordCount":1501,"queryTimeMs":190,"fetchDuration":191,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.532Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"horizontal-bar","recordCount":1501,"fetchDuration":191,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.532Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"horizontal-bar","recordCount":1501,"groupBy":"provider_name","colorPalette":"purple","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.534Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"horizontal-bar","duration":2,"datasetCount":1,"labelCount":289,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.535Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"chartType":"horizontal-bar","datasetCount":1,"labelCount":289,"transformDuration":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.535Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"chartType":"horizontal-bar","totalDuration":198,"fetchDuration":191,"transformDuration":3,"recordCount":1501,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.535Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"requestingUserId":"[UUID]","chartType":"horizontal-bar","recordCount":1501,"orchestratorDuration":198,"queryTimeMs":191,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.535Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"horizontal-bar","duration":198,"recordCount":1501,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.540Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":202,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:56:18.540Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnl9seg_5mv8945r","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"userId":"[UUID]","statusCode":200,"totalDuration":340,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 356ms