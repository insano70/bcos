✓ Starting...
 ✓ Ready in 1687ms
 ✓ Compiled /middleware in 346ms (407 modules)
 ○ Compiling /api/csrf ...
 ✓ Compiled /api/csrf in 911ms (718 modules)
{"@timestamp":"2025-10-13T23:25:20.453Z","level":"INFO","message":"GET /api/csrf - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:20.454Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/csrf","requiredPermissions":[],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:20.454Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.589Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1136,"component":"redis","host":"[REDACTED]","port":6379,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.631Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1178,"component":"redis","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.695Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1242,"type":"api","identifier":"::1","current":1,"remaining":199,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.695Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1241,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.695Z","level":"DEBUG","message":"Route marked as public","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":80,"function":"eval","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1242,"reason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.695Z","level":"DEBUG","message":"Public route - skipping user context and RBAC checks","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":102,"function":"eval","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1242,"endpoint":"/api/csrf","publicReason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.698Z","level":"INFO","message":"CSRF token request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"getCSRFTokenHandler","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1245,"isAuthenticated":false,"userId":null,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.700Z","level":"INFO","message":"Anonymous CSRF token generated","service":"bendcare-os","env":"development","file":"route.ts","line":65,"function":"getCSRFTokenHandler","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1247,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.701Z","level":"INFO","message":"CSRF token issued successfully","service":"bendcare-os","env":"development","file":"route.ts","line":82,"function":"getCSRFTokenHandler","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1248,"tokenType":"[REDACTED]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.702Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":109,"function":"eval","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":7,"statusCode":200,"isPublic":true,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:21.702Z","level":"INFO","message":"Public route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":115,"function":"eval","correlationId":"cor_mgprgvwb_e727qptx","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1249,"endpoint":"/api/csrf","statusCode":200,"totalDuration":1249,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
 GET /api/csrf 200 in 2348ms
{"@timestamp":"2025-10-13T23:25:21.724Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":1,"hasErrors":false,"errorCount":0}
 ○ Compiling /api/auth/login ...
 ✓ Compiled /api/auth/login in 1041ms (988 modules)
{"@timestamp":"2025-10-13T23:25:22.981Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"auth","identifier":"::1","current":11,"remaining":9,"limit":20}
{"@timestamp":"2025-10-13T23:25:23.089Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"auth","identifier":"::1","current":12,"remaining":8,"limit":20}
Query: select "user_id" from "users" where "users"."email" = $1 limit $2 -- params: ["sleeve@bendcare.com", 1]
Query: select "user_id", "failed_login_attempts", "last_failed_attempt", "locked_until", "lockout_reason", "max_concurrent_sessions", "require_fresh_auth_minutes", "password_changed_at", "last_password_reset", "suspicious_activity_detected", "mfa_enabled", "mfa_method", "mfa_enforced_at", "mfa_skips_remaining", "mfa_skip_count", "mfa_first_skipped_at", "mfa_last_skipped_at", "created_at", "updated_at" from "account_security" where "account_security"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "provider_uid", "created_at", "updated_at", "deleted_at" from "users" where "users"."email" = $1 limit $2 -- params: ["sleeve@bendcare.com", 1]
{"@timestamp":"2025-10-13T23:25:23.358Z","level":"INFO","message":"Auth: password_verification","service":"bendcare-os","env":"development","file":"route.ts","line":163,"function":"loginHandler","component":"auth","action":"password_verification","success":true,"userId":"[UUID]","method":"session"}
Query: select "user_id" from "users" where "users"."email" = $1 limit $2 -- params: ["sleeve@bendcare.com", 1]
Query: select "user_id", "failed_login_attempts", "last_failed_attempt", "locked_until", "lockout_reason", "max_concurrent_sessions", "require_fresh_auth_minutes", "password_changed_at", "last_password_reset", "suspicious_activity_detected", "mfa_enabled", "mfa_method", "mfa_enforced_at", "mfa_skips_remaining", "mfa_skip_count", "mfa_first_skipped_at", "mfa_last_skipped_at", "created_at", "updated_at" from "account_security" where "account_security"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: update "account_security" set "failed_login_attempts" = $1, "last_failed_attempt" = $2, "locked_until" = $3, "suspicious_activity_detected" = $4 where "account_security"."user_id" = $5 -- params: [0, null, null, false, "6d48031e-4d7d-4fc3-8f6f-ac2b104118bf"]
Query: select "user_id", "failed_login_attempts", "last_failed_attempt", "locked_until", "lockout_reason", "max_concurrent_sessions", "require_fresh_auth_minutes", "password_changed_at", "last_password_reset", "suspicious_activity_detected", "mfa_enabled", "mfa_method", "mfa_enforced_at", "mfa_skips_remaining", "mfa_skip_count", "mfa_first_skipped_at", "mfa_last_skipped_at", "created_at", "updated_at" from "account_security" where "account_security"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: select "credential_id", "user_id", "public_key", "counter", "credential_device_type", "transports", "aaguid", "credential_name", "created_at", "last_used", "is_active", "backed_up", "registration_ip", "registration_user_agent" from "webauthn_credentials" where ("webauthn_credentials"."user_id" = $1 and "webauthn_credentials"."is_active" = $2) -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", true]
Query: select "user_id", "failed_login_attempts", "last_failed_attempt", "locked_until", "lockout_reason", "max_concurrent_sessions", "require_fresh_auth_minutes", "password_changed_at", "last_password_reset", "suspicious_activity_detected", "mfa_enabled", "mfa_method", "mfa_enforced_at", "mfa_skips_remaining", "mfa_skip_count", "mfa_first_skipped_at", "mfa_last_skipped_at", "created_at", "updated_at" from "account_security" where "account_security"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: select "user_id", "failed_login_attempts", "last_failed_attempt", "locked_until", "lockout_reason", "max_concurrent_sessions", "require_fresh_auth_minutes", "password_changed_at", "last_password_reset", "suspicious_activity_detected", "mfa_enabled", "mfa_method", "mfa_enforced_at", "mfa_skips_remaining", "mfa_skip_count", "mfa_first_skipped_at", "mfa_last_skipped_at", "created_at", "updated_at" from "account_security" where "account_security"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
{"@timestamp":"2025-10-13T23:25:23.450Z","level":"DEBUG","message":"MFA temp token created","service":"bendcare-os","env":"development","file":"webauthn-temp-token.ts","line":60,"function":"createMFATempToken","userId":"[UUID]","expiresIn":300,"hasChallengeId":false}
{"@timestamp":"2025-10-13T23:25:23.451Z","level":"INFO","message":"Auth: mfa_setup_optional","service":"bendcare-os","env":"development","file":"audit.ts","line":17,"function":"AuditLoggerService.logAuth","component":"auth","action":"mfa_setup_optional","success":true,"userId":"[UUID]","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","email":"[REDACTED]","reason":"password_login_skip_available","skipsRemaining":1}
{"@timestamp":"2025-10-13T23:25:23.451Z","level":"INFO","message":"Audit event processed","service":"bendcare-os","env":"development","file":"audit.ts","line":25,"function":"AuditLoggerService.logAuth","eventType":"auth","action":"mfa_setup_optional","severity":"medium","complianceFramework":"HIPAA","retentionPeriod":"7_years"}
Query: insert into "audit_logs" ("audit_log_id", "event_type", "action", "user_id", "ip_address", "user_agent", "resource_type", "resource_id", "old_values", "new_values", "metadata", "severity", "created_at") values ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) -- params: ["QnfzvousItg7Nsh2mGGI2", "auth", "mfa_setup_optional", "6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", null, null, null, null, "{\"reason\":\"password_login_skip_available\",\"skipsRemaining\":1}", "medium", "2025-10-13T23:25:23.451Z"]
{"@timestamp":"2025-10-13T23:25:23.454Z","level":"DEBUG","message":"Audit log created","service":"bendcare-os","env":"development","file":"audit.ts","line":145,"function":"AuditLoggerService.log","eventType":"auth","action":"mfa_setup_optional","userId":"[UUID]","severity":"medium","operation":"createAuditLog","component":"audit-system","feature":"compliance-logging"}
{"@timestamp":"2025-10-13T23:25:23.454Z","level":"INFO","message":"login password verification succeeded - mfa setup optional","service":"bendcare-os","env":"development","file":"route.ts","line":287,"function":"loginHandler","operation":"login","userId":"[UUID]","status":"mfa_setup_optional","skipsRemaining":1,"skipCount":4,"rememberMe":false,"duration":472,"ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"auth"}
 POST /api/auth/login 200 in 1732ms
 ✓ Compiled /api/auth/mfa/skip in 220ms (991 modules)
{"@timestamp":"2025-10-13T23:25:33.723Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"auth","identifier":"::1","current":13,"remaining":7,"limit":20}
{"@timestamp":"2025-10-13T23:25:33.758Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"auth","identifier":"::1","current":14,"remaining":6,"limit":20}
Query: select "user_id", "failed_login_attempts", "last_failed_attempt", "locked_until", "lockout_reason", "max_concurrent_sessions", "require_fresh_auth_minutes", "password_changed_at", "last_password_reset", "suspicious_activity_detected", "mfa_enabled", "mfa_method", "mfa_enforced_at", "mfa_skips_remaining", "mfa_skip_count", "mfa_first_skipped_at", "mfa_last_skipped_at", "created_at", "updated_at" from "account_security" where "account_security"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: select "user_id", "failed_login_attempts", "last_failed_attempt", "locked_until", "lockout_reason", "max_concurrent_sessions", "require_fresh_auth_minutes", "password_changed_at", "last_password_reset", "suspicious_activity_detected", "mfa_enabled", "mfa_method", "mfa_enforced_at", "mfa_skips_remaining", "mfa_skip_count", "mfa_first_skipped_at", "mfa_last_skipped_at", "created_at", "updated_at" from "account_security" where "account_security"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: update "account_security" set "mfa_skips_remaining" = $1, "mfa_skip_count" = $2, "mfa_first_skipped_at" = $3, "mfa_last_skipped_at" = $4, "updated_at" = $5 where "account_security"."user_id" = $6 -- params: [0, 5, "2025-10-13T10:51:01.981Z", "2025-10-13T23:25:33.780Z", "2025-10-13T23:25:33.780Z", "6d48031e-4d7d-4fc3-8f6f-ac2b104118bf"]
{"@timestamp":"2025-10-13T23:25:33.781Z","level":"INFO","message":"Auth: mfa_setup_skipped","service":"bendcare-os","env":"development","file":"audit.ts","line":17,"function":"AuditLoggerService.logAuth","component":"auth","action":"mfa_setup_skipped","success":true,"userId":"[UUID]","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","email":"[REDACTED]","skipsRemaining":0,"totalSkips":5,"isFirstSkip":false,"isFinalSkip":true}
{"@timestamp":"2025-10-13T23:25:33.782Z","level":"INFO","message":"Audit event processed","service":"bendcare-os","env":"development","file":"audit.ts","line":25,"function":"AuditLoggerService.logAuth","eventType":"auth","action":"mfa_setup_skipped","severity":"medium","complianceFramework":"HIPAA","retentionPeriod":"7_years"}
Query: insert into "audit_logs" ("audit_log_id", "event_type", "action", "user_id", "ip_address", "user_agent", "resource_type", "resource_id", "old_values", "new_values", "metadata", "severity", "created_at") values ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) -- params: ["nFRXARnuPjwvvjUMeXm8E", "auth", "mfa_setup_skipped", "6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", null, null, null, null, "{\"skipsRemaining\":0,\"totalSkips\":5,\"isFirstSkip\":false,\"isFinalSkip\":true}", "medium", "2025-10-13T23:25:33.782Z"]
{"@timestamp":"2025-10-13T23:25:33.785Z","level":"DEBUG","message":"Audit log created","service":"bendcare-os","env":"development","file":"audit.ts","line":145,"function":"AuditLoggerService.log","eventType":"auth","action":"mfa_setup_skipped","userId":"[UUID]","severity":"medium","operation":"createAuditLog","component":"audit-system","feature":"compliance-logging"}
{"@timestamp":"2025-10-13T23:25:33.785Z","level":"INFO","message":"mfa setup skipped","service":"bendcare-os","env":"development","file":"mfa-skip-tracker.ts","line":91,"function":"recordMFASkip","operation":"mfa_skip","userId":"[UUID]","skipsRemaining":0,"totalSkips":5,"isFirstSkip":false,"isFinalSkip":true,"ipAddress":"[REDACTED]","component":"auth"}
{"@timestamp":"2025-10-13T23:25:33.785Z","level":"WARN","message":"Security: mfa_skip_limit_reached","service":"bendcare-os","env":"development","file":"mfa-skip-tracker.ts","line":103,"function":"recordMFASkip","component":"security","event":"mfa_skip_limit_reached","severity":"medium","userId":"[UUID]","totalSkips":5,"action":"mfa_will_be_enforced_next_login","blocked":false}
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "provider_uid", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: insert into "refresh_tokens" ("token_id", "user_id", "token_hash", "device_fingerprint", "ip_address", "user_agent", "remember_me", "issued_at", "expires_at", "last_used", "is_active", "revoked_at", "revoked_reason", "rotation_count", "created_at") values ($1, $2, $3, $4, $5, $6, $7, default, $8, default, default, default, default, $9, default) -- params: ["bfrvJp7f8174TDfNWGNEK6Z-zHRmUJbo", "6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", "09587eb9e7820ef1f1f97d9b468856e120f6866508472cafbe16423d0342e203", "13b197eeb712468ac5b56dbf7be43c43", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", false, "2025-10-20T23:25:33.787Z", 0]
Query: insert into "user_sessions" ("session_id", "user_id", "refresh_token_id", "device_fingerprint", "device_name", "ip_address", "user_agent", "remember_me", "is_active", "last_activity", "created_at", "ended_at", "end_reason") values ($1, $2, $3, $4, $5, $6, $7, $8, default, default, default, default, default) -- params: ["uuNe6AmliNjiSabTEdK7yWTdCHTfZEZ0", "6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", "bfrvJp7f8174TDfNWGNEK6Z-zHRmUJbo", "13b197eeb712468ac5b56dbf7be43c43", "Chrome Browser", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", false]
Query: insert into "login_attempts" ("attempt_id", "email", "user_id", "ip_address", "user_agent", "device_fingerprint", "success", "failure_reason", "remember_me_requested", "session_id", "attempted_at") values ($1, $2, $3, $4, $5, $6, $7, default, $8, $9, default) -- params: ["-qvjewOLRa7jzOHQip4Li", "sleeve@bendcare.com", "6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "13b197eeb712468ac5b56dbf7be43c43", true, false, "uuNe6AmliNjiSabTEdK7yWTdCHTfZEZ0"]
{"@timestamp":"2025-10-13T23:25:33.792Z","level":"INFO","message":"Auth: login","service":"bendcare-os","env":"development","file":"audit.ts","line":17,"function":"AuditLoggerService.logAuth","component":"auth","action":"login","success":true,"userId":"[UUID]","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","email":"[REDACTED]","sessionId":"uuNe6AmliNjiSabTEdK7yWTdCHTfZEZ0","refreshTokenId":"[REDACTED]","rememberMe":false,"deviceFingerprint":"13b197eeb712468ac5b56dbf7be43c43","deviceName":"Chrome Browser"}
{"@timestamp":"2025-10-13T23:25:33.793Z","level":"INFO","message":"Audit event processed","service":"bendcare-os","env":"development","file":"audit.ts","line":25,"function":"AuditLoggerService.logAuth","eventType":"auth","action":"login","severity":"medium","complianceFramework":"HIPAA","retentionPeriod":"7_years"}
Query: insert into "audit_logs" ("audit_log_id", "event_type", "action", "user_id", "ip_address", "user_agent", "resource_type", "resource_id", "old_values", "new_values", "metadata", "severity", "created_at") values ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) -- params: ["f8UvplxD26tyqOX-DfteP", "auth", "login", "6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", null, null, null, null, "{\"email\":\"sleeve@bendcare.com\",\"sessionId\":\"uuNe6AmliNjiSabTEdK7yWTdCHTfZEZ0\",\"refreshTokenId\":\"bfrvJp7f8174TDfNWGNEK6Z-zHRmUJbo\",\"rememberMe\":false,\"deviceFingerprint\":\"13b197eeb712468ac5b56dbf7be43c43\",\"deviceName\":\"Chrome Browser\"}", "medium", "2025-10-13T23:25:33.793Z"]
{"@timestamp":"2025-10-13T23:25:33.794Z","level":"DEBUG","message":"Audit log created","service":"bendcare-os","env":"development","file":"audit.ts","line":145,"function":"AuditLoggerService.log","eventType":"auth","action":"login","userId":"[UUID]","severity":"medium","operation":"createAuditLog","component":"audit-system","feature":"compliance-logging"}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "provider_uid", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."practice_uids", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", true, true]
Query: select "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3) -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", true, true]
{"@timestamp":"2025-10-13T23:25:33.872Z","level":"DEBUG","message":"Cached user context loaded successfully","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":277,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":7,"organizationsCount":1}
{"@timestamp":"2025-10-13T23:25:33.873Z","level":"INFO","message":"mfa setup skipped - session created","service":"bendcare-os","env":"development","file":"route.ts","line":100,"function":"handler","operation":"mfa_skip","userId":"[UUID]","skipsRemaining":0,"sessionCreated":true,"sessionId":"uuNe6AmliNjiSabTEdK7yWTdCHTfZEZ0","duration":149,"ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"auth"}
 POST /api/auth/mfa/skip 200 in 559ms
 ✓ Compiled /api/auth/me in 142ms (994 modules)
🌐 MIDDLEWARE: Processing request for: /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Processing request for: /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
{"@timestamp":"2025-10-13T23:25:34.234Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":2,"remaining":198,"limit":200}
{"@timestamp":"2025-10-13T23:25:34.234Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
🔐 AUTH: Using access token from httpOnly cookie
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["UCOt16SpF8SDlGAi8bIcV", 1]
{"@timestamp":"2025-10-13T23:25:34.279Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"uuNe6AmliNjiSabTEdK7yWTdCHTfZEZ0","tokenSource":"[REDACTED]","validationDuration":45}
🔐 AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-13T23:25:34.350Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":261,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":7,"fromRedis":true}
{"@timestamp":"2025-10-13T23:25:34.351Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"uuNe6AmliNjiSabTEdK7yWTdCHTfZEZ0","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":7,"duration":117}
{"@timestamp":"2025-10-13T23:25:34.351Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-13T23:25:34.351Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":117,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":8}
{"@timestamp":"2025-10-13T23:25:34.351Z","level":"INFO","message":"user context retrieved successfully from JWT token","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"GET","operation":"get_user_context","userId":"[UUID]","email":"[REDACTED]","rbac":{"roles":1,"permissions":7,"isSuperAdmin":false,"orgAdminFor":0},"organizations":{"direct":1,"accessible":1,"current":"[UUID]"},"duration":153,"slow":false,"component":"auth","cached":true}
 GET /api/auth/me 200 in 439ms
 ○ Compiling /dashboard/view/[dashboardId] ...
 ✓ Compiled /dashboard/view/[dashboardId] in 3s (2886 modules)
 GET /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa 200 in 3854ms
 ○ Compiling /api/admin/analytics/dashboards/[dashboardId] ...
 ✓ Compiled /api/admin/analytics/dashboards/[dashboardId] in 1346ms (2879 modules)
{"@timestamp":"2025-10-13T23:25:40.445Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.446Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
🌐 MIDDLEWARE: Processing request for: /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
{"@timestamp":"2025-10-13T23:25:40.481Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":3,"remaining":197,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.481Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.481Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.562Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":4,"remaining":196,"limit":200}
{"@timestamp":"2025-10-13T23:25:40.562Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
🔐 AUTH: Using access token from httpOnly cookie
{"@timestamp":"2025-10-13T23:25:40.563Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":118,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.563Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":118,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.563Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":118,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa 200 in 93ms
{"@timestamp":"2025-10-13T23:25:40.598Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"uuNe6AmliNjiSabTEdK7yWTdCHTfZEZ0","tokenSource":"[REDACTED]","validationDuration":35}
🔐 AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-13T23:25:40.633Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":261,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":7,"fromRedis":true}
{"@timestamp":"2025-10-13T23:25:40.633Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"uuNe6AmliNjiSabTEdK7yWTdCHTfZEZ0","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":7,"duration":71}
{"@timestamp":"2025-10-13T23:25:40.634Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-13T23:25:40.634Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":72,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":8}
{"@timestamp":"2025-10-13T23:25:40.634Z","level":"INFO","message":"user context retrieved successfully from JWT token","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"GET","operation":"get_user_context","userId":"[UUID]","email":"[REDACTED]","rbac":{"roles":1,"permissions":7,"isSuperAdmin":false,"orgAdminFor":0},"organizations":{"direct":1,"accessible":1,"current":"[UUID]"},"duration":169,"slow":false,"component":"auth","cached":true}
 GET /api/auth/me 200 in 1725ms
{"@timestamp":"2025-10-13T23:25:40.636Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", true, true, true]
{"@timestamp":"2025-10-13T23:25:40.647Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":202,"userId":"[UUID]","rolesCount":1,"permissionsCount":7,"organizationsCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.648Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":84,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.648Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":167,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.648Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":203,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.648Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.649Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.649Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.649Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.650Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-13T23:25:40.661Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","organizationId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"published":7,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":27,"averageChartsPerDashboard":4,"page":1,"pageSize":7},"duration":11,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.661Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":11,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:25:40.661Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhaz8_j4lwnfj4","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":216,"userId":"[UUID]","statusCode":200,"totalDuration":216,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 1760ms
{"@timestamp":"2025-10-13T23:25:40.673Z","level":"INFO","message":"GET /api/csrf - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:40.673Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/csrf","requiredPermissions":[],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:40.709Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:40.710Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:40.710Z","level":"DEBUG","message":"Route marked as public","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":80,"function":"eval","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"reason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:40.710Z","level":"DEBUG","message":"Public route - skipping user context and RBAC checks","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":102,"function":"eval","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"endpoint":"/api/csrf","publicReason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["UCOt16SpF8SDlGAi8bIcV", 1]
{"@timestamp":"2025-10-13T23:25:40.713Z","level":"INFO","message":"CSRF token request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"getCSRFTokenHandler","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":40,"isAuthenticated":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:40.713Z","level":"INFO","message":"Authenticated CSRF token generated","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"getCSRFTokenHandler","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":40,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:40.714Z","level":"INFO","message":"CSRF token issued successfully","service":"bendcare-os","env":"development","file":"route.ts","line":82,"function":"getCSRFTokenHandler","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":41,"tokenType":"[REDACTED]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:40.714Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":109,"function":"eval","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"statusCode":200,"isPublic":true,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:25:40.714Z","level":"INFO","message":"Public route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":115,"function":"eval","correlationId":"cor_mgprhcbm_uu6izu03","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":41,"endpoint":"/api/csrf","statusCode":200,"totalDuration":41,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
 GET /api/csrf 200 in 72ms
{"@timestamp":"2025-10-13T23:25:40.819Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:40.819Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:40.816Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
{"@timestamp":"2025-10-13T23:25:40.939Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":120,"type":"api","identifier":"::1","current":7,"remaining":193,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:40.939Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":120,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:40.939Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":120,"pathname":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:40.970Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"type":"api","identifier":"::1","current":8,"remaining":192,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:40.971Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"pathname":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:40.971Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.036Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":218,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.037Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.037Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":98,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.038Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.038Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.038Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.038Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.039Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.039Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:238:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-13T23:25:41.107Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":288,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:238:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["a0324818-ae41-4bf5-8291-447f30322faa", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["a0324818-ae41-4bf5-8291-447f30322faa"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["a0324818-ae41-4bf5-8291-447f30322faa"]
{"@timestamp":"2025-10-13T23:25:41.154Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":115,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.154Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":115,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:25:41.154Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhaz8_w2zm9p76","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"userId":"[UUID]","statusCode":200,"totalDuration":335,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
 GET /api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa 200 in 2245ms
 ✓ Compiled /api/admin/analytics/charts in 333ms (2882 modules)
{"@timestamp":"2025-10-13T23:25:41.700Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.701Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.733Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":9,"remaining":191,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.733Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.733Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.763Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":63,"type":"api","identifier":"::1","current":10,"remaining":190,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.764Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.764Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.830Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":130,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", true, true, true]
{"@timestamp":"2025-10-13T23:25:41.837Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","rolesCount":1,"permissionsCount":7,"organizationsCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.837Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.838Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.838Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.838Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.838Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.838Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.838Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.838Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-13T23:25:41.842Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","organizationId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"stacked-bar":2,"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":4},"activeCount":13,"inactiveCount":0},"duration":4,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.843Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:25:41.843Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhcqc_hc7wrrry","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","statusCode":200,"totalDuration":143,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 671ms
{"@timestamp":"2025-10-13T23:25:41.879Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":1,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:25:41.886Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:25:41.887Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:25:41.895Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
 ○ Compiling /api/admin/data-sources/[id]/query ...
 ✓ Compiled /api/admin/data-sources/[id]/query in 973ms (2921 modules)
{"@timestamp":"2025-10-13T23:25:43.029Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-13T23:25:43.029Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-13T23:25:43.029Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-13T23:25:43.030Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-13T23:25:43.030Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-13T23:25:43.030Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-13T23:25:43.030Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-13T23:25:43.031Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-13T23:25:43.031Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-13T23:25:43.038Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.038Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.038Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.038Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.038Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.038Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.038Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.039Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.074Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.074Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.074Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":11,"remaining":189,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.074Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.075Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.075Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":12,"remaining":188,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.075Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.075Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.075Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":13,"remaining":187,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.075Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.075Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.075Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":14,"remaining":186,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.076Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.076Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.104Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"type":"api","identifier":"::1","current":15,"remaining":185,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.104Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.104Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.108Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":16,"remaining":184,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.108Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.108Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.109Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":17,"remaining":183,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.109Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.109Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.109Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":18,"remaining":182,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.110Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.110Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.110Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"type":"api","identifier":"::1","current":19,"remaining":181,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.110Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.110Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.140Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":20,"remaining":180,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.140Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.140Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.179Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["6d48031e-4d7d-4fc3-8f6f-ac2b104118bf", true, true, true]
{"@timestamp":"2025-10-13T23:25:43.185Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","rolesCount":1,"permissionsCount":7,"organizationsCount":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.185Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":78,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.186Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":111,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.187Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.188Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"requestingUserId":"[UUID]","currentOrganizationId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.188Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.188Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.188Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.188Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"requestingUserId":"[UUID]","currentOrganizationId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.188Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.188Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.188Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.188Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"requestingUserId":"[UUID]","currentOrganizationId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.189Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.189Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.189Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.189Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"requestingUserId":"[UUID]","currentOrganizationId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.190Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.190Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"bar","dataSourceId":1,"hash":"b7c28847d8b7","cacheKey":"[REDACTED]","configSize":371,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.190Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"number","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.190Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"number","dataSourceId":3,"hash":"88ad969b5656","cacheKey":"[REDACTED]","configSize":155,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.190Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"dual-axis","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.190Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"hash":"d3dffb7e03b0","cacheKey":"[REDACTED]","configSize":359,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.191Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"progress-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.191Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"progress-bar","dataSourceId":3,"hash":"63ef8ec8d13c","cacheKey":"[REDACTED]","configSize":186,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.203Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":129,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.203Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":63,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.203Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":99,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.203Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":129,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.203Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.203Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":129,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.204Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.204Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":130,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.204Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":130,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."organization_id" in ($2) and "organizations"."is_active" = $3) order by "organizations"."created_at" desc -- params: [true, "d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
{"@timestamp":"2025-10-13T23:25:43.210Z","level":"INFO","message":"organizations list query completed - returned 1 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","organizationId":"[UUID]","isSuperAdmin":false,"filters":{"is_active":true},"filterCount":1,"results":{"returned":1,"active":1,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":6,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.210Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":6,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.210Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhd9v_271polkg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","statusCode":200,"totalDuration":136,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 1331ms
{"@timestamp":"2025-10-13T23:25:43.218Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:25:43.238Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.238Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.268Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":231,"key":"[REDACTED]","chartType":"bar","cachedAt":"2025-10-13T23:23:10.695Z","recordCount":100,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.268Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":231,"requestingUserId":"[UUID]","chartType":"bar","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:23:10.695Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.268Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":81,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.269Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhd9w_tc40h5jh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":232,"userId":"[UUID]","statusCode":200,"totalDuration":232,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1389ms
{"@timestamp":"2025-10-13T23:25:43.274Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:25:43.288Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.289Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.300Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"key":"[REDACTED]","chartType":"number","cachedAt":"2025-10-13T23:23:10.696Z","recordCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.301Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"requestingUserId":"[UUID]","chartType":"number","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:23:10.696Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.301Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":113,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.301Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhda3_m16jgvx0","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"userId":"[UUID]","statusCode":200,"totalDuration":263,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1413ms
{"@timestamp":"2025-10-13T23:25:43.322Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.322Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.332Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"key":"[REDACTED]","chartType":"dual-axis","cachedAt":"2025-10-13T23:21:27.726Z","recordCount":94,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.332Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"requestingUserId":"[UUID]","chartType":"dual-axis","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:21:27.726Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.332Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.332Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhda3_5x5rv1oq","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"userId":"[UUID]","statusCode":200,"totalDuration":294,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1444ms
{"@timestamp":"2025-10-13T23:25:43.442Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.442Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.442Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.442Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.444Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
{"@timestamp":"2025-10-13T23:25:43.603Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":565,"key":"[REDACTED]","chartType":"progress-bar","cachedAt":"2025-10-13T23:22:10.855Z","recordCount":1154,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.603Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":565,"requestingUserId":"[UUID]","chartType":"progress-bar","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:22:10.855Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.604Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":415,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.605Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhdad_9w9aqofc","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":567,"userId":"[UUID]","statusCode":200,"totalDuration":567,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.605Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":367,"type":"api","identifier":"::1","current":21,"remaining":179,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.605Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":367,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.605Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":367,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.606Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":318,"type":"api","identifier":"::1","current":22,"remaining":178,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.606Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":317,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.606Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":318,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.606Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":284,"type":"api","identifier":"::1","current":23,"remaining":177,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.606Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":284,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.606Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":284,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.606Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"type":"api","identifier":"::1","current":24,"remaining":176,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.606Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.606Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.607Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"type":"api","identifier":"::1","current":25,"remaining":175,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.607Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.607Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1709ms
{"@timestamp":"2025-10-13T23:25:43.642Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":404,"type":"api","identifier":"::1","current":26,"remaining":174,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.642Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":404,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.643Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":405,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.644Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":356,"type":"api","identifier":"::1","current":27,"remaining":173,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.644Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":356,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.644Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":356,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.645Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":323,"type":"api","identifier":"::1","current":28,"remaining":172,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.645Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":323,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.645Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":323,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.646Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"type":"api","identifier":"::1","current":29,"remaining":171,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.646Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.646Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.647Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"type":"api","identifier":"::1","current":30,"remaining":170,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.647Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.647Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.716Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":478,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.717Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.717Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.717Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":479,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.717Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.718Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":480,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.718Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.718Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":481,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.719Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":481,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.719Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":481,"requestingUserId":"[UUID]","currentOrganizationId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.720Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":482,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"stacked-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.721Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":483,"chartType":"stacked-bar","dataSourceId":3,"hash":"55dc91641314","cacheKey":"[REDACTED]","configSize":190,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.721Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":433,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.722Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.722Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":116,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.722Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":434,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.723Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.723Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":435,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.723Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.724Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":436,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.724Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":436,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.724Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":436,"requestingUserId":"[UUID]","currentOrganizationId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.726Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":438,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"horizontal-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.726Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":438,"chartType":"horizontal-bar","dataSourceId":1,"hash":"00fe5b41e88f","cacheKey":"[REDACTED]","configSize":175,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.727Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":405,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.728Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":82,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.728Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":122,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.728Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":406,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.728Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.729Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":407,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.729Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.729Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":407,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.730Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":408,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."organization_id" in ($2) and "organizations"."is_active" = $3) order by "organizations"."created_at" desc -- params: [true, "d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
{"@timestamp":"2025-10-13T23:25:43.731Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.732Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":85,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.732Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.732Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":291,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.733Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.733Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":292,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.733Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.734Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.734Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.736Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":null,"advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
{"@timestamp":"2025-10-13T23:25:43.737Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.738Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":90,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.738Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.738Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.738Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.738Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"userId":"[UUID]","organizationId":"[UUID]","roleCount":1,"permissionCount":7,"isSuperAdmin":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.739Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.739Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.739Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.739Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":null,"advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
{"@timestamp":"2025-10-13T23:25:43.759Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":521,"key":"[REDACTED]","chartType":"stacked-bar","cachedAt":"2025-10-13T23:23:11.578Z","recordCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.759Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":521,"requestingUserId":"[UUID]","chartType":"stacked-bar","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:23:11.578Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.760Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":41,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.760Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprheb4_07oe9ob9","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":522,"userId":"[UUID]","statusCode":200,"totalDuration":522,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 541ms
{"@timestamp":"2025-10-13T23:25:43.761Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":473,"key":"[REDACTED]","chartType":"horizontal-bar","cachedAt":"2025-10-13T23:23:11.504Z","recordCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.761Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":473,"requestingUserId":"[UUID]","chartType":"horizontal-bar","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:23:11.504Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.762Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:25:43.762Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhecp_tz2988s3","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":474,"userId":"[UUID]","statusCode":200,"totalDuration":474,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 488ms
{"@timestamp":"2025-10-13T23:25:43.762Z","level":"INFO","message":"organizations list query completed - returned 1 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","organizationId":"[UUID]","isSuperAdmin":false,"filters":{"is_active":true},"filterCount":1,"results":{"returned":1,"active":1,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":32,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.762Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:25:43.762Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhedm_apt6gwdx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":440,"userId":"[UUID]","statusCode":200,"totalDuration":440,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 456ms
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
{"@timestamp":"2025-10-13T23:25:43.767Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":326,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-13T23:25:43.767Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":325,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-13T23:25:43.769Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.771Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":329,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE "date_value" >= $1 AND "date_value" <= $2 LIMIT 1000 -- params: ["2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-13T23:25:43.772Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":6,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:43.772Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE "date_value" >= $1 AND "date_value" <= $2 LIMIT 1000 -- params: ["2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-13T23:25:44.683Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":948,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:44.685Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":950,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:44.686Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprhdao_hll559e6","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1245,"userId":"[UUID]","statusCode":200,"totalDuration":1245,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?start_date=2025-01-01&end_date=2025-10-06&practice=114&limit=1000&_t=1760397941872 200 in 2775ms
{"@timestamp":"2025-10-13T23:25:44.690Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":951,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:44.691Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":951,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:25:44.691Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgprheei_91zf9pvc","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1249,"userId":"[UUID]","statusCode":200,"totalDuration":1249,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?start_date=2025-01-01&end_date=2025-10-06&practice=114&limit=1000&_t=1760397941877 200 in 1355ms