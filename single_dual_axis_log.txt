 ‚úì Starting...
 ‚úì Ready in 1519ms
 ‚úì Compiled /middleware in 305ms (407 modules)
üåê MIDDLEWARE: Processing request for: /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 ‚óã Compiling /dashboard/view/[dashboardId] ...
 ‚úì Compiled /dashboard/view/[dashboardId] in 2.1s (2148 modules)
 GET /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63 200 in 2876ms
 ‚óã Compiling /api/admin/analytics/dashboards/[dashboardId] ...
 ‚úì Compiled /api/admin/analytics/dashboards/[dashboardId] in 1606ms (2592 modules)
{"@timestamp":"2025-10-12T10:38:15.993Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-12T10:38:16.039Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.039Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
üåê MIDDLEWARE: Processing request for: /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63 200 in 83ms
{"@timestamp":"2025-10-12T10:38:16.207Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-12T10:38:16.246Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-12T10:38:16.278Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":239,"type":"api","identifier":"::1","current":2,"remaining":198,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.279Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":240,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.279Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":240,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.314Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":1,"remaining":199,"limit":200}
{"@timestamp":"2025-10-12T10:38:16.314Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
üîê AUTH: Using access token from httpOnly cookie
{"@timestamp":"2025-10-12T10:38:16.316Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":277,"type":"api","identifier":"::1","current":3,"remaining":197,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.316Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":277,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.316Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":277,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cUGBkqj9yocWMJh19B0Ex", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cUGBkqj9yocWMJh19B0Ex", 1]
{"@timestamp":"2025-10-12T10:38:16.370Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"mirq91tbHGHNYKhiM403kEto-nD59VHa","tokenSource":"[REDACTED]","validationDuration":55}
üîê AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-12T10:38:16.391Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.391Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.389Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
{"@timestamp":"2025-10-12T10:38:16.575Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":256,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":89,"fromRedis":true}
{"@timestamp":"2025-10-12T10:38:16.575Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"mirq91tbHGHNYKhiM403kEto-nD59VHa","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":89,"duration":261}
{"@timestamp":"2025-10-12T10:38:16.576Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-12T10:38:16.576Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":262,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":90}
{"@timestamp":"2025-10-12T10:38:16.576Z","level":"INFO","message":"user context retrieved successfully from JWT token","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"GET","operation":"get_user_context","userId":"[UUID]","email":"[REDACTED]","rbac":{"roles":1,"permissions":89,"isSuperAdmin":true,"orgAdminFor":0},"organizations":{"direct":0,"accessible":0,"current":null},"duration":584,"slow":false,"component":"auth","cached":true}
 GET /api/auth/me 200 in 2417ms
{"@timestamp":"2025-10-12T10:38:16.579Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":540,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
{"@timestamp":"2025-10-12T10:38:16.580Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"type":"api","identifier":"::1","current":4,"remaining":196,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.580Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.580Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-12T10:38:16.609Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":570,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.609Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":293,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.609Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.609Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":570,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.609Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.609Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":570,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.610Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.610Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":571,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.610Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":571,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
{"@timestamp":"2025-10-12T10:38:16.617Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":226,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.617Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":226,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.617Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":226,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-12T10:38:16.625Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"published":7,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":27,"averageChartsPerDashboard":4,"page":1,"pageSize":7},"duration":15,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.625Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":15,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-12T10:38:16.626Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnkmjyg_rbb5ah8w","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":587,"userId":"[UUID]","statusCode":200,"totalDuration":586,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 2473ms
{"@timestamp":"2025-10-12T10:38:16.732Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.733Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":116,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.734Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.734Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":343,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.734Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.734Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":343,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.735Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.735Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.735Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:238:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-12T10:38:16.804Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":413,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:238:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-12T10:38:16.860Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":125,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.860Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-12T10:38:16.861Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnkmjyg_c3mvuuwy","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":470,"userId":"[UUID]","statusCode":200,"totalDuration":470,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
 GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 200 in 2701ms
 ‚óã Compiling /api/admin/analytics/charts ...
 ‚úì Compiled /api/admin/analytics/charts in 692ms (2598 modules)
{"@timestamp":"2025-10-12T10:38:17.452Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.452Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.453Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.453Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.468Z","level":"INFO","message":"GET /api/csrf - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:38:17.468Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/csrf","requiredPermissions":[],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:38:17.576Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.576Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":124,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.577Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.577Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":124,"type":"api","identifier":"::1","current":7,"remaining":193,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.577Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":124,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.577Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":124,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.577Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"type":"api","identifier":"::1","current":8,"remaining":192,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:38:17.577Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:38:17.577Z","level":"DEBUG","message":"Route marked as public","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":80,"function":"eval","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"reason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:38:17.578Z","level":"DEBUG","message":"Public route - skipping user context and RBAC checks","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":102,"function":"eval","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"endpoint":"/api/csrf","publicReason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cUGBkqj9yocWMJh19B0Ex", 1]
{"@timestamp":"2025-10-12T10:38:17.583Z","level":"INFO","message":"CSRF token request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"getCSRFTokenHandler","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":115,"isAuthenticated":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:38:17.585Z","level":"INFO","message":"Authenticated CSRF token generated","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"getCSRFTokenHandler","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:38:17.585Z","level":"INFO","message":"CSRF token issued successfully","service":"bendcare-os","env":"development","file":"route.ts","line":82,"function":"getCSRFTokenHandler","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"tokenType":"[REDACTED]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:38:17.585Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":109,"function":"eval","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":7,"statusCode":200,"isPublic":true,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-12T10:38:17.585Z","level":"INFO","message":"Public route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":115,"function":"eval","correlationId":"cor_mgnkmlub_m4d663kv","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"endpoint":"/api/csrf","statusCode":200,"totalDuration":117,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
 GET /api/csrf 200 in 991ms
{"@timestamp":"2025-10-12T10:38:17.609Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"type":"api","identifier":"::1","current":9,"remaining":191,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.610Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.610Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.611Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"type":"api","identifier":"::1","current":10,"remaining":190,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.611Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.611Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.681Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":230,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-12T10:38:17.700Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":249,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.700Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.700Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":90,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.701Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":90,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.701Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.701Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.701Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.701Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.703Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.703Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.703Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.703Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.703Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.703Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":253,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.704Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":253,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.705Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.705Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.705Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-12T10:38:17.714Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"stacked-bar":2,"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":4},"activeCount":13,"inactiveCount":0},"duration":9,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.716Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":11,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.716Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnkmm4n_7w0col3y","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"userId":"[UUID]","statusCode":200,"totalDuration":263,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 749ms
{"@timestamp":"2025-10-12T10:38:17.720Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"stacked-bar":2,"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":4},"activeCount":13,"inactiveCount":0},"duration":16,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.721Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":17,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-12T10:38:17.721Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnkmm4n_2yiyzd5w","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":270,"userId":"[UUID]","statusCode":200,"totalDuration":269,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 752ms
{"@timestamp":"2025-10-12T10:38:17.754Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":2,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-12T10:38:17.755Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
 ‚úì Compiled /api/admin/analytics/chart-data/universal in 403ms (2624 modules)
{"@timestamp":"2025-10-12T10:38:18.307Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-12T10:38:18.308Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-12T10:38:18.308Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-12T10:38:18.308Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-12T10:38:18.308Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-12T10:38:18.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-12T10:38:18.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-12T10:38:18.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-12T10:38:18.309Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-12T10:38:18.314Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.314Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.314Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.314Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.347Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":11,"remaining":189,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.347Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.347Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.349Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":12,"remaining":188,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.349Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.349Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.381Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":13,"remaining":187,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.381Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.382Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.385Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":14,"remaining":186,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.385Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.385Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.450Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-12T10:38:18.457Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.457Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":111,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.458Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.459Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.459Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.459Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.459Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.459Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.459Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.459Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.459Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":98,"function":"universalChartDataHandler","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.461Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"dual-axis","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.461Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":120,"function":"universalChartDataHandler","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"dual-axis","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.461Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.461Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-12T10:38:18.464Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.464Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.464Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.464Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.464Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.465Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":45,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.465Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.465Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cancellations","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.465Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.465Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cash Transfer","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.466Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.466Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.466Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.466Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.466Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.466Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":45,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.466Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.466Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cancellations","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.466Z","level":"INFO","message":"Fetching chart data","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.467Z","level":"INFO","message":"Building analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":219,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-09","limit":10000,"measure":"Cash Transfer","frequency":"Monthly"},"userId":"[UUID]","contextPractices":[],"contextProviders":[],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:18.597Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":283,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
üîç EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cancellations', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:38:18.631Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":317,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
üîç EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:38:18.634Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":321,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
üîç EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cancellations', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
{"@timestamp":"2025-10-12T10:38:18.636Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":323,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
üîç EXECUTING SQL: {
  sql: '\n' +
    '        SELECT id, practice_uid, practice, practice_primary, provider_uid, provider_name, entity_type, entity_id, entity_name, measure, measure_type as measure_type, time_period as frequency, date_value as date_index, display_date, numeric_value as measure_value, text_value, metadata, created_at\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        ORDER BY date_value ASC\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
‚úÖ QUERY RESULT: {
  duration: '798ms',
  rowCount: 48,
  sampleData: {
    id: 21626,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 420,
    provider_name: 'Ray, Madina',
    entity_type: 'Provider',
    entity_id: '420',
    entity_name: 'Ray, Madina',
    measure: 'Cancellations',
    measure_type: 'count',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '7.00',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.224414+00'
  }
}
üîç EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cancellations', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
‚úÖ QUERY RESULT: {
  duration: '766ms',
  rowCount: 46,
  sampleData: {
    id: 22824,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 145,
    provider_name: 'Busch-Feuer, Rachael',
    entity_type: 'Provider',
    entity_id: '145',
    entity_name: 'Busch-Feuer, Rachael',
    measure: 'Cash Transfer',
    measure_type: 'currency',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '143781.79',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.748293+00'
  }
}
üîç EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
‚úÖ QUERY RESULT: {
  duration: '769ms',
  rowCount: 46,
  sampleData: {
    id: 22824,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 145,
    provider_name: 'Busch-Feuer, Rachael',
    entity_type: 'Provider',
    entity_id: '145',
    entity_name: 'Busch-Feuer, Rachael',
    measure: 'Cash Transfer',
    measure_type: 'currency',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '143781.79',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.748293+00'
  }
}
üîç EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cash Transfer', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
‚úÖ QUERY RESULT: {
  duration: '768ms',
  rowCount: 48,
  sampleData: {
    id: 21626,
    practice_uid: 114,
    practice: 'Family Arthritis Center',
    practice_primary: 'Busch, Howard',
    provider_uid: 420,
    provider_name: 'Ray, Madina',
    entity_type: 'Provider',
    entity_id: '420',
    entity_name: 'Ray, Madina',
    measure: 'Cancellations',
    measure_type: 'count',
    frequency: 'Monthly',
    date_index: '2025-01-31',
    display_date: 'January 2025',
    measure_value: '7.00',
    text_value: null,
    metadata: null,
    created_at: '2025-10-08 13:01:26.224414+00'
  }
}
üîç EXECUTING SQL: {
  sql: '\n' +
    '        SELECT\n' +
    '          CASE\n' +
    "            WHEN measure_type = 'currency' THEN SUM(numeric_value)::text\n" +
    '            ELSE COUNT(*)::text\n' +
    '          END as total,\n' +
    '          measure_type as measure_type\n' +
    '        FROM ih.agg_chart_data\n' +
    '        WHERE measure = $1 AND time_period = $2 AND date_value >= $3 AND date_value <= $4\n' +
    '        GROUP BY measure_type\n' +
    '      ',
  parameters: [ 'Cancellations', 'Monthly', '2025-01-01', '2025-10-09' ],
  paramCount: 4
}
‚úÖ QUERY RESULT: {
  duration: '63ms',
  rowCount: 1,
  sampleData: { total: '48', measure_type: 'count' }
}
{"@timestamp":"2025-10-12T10:38:19.465Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1151,"queryTime":1000,"resultCount":48,"totalCount":48,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.465Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1151,"chartType":"dual-axis","recordCount":48,"queryTimeMs":1000,"fetchDuration":1000,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
‚úÖ QUERY RESULT: {
  duration: '63ms',
  rowCount: 1,
  sampleData: { total: '5289376.44', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:38:19.465Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1152,"queryTime":998,"resultCount":46,"totalCount":5289376,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.465Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1152,"chartType":"dual-axis","recordCount":46,"queryTimeMs":998,"fetchDuration":999,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
‚úÖ QUERY RESULT: {
  duration: '62ms',
  rowCount: 1,
  sampleData: { total: '5289376.44', measure_type: 'currency' }
}
{"@timestamp":"2025-10-12T10:38:19.465Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1151,"queryTime":1000,"resultCount":46,"totalCount":5289376,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.465Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1151,"chartType":"dual-axis","recordCount":46,"queryTimeMs":1000,"fetchDuration":1000,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.466Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":66,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":1001,"parallelFetch":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.466Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1152,"chartType":"dual-axis","recordCount":94,"fetchDuration":1002,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.466Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":193,"function":"ComboChartHandler.transform","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.466Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1152,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.466Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1152,"chartType":"dual-axis","totalDuration":1005,"fetchDuration":1002,"transformDuration":0,"recordCount":94,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.467Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1153,"requestingUserId":"[UUID]","chartType":"dual-axis","recordCount":94,"orchestratorDuration":1006,"queryTimeMs":1002,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.467Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"dual-axis","duration":1008,"recordCount":94,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.467Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1008,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.467Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnkmmqc_banapedj","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1153,"userId":"[UUID]","statusCode":200,"totalDuration":1153,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1711ms
‚úÖ QUERY RESULT: {
  duration: '65ms',
  rowCount: 1,
  sampleData: { total: '48', measure_type: 'count' }
}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Analytics query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":355,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1156,"queryTime":1003,"resultCount":48,"totalCount":48,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":50,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1156,"chartType":"dual-axis","recordCount":48,"queryTimeMs":1003,"fetchDuration":1003,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":66,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":1003,"parallelFetch":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1156,"chartType":"dual-axis","recordCount":94,"fetchDuration":1003,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":193,"function":"ComboChartHandler.transform","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1156,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1156,"chartType":"dual-axis","totalDuration":1008,"fetchDuration":1003,"transformDuration":0,"recordCount":94,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"route.ts","line":131,"function":"universalChartDataHandler","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1156,"requestingUserId":"[UUID]","chartType":"dual-axis","recordCount":94,"orchestratorDuration":1008,"queryTimeMs":1003,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Universal chart data request completed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":160,"function":"universalChartDataHandler","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","chartType":"dual-axis","duration":1010,"recordCount":94,"cacheHit":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1010,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-12T10:38:19.469Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgnkmmqc_6nzdufon","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1156,"userId":"[UUID]","statusCode":200,"totalDuration":1156,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1713ms
