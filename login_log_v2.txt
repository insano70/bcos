 ✓ Starting...
 ✓ Ready in 1569ms
 ✓ Compiled /middleware in 318ms (408 modules)
🌐 MIDDLEWARE: Global rate limit check: 199 remaining
 ○ Compiling /api/auth/oidc/login ...
 ✓ Compiled /api/auth/oidc/login in 871ms (719 modules)
{"@timestamp":"2025-10-10T14:34:52.640Z","level":"INFO","message":"GET /api/auth/oidc/login - OIDC login initiated","service":"bendcare-os","env":"development","file":"route.ts","line":55,"function":"oidcLoginHandler","correlationId":"cor_mgky75ez_djjlkchz","component":"api","method":"GET","path":"/api/auth/oidc/login","request":{}}
{"@timestamp":"2025-10-10T14:34:52.642Z","level":"INFO","message":"OIDC login initiation started","service":"bendcare-os","env":"development","file":"route.ts","line":75,"function":"oidcLoginHandler","requestId":"unknown","ipAddress":"[REDACTED]","returnUrl":"/dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43","fingerprint":"13b197eeb712468a..."}
{"@timestamp":"2025-10-10T14:34:52.642Z","level":"DEBUG","message":"OIDC configuration loaded","service":"bendcare-os","env":"development","file":"config.ts","line":48,"function":"buildOIDCConfig","tenantId":"[UUID]","clientId":"44ae5aae...","redirectUri":"http://localhost:4001/api/auth/oidc/callback","scopes":["openid","profile","email"],"allowedDomains":["aara.care","sparc.care","illumination.health","bendcare.com","oasis.care"],"strictFingerprint":false}
{"@timestamp":"2025-10-10T14:34:52.642Z","level":"INFO","message":"Fetching OIDC discovery document","service":"bendcare-os","env":"development","file":"client.ts","line":65,"function":"OIDCClient.initialize","tenantId":"[UUID]"}
{"@timestamp":"2025-10-10T14:34:52.987Z","level":"INFO","message":"OIDC configuration discovered successfully","service":"bendcare-os","env":"development","file":"client.ts","line":72,"function":"OIDCClient.initialize","issuer":"https://login.microsoftonline.com/e0268fe2-3176-4ac0-8cef-5f1925dd490e/v2.0"}
{"@timestamp":"2025-10-10T14:34:52.990Z","level":"DEBUG","message":"Authorization URL created","service":"bendcare-os","env":"development","file":"client.ts","line":120,"function":"OIDCClient.createAuthUrl","state":"3-mw0mXR...","nonce":"QKnYNZrw...","scopes":["openid","profile","email"]}
Query: insert into "oidc_states" ("state", "nonce", "user_fingerprint", "is_used", "created_at", "expires_at", "used_at") values ($1, $2, $3, $4, default, $5, default) -- params: ["3-mw0mXRG8pKa3WJ1RuoUFCx4AhtJGJXcKE5vd6hEUY", "QKnYNZrw16Cs0vDfhH0LLHjWoNx0keIfSFBdMLRAOgQ", "13b197eeb712468ac5b56dbf7be43c43", false, "2025-10-10T14:40:22.991Z"]
{"@timestamp":"2025-10-10T14:34:53.011Z","level":"DEBUG","message":"State token registered in database","service":"bendcare-os","env":"development","file":"database-state-manager.ts","line":72,"function":"DatabaseStateManager.registerState","state":"3-mw0mXR...","expiresAt":"2025-10-10T14:40:22.991Z"}
{"@timestamp":"2025-10-10T14:34:53.012Z","level":"DEBUG","message":"OIDC state token registered","service":"bendcare-os","env":"development","file":"route.ts","line":88,"function":"oidcLoginHandler","state":"3-mw0mXR..."}
{"@timestamp":"2025-10-10T14:34:53.018Z","level":"INFO","message":"OIDC login audit","service":"bendcare-os","env":"development","file":"route.ts","line":118,"function":"oidcLoginHandler","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","returnUrl":"/dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43"}
{"@timestamp":"2025-10-10T14:34:53.019Z","level":"INFO","message":"OIDC login redirect","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"oidcLoginHandler","duration":380,"authEndpoint":"https://login.microsoftonline.com/e0268fe2-3176-4ac0-8cef-5f1925dd490e/oauth2/v2.0/authorize"}
 GET /api/auth/oidc/login?returnUrl=%2Fdashboard%2Fview%2F30d9570d-5a7f-4553-a72b-0a54430daa43 307 in 1455ms
🌐 MIDDLEWARE: Global rate limit check: 198 remaining
 ✓ Compiled /api/auth/oidc/callback in 474ms (722 modules)
{"@timestamp":"2025-10-10T14:34:54.436Z","level":"INFO","message":"GET /api/auth/oidc/callback - OIDC callback received","service":"bendcare-os","env":"development","file":"route.ts","line":70,"function":"oidcCallbackHandler","correlationId":"cor_mgky774k_js19b7b1","component":"api","method":"GET","path":"/api/auth/oidc/callback","request":{}}
Query: select "state", "nonce", "user_fingerprint", "is_used", "created_at", "expires_at", "used_at" from "oidc_states" where ("oidc_states"."state" = $1 and "oidc_states"."expires_at" > $2) for update -- params: ["3-mw0mXRG8pKa3WJ1RuoUFCx4AhtJGJXcKE5vd6hEUY", "2025-10-10T14:34:54.458Z"]
Query: update "oidc_states" set "is_used" = $1, "used_at" = $2 where "oidc_states"."state" = $3 -- params: [true, "2025-10-10T14:34:54.466Z", "3-mw0mXRG8pKa3WJ1RuoUFCx4AhtJGJXcKE5vd6hEUY"]
{"@timestamp":"2025-10-10T14:34:54.467Z","level":"INFO","message":"State token validated and marked as used","service":"bendcare-os","env":"development","file":"database-state-manager.ts","line":135,"function":"eval","state":"3-mw0mXR...","age":1459}
{"@timestamp":"2025-10-10T14:34:54.469Z","level":"DEBUG","message":"OIDC configuration loaded","service":"bendcare-os","env":"development","file":"config.ts","line":48,"function":"buildOIDCConfig","tenantId":"[UUID]","clientId":"44ae5aae...","redirectUri":"http://localhost:4001/api/auth/oidc/callback","scopes":["openid","profile","email"],"allowedDomains":["aara.care","sparc.care","illumination.health","bendcare.com","oasis.care"],"strictFingerprint":false}
{"@timestamp":"2025-10-10T14:34:54.469Z","level":"INFO","message":"Fetching OIDC discovery document","service":"bendcare-os","env":"development","file":"client.ts","line":65,"function":"OIDCClient.initialize","tenantId":"[UUID]"}
{"@timestamp":"2025-10-10T14:34:54.562Z","level":"INFO","message":"OIDC configuration discovered successfully","service":"bendcare-os","env":"development","file":"client.ts","line":72,"function":"OIDCClient.initialize","issuer":"https://login.microsoftonline.com/e0268fe2-3176-4ac0-8cef-5f1925dd490e/v2.0"}
{"@timestamp":"2025-10-10T14:34:54.839Z","level":"DEBUG","message":"Token exchange successful","service":"bendcare-os","env":"development","file":"client.ts","line":183,"function":"OIDCClient.handleCallback","hasAccessToken":"[REDACTED]","hasIdToken":"[REDACTED]","hasRefreshToken":"[REDACTED]"}
{"@timestamp":"2025-10-10T14:34:54.839Z","level":"INFO","message":"ID token validation successful","service":"bendcare-os","env":"development","file":"client.ts","line":310,"function":"OIDCClient.handleCallback","email":"[REDACTED]","iat":"2025-10-10T14:29:54.000Z","exp":"2025-10-10T15:34:54.000Z","tokenAge":"[REDACTED]"}
{"@timestamp":"2025-10-10T14:34:54.839Z","level":"INFO","message":"OIDC token exchange successful","service":"bendcare-os","env":"development","file":"route.ts","line":244,"function":"oidcCallbackHandler","email":"[REDACTED]","emailVerified":"[REDACTED]"}
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."email" = $1 limit $2 -- params: ["pj@illumination.health", 1]
Query: insert into "refresh_tokens" ("token_id", "user_id", "token_hash", "device_fingerprint", "ip_address", "user_agent", "remember_me", "issued_at", "expires_at", "last_used", "is_active", "revoked_at", "revoked_reason", "rotation_count", "created_at") values ($1, $2, $3, $4, $5, $6, $7, default, $8, default, default, default, default, $9, default) -- params: ["bGP_F06UqJSAzNB8M3jJXxeLZ3E3dpRm", "cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", "42f7441af346b4785ae56f9f074a850f22fa798ec5110db28c20afa318ab1910", "13b197eeb712468ac5b56dbf7be43c43", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", false, "2025-10-17T14:34:54.843Z", 0]
Query: insert into "user_sessions" ("session_id", "user_id", "refresh_token_id", "device_fingerprint", "device_name", "ip_address", "user_agent", "remember_me", "is_active", "last_activity", "created_at", "ended_at", "end_reason") values ($1, $2, $3, $4, $5, $6, $7, $8, default, default, default, default, default) -- params: ["0VtJb--fegZHL9AJtD3GOWYNO-8T43W_", "cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", "bGP_F06UqJSAzNB8M3jJXxeLZ3E3dpRm", "13b197eeb712468ac5b56dbf7be43c43", "Chrome Browser", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", false]
Query: insert into "login_attempts" ("attempt_id", "email", "user_id", "ip_address", "user_agent", "device_fingerprint", "success", "failure_reason", "remember_me_requested", "session_id", "attempted_at") values ($1, $2, $3, $4, $5, $6, $7, default, $8, $9, default) -- params: ["QAMDcb6iLeeQYDBlVMJnX", "pj@illumination.health", "cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "13b197eeb712468ac5b56dbf7be43c43", true, false, "0VtJb--fegZHL9AJtD3GOWYNO-8T43W_"]
{"@timestamp":"2025-10-10T14:34:54.852Z","level":"INFO","message":"Auth: login","service":"bendcare-os","env":"development","file":"audit.ts","line":17,"function":"AuditLoggerService.logAuth","component":"auth","action":"login","success":true,"userId":"[UUID]","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","email":"[REDACTED]","authMethod":"oidc","sessionId":"0VtJb--fegZHL9AJtD3GOWYNO-8T43W_","refreshTokenId":"[REDACTED]","rememberMe":false,"deviceFingerprint":"13b197eeb712468ac5b56dbf7be43c43","deviceName":"Chrome Browser"}
{"@timestamp":"2025-10-10T14:34:54.853Z","level":"INFO","message":"Audit event processed","service":"bendcare-os","env":"development","file":"audit.ts","line":25,"function":"AuditLoggerService.logAuth","eventType":"auth","action":"login","severity":"medium","complianceFramework":"HIPAA","retentionPeriod":"7_years"}
Query: insert into "audit_logs" ("audit_log_id", "event_type", "action", "user_id", "ip_address", "user_agent", "resource_type", "resource_id", "old_values", "new_values", "metadata", "severity", "created_at") values ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) -- params: ["d0QIGXUsuOb8iX1dcX-WA", "auth", "login", "cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", null, null, null, null, "{\"email\":\"pj@illumination.health\",\"authMethod\":\"oidc\",\"sessionId\":\"0VtJb--fegZHL9AJtD3GOWYNO-8T43W_\",\"refreshTokenId\":\"bGP_F06UqJSAzNB8M3jJXxeLZ3E3dpRm\",\"rememberMe\":false,\"deviceFingerprint\":\"13b197eeb712468ac5b56dbf7be43c43\",\"deviceName\":\"Chrome Browser\"}", "medium", "2025-10-10T14:34:54.853Z"]
{"@timestamp":"2025-10-10T14:34:54.855Z","level":"DEBUG","message":"Audit log created","service":"bendcare-os","env":"development","file":"audit.ts","line":145,"function":"AuditLoggerService.log","eventType":"auth","action":"login","userId":"[UUID]","severity":"medium","operation":"createAuditLog","component":"audit-system","feature":"compliance-logging"}
{"@timestamp":"2025-10-10T14:34:54.855Z","level":"INFO","message":"OIDC callback successful - user authenticated","service":"bendcare-os","env":"development","file":"route.ts","line":348,"function":"oidcCallbackHandler","operation":"oidc_callback","success":true,"userId":"[UUID]","email":"[REDACTED]","authMethod":"oidc","sessionId":"0VtJb--fegZHL9AJtD3GOWYNO-8T43W_","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","deviceName":"Chrome Browser","deviceFingerprint":"13b197ee","securityValidations":{"sessionDecryption":"passed","stateCsrfProtection":"passed","stateReplayPrevention":"passed","deviceFingerprintCheck":"passed","pkceValidation":"passed","emailVerification":"[REDACTED]","emailDomain":"[REDACTED]","profileSanitization":"passed","userProvisioning":"existing","userActiveStatus":"active"},"duration":420,"component":"auth","severity":"info"}
{"@timestamp":"2025-10-10T14:34:54.856Z","level":"INFO","message":"OIDC callback redirect","service":"bendcare-os","env":"development","file":"route.ts","line":405,"function":"oidcCallbackHandler","requestedReturnUrl":"/dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43","resolvedReturnUrl":"/dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43","baseUrl":"http://localhost:4001/api/auth/oidc/callback?code=1.ASkA4o8m4HYxwEqM718ZJd1JDq5arkSCS7dDreiVxdfAXZUpAE0pAA.AgABBAIAAABlMNzVhAPUTrARzfQjWPtKAwDs_wUA9P_VlWMVI-dxd9z0sZJBrgYdFBRzEW52PSg22nE0nQ05sGt_NoFOYZLxLIg_C2VpySnpvR-zYNGHrS7EPvw2yMA3bRhkvwU4QZ1ToLdzBwrJkvMfaZta-7XRbSBiLGk9Orvv15zh1qdm6lAtRV-gTsKb1T55Zi-JM8nmWBoc_AzcwIIGK-W-OPlujaCdVgKtyvUJIlNQvNtHMhYg7LfjaJdwMe1ipsIdyGrOTBtvaFooLov5SOF6DhTm_7zySzHK8SmMjR6JEYy1s5fvdQaL5PGkn1DMLs-AoPsqWsgr3egRSoSH4rEQmJS7jjZ_NYGp7WPiMDNOThV4r2fJcBaM9VBgTQ1Z1HdaJ-TdBsDCwCqOv_EPhQ4u03X77pQBTX36ow7702G6XNRRAYFJgbfASk5JK8aLql-FXaX7kLLBYp8zNKzvO8OKNEH2kCqET7P1atM3E2Itu8k0Z67x6ADciRtNpTGLT4frBZvkcxAN7zsNXVp_val68tSvu1p7OG80aX-LgJKLpyZ7x8NlAyc46m3Db9CRO7fsd-KGrvtTxzJdoe_7emJwYjHaz5Ya2qgFCGgK7asAG11LiS3lBpdsGFZqO9ohYF986IHj54x3phPgBaRgLaMzQcqxm14vQOwN_wjQMISGfJSH3FMeO75gYP0qs4tCgAUkjQej41GjAIJf6A2MrOrPTBd15L0hvWV60VL5aOw01shROggKZ_o1Ev3HEpIBBpAnuuUXUbl8JX6IU68vvWJOsFJ62X_MzVCceBThsNVddgffvQsXdVdgBsdQB1WQL8M9yJJ0qiFfG2VWMuhyWGFbmbMC3K1gVLoXvCnM-PoPeWPK_Me3LBIUdK3vF8Aj-CrDGjnG-YGtSw9CkknyzeO6efr7X1ULX-eqs1flrVzbdqZ-ZSt3ztPkjOQNbiiH&state=3-mw0mXRG8pKa3WJ1RuoUFCx4AhtJGJXcKE5vd6hEUY&session_state=008cb789-1185-0cdd-3831-9608c634a050","finalRedirect":"http://localhost:4001/authenticating?returnUrl=%2Fdashboard%2Fview%2F30d9570d-5a7f-4553-a72b-0a54430daa43"}
 GET /api/auth/oidc/callback?code=1.ASkA4o8m4HYxwEqM718ZJd1JDq5arkSCS7dDreiVxdfAXZUpAE0pAA.AgABBAIAAABlMNzVhAPUTrARzfQjWPtKAwDs_wUA9P_VlWMVI-dxd9z0sZJBrgYdFBRzEW52PSg22nE0nQ05sGt_NoFOYZLxLIg_C2VpySnpvR-zYNGHrS7EPvw2yMA3bRhkvwU4QZ1ToLdzBwrJkvMfaZta-7XRbSBiLGk9Orvv15zh1qdm6lAtRV-gTsKb1T55Zi-JM8nmWBoc_AzcwIIGK-W-OPlujaCdVgKtyvUJIlNQvNtHMhYg7LfjaJdwMe1ipsIdyGrOTBtvaFooLov5SOF6DhTm_7zySzHK8SmMjR6JEYy1s5fvdQaL5PGkn1DMLs-AoPsqWsgr3egRSoSH4rEQmJS7jjZ_NYGp7WPiMDNOThV4r2fJcBaM9VBgTQ1Z1HdaJ-TdBsDCwCqOv_EPhQ4u03X77pQBTX36ow7702G6XNRRAYFJgbfASk5JK8aLql-FXaX7kLLBYp8zNKzvO8OKNEH2kCqET7P1atM3E2Itu8k0Z67x6ADciRtNpTGLT4frBZvkcxAN7zsNXVp_val68tSvu1p7OG80aX-LgJKLpyZ7x8NlAyc46m3Db9CRO7fsd-KGrvtTxzJdoe_7emJwYjHaz5Ya2qgFCGgK7asAG11LiS3lBpdsGFZqO9ohYF986IHj54x3phPgBaRgLaMzQcqxm14vQOwN_wjQMISGfJSH3FMeO75gYP0qs4tCgAUkjQej41GjAIJf6A2MrOrPTBd15L0hvWV60VL5aOw01shROggKZ_o1Ev3HEpIBBpAnuuUXUbl8JX6IU68vvWJOsFJ62X_MzVCceBThsNVddgffvQsXdVdgBsdQB1WQL8M9yJJ0qiFfG2VWMuhyWGFbmbMC3K1gVLoXvCnM-PoPeWPK_Me3LBIUdK3vF8Aj-CrDGjnG-YGtSw9CkknyzeO6efr7X1ULX-eqs1flrVzbdqZ-ZSt3ztPkjOQNbiiH&state=3-mw0mXRG8pKa3WJ1RuoUFCx4AhtJGJXcKE5vd6hEUY&session_state=008cb789-1185-0cdd-3831-9608c634a050 307 in 1078ms
🌐 MIDDLEWARE: Global rate limit check: 197 remaining
🌐 MIDDLEWARE: Processing request for: /authenticating
🌐 MIDDLEWARE: Public path detected, allowing through: /authenticating
 ○ Compiling /authenticating ...
 ✓ Compiled /authenticating in 1122ms (1963 modules)
 GET /authenticating?returnUrl=%2Fdashboard%2Fview%2F30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 1455ms
🌐 MIDDLEWARE: Global rate limit check: 196 remaining
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1053ms (1970 modules)
{"@timestamp":"2025-10-10T14:34:58.132Z","level":"INFO","message":"GET /api/auth/me - User context request","service":"bendcare-os","env":"development","file":"route.ts","line":23,"function":"GET","correlationId":"cor_mgky79iz_8rkxflrc","component":"api","method":"GET","path":"/api/auth/me","request":{}}
{"@timestamp":"2025-10-10T14:34:58.133Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"route.ts","line":28,"function":"GET","duration":0}
{"@timestamp":"2025-10-10T14:34:58.133Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":99,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
🔐 AUTH: Using access token from httpOnly cookie
{"@timestamp":"2025-10-10T14:34:58.135Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis-client.ts","line":59,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"bcos-redis-dev","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-10T14:34:58.136Z","level":"ERROR","message":"Redis GET failed","service":"bendcare-os","env":"development","file":"redis-client.ts","line":232,"function":"redisGet","error":{"name":"Error","message":"Stream isn't writeable and enableOfflineQueue options is false","stack":["Error: Stream isn't writeable and enableOfflineQueue options is false","at EventEmitter.sendCommand (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/Redis.js:363:32)","at EventEmitter.eval [as get] (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/utils/Commander.js:90:25)","at redisGet (webpack-internal:///(rsc)/./lib/cache/redis-client.ts:213:36)","at isTokenBlacklisted (webpack-internal:///(rsc)/./lib/cache/token-cache.ts:41:81)","at validateAccessToken (webpack-internal:///(rsc)/./lib/auth/token-manager.ts:287:109)","at async requireJWTAuth (webpack-internal:///(rsc)/./lib/api/middleware/jwt-auth.ts:138:21)","at async GET (webpack-internal:///(rsc)/./app/api/auth/me/route.ts:33:25)","at async AppRouteRouteModule.do (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)","at async AppRouteRouteModule.handle (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)","at async responseGenerator (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)","at async AppRouteRouteModule.handleResponse (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)","at async handleResponse (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)","at async handler (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)","at async DevServer.renderToResponseWithComponentsImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1422:9)","at async DevServer.renderPageComponent (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1474:24)","at async DevServer.renderToResponseImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1514:32)","at async DevServer.pipeImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1025:25)","at async NextNodeServer.handleCatchallRenderRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/next-server.js:393:17)","at async DevServer.handleRequestImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:916:17)","at async /Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:399:20","at async Span.traceAsyncFn (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/trace/trace.js:157:20)","at async DevServer.handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:395:24)","at async invokeRender (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:240:21)","at async handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:437:24)","at async requestHandlerImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:485:13)","at async Server.requestListener (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/start-server.js:226:13)"]},"component":"redis","key":"[REDACTED]","operation":"GET"}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
🌐 MIDDLEWARE: Global rate limit check: 195 remaining
🌐 MIDDLEWARE: Processing request for: /authenticating
🌐 MIDDLEWARE: Public path detected, allowing through: /authenticating
 GET /authenticating?returnUrl=%2Fdashboard%2Fview%2F30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 79ms
{"@timestamp":"2025-10-10T14:34:58.227Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":152,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"0VtJb--fegZHL9AJtD3GOWYNO-8T43W_","tokenSource":"[REDACTED]","validationDuration":94}
🔐 AUTH: JWT cache miss, falling back to database query
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
{"@timestamp":"2025-10-10T14:34:58.240Z","level":"DEBUG","message":"Cache MISS: Role not found in cache","service":"bendcare-os","env":"development","file":"role-permission-cache.ts","line":17,"function":"RolePermissionCache.get","roleId":"[UUID]","cacheSize":0,"cachedRoleIds":[]}
{"@timestamp":"2025-10-10T14:34:58.240Z","level":"DEBUG","message":"Role permissions cache miss, querying database","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":42,"function":"getRolePermissions","roleId":"[UUID]","roleName":"super_admin","component":"rbac-cache"}
Query: select "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "role_permissions" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("role_permissions"."role_id" = $1 and "permissions"."is_active" = $2) -- params: ["7dcc0ee9-6d94-4bc7-84fe-ab674bb38c8b", true]
{"@timestamp":"2025-10-10T14:34:58.244Z","level":"DEBUG","message":"Cache SET: Role permissions cached","service":"bendcare-os","env":"development","file":"role-permission-cache.ts","line":58,"function":"RolePermissionCache.set","roleId":"[UUID]","roleName":"super_admin","permissionCount":89,"cacheSize":1,"version":1}
{"@timestamp":"2025-10-10T14:34:58.244Z","level":"DEBUG","message":"Cached user context loaded successfully","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":286,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"cacheStats":{"hits":0,"misses":1,"size":1,"lastCleared":1760106898123,"hitRate":0}}
{"@timestamp":"2025-10-10T14:34:58.244Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":188,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"0VtJb--fegZHL9AJtD3GOWYNO-8T43W_","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":89,"duration":111}
{"@timestamp":"2025-10-10T14:34:58.244Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":198,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-10T14:34:58.244Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":206,"function":"requireJWTAuth","duration":111,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":90}
{"@timestamp":"2025-10-10T14:34:58.244Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"route.ts","line":34,"function":"GET","duration":111}
{"@timestamp":"2025-10-10T14:34:58.245Z","level":"INFO","message":"User context retrieved successfully","service":"bendcare-os","env":"development","file":"route.ts","line":46,"function":"GET","userId":"[UUID]","roleCount":1,"permissionCount":89,"organizationCount":0,"duration":112}
 GET /api/auth/me 200 in 1353ms
{"@timestamp":"2025-10-10T14:34:58.258Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis-client.ts","line":90,"function":"EventEmitter.eval","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379}
🌐 MIDDLEWARE: Global rate limit check: 194 remaining
🌐 MIDDLEWARE: Global rate limit check: 193 remaining
🌐 MIDDLEWARE: Processing request for: /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
{"@timestamp":"2025-10-10T14:34:58.295Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis-client.ts","line":100,"function":"EventEmitter.eval","component":"redis"}
 ○ Compiling /dashboard/view/[dashboardId] ...
 ✓ Compiled /dashboard/view/[dashboardId] in 1651ms (2586 modules)
{"@timestamp":"2025-10-10T14:35:00.155Z","level":"INFO","message":"GET /api/csrf - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T14:35:00.155Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/csrf","requiredPermissions":[],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T14:35:00.155Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T14:35:00.155Z","level":"DEBUG","message":"Route marked as public","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"reason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T14:35:00.155Z","level":"DEBUG","message":"Public route - skipping user context and RBAC checks","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":96,"function":"eval","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/csrf","publicReason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
{"@timestamp":"2025-10-10T14:35:00.243Z","level":"INFO","message":"CSRF token request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"getCSRFTokenHandler","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":89,"isAuthenticated":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T14:35:00.243Z","level":"INFO","message":"Authenticated CSRF token generated","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"getCSRFTokenHandler","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":89,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T14:35:00.245Z","level":"INFO","message":"CSRF token issued successfully","service":"bendcare-os","env":"development","file":"route.ts","line":82,"function":"getCSRFTokenHandler","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":91,"tokenType":"[REDACTED]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T14:35:00.245Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":103,"function":"eval","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":90,"statusCode":200,"isPublic":true,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T14:35:00.245Z","level":"INFO","message":"Public route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":109,"function":"eval","correlationId":"cor_mgky7al5_k60l06f6","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":91,"endpoint":"/api/csrf","statusCode":200,"totalDuration":91,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
 GET /api/csrf 200 in 1981ms
 GET /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 2451ms
🌐 MIDDLEWARE: Global rate limit check: 192 remaining
🌐 MIDDLEWARE: Global rate limit check: 191 remaining
🌐 MIDDLEWARE: Global rate limit check: 190 remaining
🌐 MIDDLEWARE: Global rate limit check: 189 remaining
 ○ Compiling /api/admin/analytics/dashboards/[dashboardId] ...
 ✓ Compiled /api/admin/analytics/dashboards/[dashboardId] in 1405ms (2594 modules)
{"@timestamp":"2025-10-10T14:35:02.698Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.699Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.699Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.699Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.699Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.699Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.699Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.699Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.700Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.700Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.700Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.700Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.710Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis-client.ts","line":59,"function":"RedisClientManager.connect","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":12,"component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"bcos-redis-dev","keyPrefix":"[REDACTED]","tls":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.711Z","level":"ERROR","message":"Redis GET failed","service":"bendcare-os","env":"development","file":"redis-client.ts","line":232,"function":"redisGet","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":13,"error":{"name":"Error","message":"Stream isn't writeable and enableOfflineQueue options is false","stack":["Error: Stream isn't writeable and enableOfflineQueue options is false","at EventEmitter.sendCommand (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/Redis.js:363:32)","at EventEmitter.eval [as get] (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/utils/Commander.js:90:25)","at redisGet (webpack-internal:///(rsc)/./lib/cache/redis-client.ts:213:36)","at isTokenBlacklisted (webpack-internal:///(rsc)/./lib/cache/token-cache.ts:41:81)","at validateAccessToken (webpack-internal:///(rsc)/./lib/auth/token-manager.ts:287:109)","at async requireAuth (webpack-internal:///(rsc)/./lib/api/middleware/auth.ts:46:21)","at async applyGlobalAuth (webpack-internal:///(rsc)/./lib/api/middleware/global-auth.ts:113:28)","at async eval (webpack-internal:///(rsc)/./lib/api/rbac-route-handler.ts:64:31)","at async AppRouteRouteModule.do (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)","at async AppRouteRouteModule.handle (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)","at async responseGenerator (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fdashboards%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fdashboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fdashboards%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)","at async AppRouteRouteModule.handleResponse (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)","at async handleResponse (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fdashboards%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fdashboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fdashboards%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)","at async handler (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fdashboards%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fdashboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fdashboards%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)","at async DevServer.renderToResponseWithComponentsImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1422:9)","at async DevServer.renderPageComponent (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1474:24)","at async DevServer.renderToResponseImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1514:32)","at async DevServer.pipeImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1025:25)","at async NextNodeServer.handleCatchallRenderRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/next-server.js:393:17)","at async DevServer.handleRequestImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:916:17)","at async /Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:399:20","at async Span.traceAsyncFn (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/trace/trace.js:157:20)","at async DevServer.handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:395:24)","at async invokeRender (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:240:21)","at async handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:437:24)","at async requestHandlerImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:485:13)","at async Server.requestListener (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/start-server.js:226:13)"]},"component":"redis","key":"[REDACTED]","operation":"GET","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
{"@timestamp":"2025-10-10T14:35:02.740Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":41,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T14:35:02.753Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":54,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.753Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":55,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":53,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":55,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":54,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":55,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":55,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":55,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":56,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.754Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":56,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.755Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.755Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":56,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.755Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":56,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.755Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.755Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":57,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.755Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":57,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-10T14:35:02.763Z","level":"INFO","message":"dashboards list query completed - returned 4 of 4","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":4,"total":4,"published":4,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":18,"averageChartsPerDashboard":5,"page":1,"pageSize":4},"duration":8,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.764Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":9,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.764Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"userId":"[UUID]","statusCode":200,"totalDuration":66,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 1643ms
{"@timestamp":"2025-10-10T14:35:02.766Z","level":"INFO","message":"dashboards list query completed - returned 4 of 4","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":4,"total":4,"published":4,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":18,"averageChartsPerDashboard":5,"page":1,"pageSize":4},"duration":11,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.766Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":11,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.766Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7cs5_u26xc8es","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"userId":"[UUID]","statusCode":200,"totalDuration":67,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 1657ms
{"@timestamp":"2025-10-10T14:35:02.877Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis-client.ts","line":90,"function":"EventEmitter.eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":179,"component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:02.907Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis-client.ts","line":100,"function":"EventEmitter.eval","correlationId":"cor_mgky7csf_geon6uik","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":209,"component":"redis","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T14:35:03.062Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43 - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.063Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.063Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43 - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.063Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.063Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.063Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.063Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.063Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.063Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.064Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.064Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.064Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
{"@timestamp":"2025-10-10T14:35:03.130Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.130Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.130Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.130Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.130Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.131Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.131Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.131Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.131Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:236:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-10T14:35:03.194Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:236:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43", 1]
{"@timestamp":"2025-10-10T14:35:03.226Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.226Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":162,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.226Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.226Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.226Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.226Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.226Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.226Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.226Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:236:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-10T14:35:03.257Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:236:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43"]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43"]
{"@timestamp":"2025-10-10T14:35:03.299Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":168,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.299Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":168,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.299Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7cs5_gwls5luw","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","statusCode":200,"totalDuration":237,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
 GET /api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 2185ms
{"@timestamp":"2025-10-10T14:35:03.300Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":74,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.300Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T14:35:03.300Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7csu_g9ci48yj","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","statusCode":200,"totalDuration":237,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
 GET /api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 2161ms
🌐 MIDDLEWARE: Global rate limit check: 188 remaining
🌐 MIDDLEWARE: Global rate limit check: 187 remaining
{"@timestamp":"2025-10-10T14:35:03.632Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":156,"function":"process.closeDb"}
 ✓ Compiled /api/admin/analytics/charts in 393ms (2597 modules)
{"@timestamp":"2025-10-10T14:35:03.878Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.879Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.879Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.879Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.879Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.879Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.879Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.879Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.880Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.880Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.880Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.880Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.887Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis-client.ts","line":59,"function":"RedisClientManager.connect","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":9,"component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"bcos-redis-dev","keyPrefix":"[REDACTED]","tls":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.888Z","level":"ERROR","message":"Redis GET failed","service":"bendcare-os","env":"development","file":"redis-client.ts","line":232,"function":"redisGet","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":10,"error":{"name":"Error","message":"Stream isn't writeable and enableOfflineQueue options is false","stack":["Error: Stream isn't writeable and enableOfflineQueue options is false","at EventEmitter.sendCommand (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/Redis.js:363:32)","at EventEmitter.eval [as get] (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/utils/Commander.js:90:25)","at redisGet (webpack-internal:///(rsc)/./lib/cache/redis-client.ts:213:36)","at isTokenBlacklisted (webpack-internal:///(rsc)/./lib/cache/token-cache.ts:41:81)","at validateAccessToken (webpack-internal:///(rsc)/./lib/auth/token-manager.ts:287:109)","at async requireAuth (webpack-internal:///(rsc)/./lib/api/middleware/auth.ts:46:21)","at async applyGlobalAuth (webpack-internal:///(rsc)/./lib/api/middleware/global-auth.ts:113:28)","at async eval (webpack-internal:///(rsc)/./lib/api/rbac-route-handler.ts:64:31)","at async AppRouteRouteModule.do (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)","at async AppRouteRouteModule.handle (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)","at async responseGenerator (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fcharts%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fcharts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fcharts%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)","at async AppRouteRouteModule.handleResponse (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)","at async handleResponse (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fcharts%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fcharts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fcharts%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)","at async handler (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fcharts%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fcharts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fcharts%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)","at async DevServer.renderToResponseWithComponentsImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1422:9)","at async DevServer.renderPageComponent (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1474:24)","at async DevServer.renderToResponseImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1514:32)","at async DevServer.pipeImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1025:25)","at async NextNodeServer.handleCatchallRenderRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/next-server.js:393:17)","at async DevServer.handleRequestImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:916:17)","at async /Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:399:20","at async Span.traceAsyncFn (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/trace/trace.js:157:20)","at async DevServer.handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:395:24)","at async invokeRender (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:240:21)","at async handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:437:24)","at async requestHandlerImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:485:13)","at async Server.requestListener (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/start-server.js:226:13)"]},"component":"redis","key":"[REDACTED]","operation":"GET","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
{"@timestamp":"2025-10-10T14:35:03.910Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T14:35:03.923Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":45,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.923Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.923Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":44,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.923Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":43,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.923Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.923Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":45,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.923Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.923Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":45,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.924Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.924Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":45,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.924Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.924Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":45,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.924Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.924Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":46,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.924Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":46,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.925Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.925Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":46,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.925Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":46,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-10T14:35:03.930Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":5,"stacked-bar":1},"activeCount":13,"inactiveCount":0},"duration":6,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.931Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":7,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.931Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":53,"userId":"[UUID]","statusCode":200,"totalDuration":53,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 609ms
{"@timestamp":"2025-10-10T14:35:03.932Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":5,"stacked-bar":1},"activeCount":13,"inactiveCount":0},"duration":7,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.933Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":8,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T14:35:03.933Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7ehl_p7zwsbkl","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":54,"userId":"[UUID]","statusCode":200,"totalDuration":54,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 610ms
🌐 MIDDLEWARE: Global rate limit check: 186 remaining
🌐 MIDDLEWARE: Global rate limit check: 185 remaining
{"@timestamp":"2025-10-10T14:35:03.966Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis-client.ts","line":90,"function":"EventEmitter.eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":88,"component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
🌐 MIDDLEWARE: Global rate limit check: 184 remaining
🌐 MIDDLEWARE: Global rate limit check: 183 remaining
🌐 MIDDLEWARE: Global rate limit check: 182 remaining
🌐 MIDDLEWARE: Global rate limit check: 181 remaining
{"@timestamp":"2025-10-10T14:35:03.999Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis-client.ts","line":100,"function":"EventEmitter.eval","correlationId":"cor_mgky7ehl_pc89q1m1","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":121,"component":"redis","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 ✓ Compiled /api/admin/analytics/chart-data in 438ms (2611 modules)
{"@timestamp":"2025-10-10T14:35:04.558Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.558Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.558Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.559Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.560Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.561Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis-client.ts","line":59,"function":"RedisClientManager.connect","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"bcos-redis-dev","keyPrefix":"[REDACTED]","tls":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.562Z","level":"ERROR","message":"Redis GET failed","service":"bendcare-os","env":"development","file":"redis-client.ts","line":232,"function":"redisGet","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"error":{"name":"Error","message":"Stream isn't writeable and enableOfflineQueue options is false","stack":["Error: Stream isn't writeable and enableOfflineQueue options is false","at EventEmitter.sendCommand (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/Redis.js:363:32)","at EventEmitter.eval [as get] (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/utils/Commander.js:90:25)","at redisGet (webpack-internal:///(rsc)/./lib/cache/redis-client.ts:213:36)","at isTokenBlacklisted (webpack-internal:///(rsc)/./lib/cache/token-cache.ts:41:81)","at validateAccessToken (webpack-internal:///(rsc)/./lib/auth/token-manager.ts:287:109)","at async requireAuth (webpack-internal:///(rsc)/./lib/api/middleware/auth.ts:46:21)","at async applyGlobalAuth (webpack-internal:///(rsc)/./lib/api/middleware/global-auth.ts:113:28)","at async eval (webpack-internal:///(rsc)/./lib/api/rbac-route-handler.ts:64:31)","at async AppRouteRouteModule.do (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)","at async AppRouteRouteModule.handle (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)","at async responseGenerator (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)","at async AppRouteRouteModule.handleResponse (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)","at async handleResponse (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)","at async handler (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)","at async DevServer.renderToResponseWithComponentsImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1422:9)","at async DevServer.renderPageComponent (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1474:24)","at async DevServer.renderToResponseImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1514:32)","at async DevServer.pipeImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1025:25)","at async NextNodeServer.handleCatchallRenderRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/next-server.js:393:17)","at async DevServer.handleRequestImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:916:17)","at async /Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:399:20","at async Span.traceAsyncFn (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/trace/trace.js:157:20)","at async DevServer.handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:395:24)","at async invokeRender (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:240:21)","at async handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:437:24)","at async requestHandlerImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:485:13)","at async Server.requestListener (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/start-server.js:226:13)"]},"component":"redis","key":"[REDACTED]","operation":"GET","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
{"@timestamp":"2025-10-10T14:35:04.578Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":21,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T14:35:04.587Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.587Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.587Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":28,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":29,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":28,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":28,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":28,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":28,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":28,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.588Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.589Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.590Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.590Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.590Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.590Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.590Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.590Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.590Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.591Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.592Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.592Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.592Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.592Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.592Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.592Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.593Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.593Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.594Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.595Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.595Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.595Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.595Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.595Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T14:35:04.639Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis-client.ts","line":90,"function":"EventEmitter.eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":82,"component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:04.670Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis-client.ts","line":100,"function":"EventEmitter.eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":113,"component":"redis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
✅ QUERY RESULT: {
  duration: '870ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '874ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '902ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: { duration: '68ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:05.543Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":984,"seriesCount":2,"totalRecords":3081,"queryTime":947,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.543Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":984,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":947,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.543Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":984,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.544Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":985,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.552Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":961,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.556Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":965,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.556Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7ez6_sknmkq7x","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":997,"userId":"[UUID]","statusCode":200,"totalDuration":997,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
✅ QUERY RESULT: {
  duration: '958ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
 POST /api/admin/analytics/chart-data 200 in 1607ms
🌐 MIDDLEWARE: Global rate limit check: 180 remaining
✅ QUERY RESULT: { duration: '98ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:05.575Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1018,"seriesCount":2,"totalRecords":3081,"queryTime":981,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.575Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1018,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":981,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.575Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1018,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.576Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1019,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.577Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":987,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.580Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":990,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.581Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7ezf_z5ezeep4","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1024,"userId":"[UUID]","statusCode":200,"totalDuration":1023,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1619ms
🌐 MIDDLEWARE: Global rate limit check: 179 remaining
✅ QUERY RESULT: {
  duration: '1024ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: { duration: '67ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:05.629Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1070,"seriesCount":2,"totalRecords":3081,"queryTime":1034,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.629Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1070,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1034,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.629Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1070,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.629Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1070,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.630Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1039,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.633Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1042,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.634Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7ezu_8ory0gne","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1075,"userId":"[UUID]","statusCode":200,"totalDuration":1075,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
✅ QUERY RESULT: { duration: '129ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:05.635Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1077,"seriesCount":2,"totalRecords":3081,"queryTime":1041,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.635Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1077,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1041,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.635Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1077,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.635Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1077,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.636Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1046,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.640Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1050,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.640Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7ezu_uxwj0e8r","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1082,"userId":"[UUID]","statusCode":200,"totalDuration":1082,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1660ms
 POST /api/admin/analytics/chart-data 200 in 1662ms
✅ QUERY RESULT: {
  duration: '1056ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🌐 MIDDLEWARE: Global rate limit check: 178 remaining
🌐 MIDDLEWARE: Global rate limit check: 177 remaining
✅ QUERY RESULT: { duration: '77ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:05.703Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1144,"seriesCount":2,"totalRecords":3081,"queryTime":1109,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.703Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1144,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1109,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.703Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1144,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.704Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1145,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.705Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1114,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.708Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1117,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.708Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7ezv_boxznm38","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1149,"userId":"[UUID]","statusCode":200,"totalDuration":1149,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1748ms
🌐 MIDDLEWARE: Global rate limit check: 176 remaining
✅ QUERY RESULT: { duration: '133ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:05.791Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1232,"seriesCount":2,"totalRecords":3081,"queryTime":1197,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.791Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1232,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1197,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.792Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1233,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.792Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1233,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.793Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1202,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.796Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1205,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:05.796Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7ezv_tf6i2m4m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1237,"userId":"[UUID]","statusCode":200,"totalDuration":1237,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1817ms
🌐 MIDDLEWARE: Global rate limit check: 175 remaining
 ○ Compiling /api/admin/data-sources/[id]/query ...
 ✓ Compiled /api/admin/data-sources/[id]/query in 610ms (2617 modules)
{"@timestamp":"2025-10-10T14:35:06.341Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.341Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.341Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.341Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.342Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.343Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
(node:12669) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGINT listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(Use `node --trace-warnings ...` to show where the warning was created)
(node:12669) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGTERM listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
{"@timestamp":"2025-10-10T14:35:06.365Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis-client.ts","line":59,"function":"RedisClientManager.connect","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":24,"component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"bcos-redis-dev","keyPrefix":"[REDACTED]","tls":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.365Z","level":"ERROR","message":"Redis GET failed","service":"bendcare-os","env":"development","file":"redis-client.ts","line":232,"function":"redisGet","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":24,"error":{"name":"Error","message":"Stream isn't writeable and enableOfflineQueue options is false","stack":["Error: Stream isn't writeable and enableOfflineQueue options is false","at EventEmitter.sendCommand (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/Redis.js:363:32)","at EventEmitter.eval [as get] (webpack-internal:///(rsc)/./node_modules/.pnpm/ioredis@5.8.1/node_modules/ioredis/built/utils/Commander.js:90:25)","at redisGet (webpack-internal:///(rsc)/./lib/cache/redis-client.ts:213:36)","at isTokenBlacklisted (webpack-internal:///(rsc)/./lib/cache/token-cache.ts:41:81)","at validateAccessToken (webpack-internal:///(rsc)/./lib/auth/token-manager.ts:287:109)","at async requireAuth (webpack-internal:///(rsc)/./lib/api/middleware/auth.ts:46:21)","at async applyGlobalAuth (webpack-internal:///(rsc)/./lib/api/middleware/global-auth.ts:113:28)","at async eval (webpack-internal:///(rsc)/./lib/api/rbac-route-handler.ts:64:31)","at async AppRouteRouteModule.do (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)","at async AppRouteRouteModule.handle (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)","at async responseGenerator (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)","at async AppRouteRouteModule.handleResponse (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)","at async handleResponse (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)","at async handler (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&page=%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fanalytics%2Fchart-data%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)","at async DevServer.renderToResponseWithComponentsImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1422:9)","at async DevServer.renderPageComponent (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1474:24)","at async DevServer.renderToResponseImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1514:32)","at async DevServer.pipeImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1025:25)","at async NextNodeServer.handleCatchallRenderRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/next-server.js:393:17)","at async DevServer.handleRequestImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:916:17)","at async /Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:399:20","at async Span.traceAsyncFn (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/trace/trace.js:157:20)","at async DevServer.handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:395:24)","at async invokeRender (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:240:21)","at async handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:437:24)","at async requestHandlerImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:485:13)","at async Server.requestListener (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/start-server.js:226:13)"]},"component":"redis","key":"[REDACTED]","operation":"GET","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["cztBAcZQq7R-vjDupvER4", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
{"@timestamp":"2025-10-10T14:35:06.389Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":48,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T14:35:06.399Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":58,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.399Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":57,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.399Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":57,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.399Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":58,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":58,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":58,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":57,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":57,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":58,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":57,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":58,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":59,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.400Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":59,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":58,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":59,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":59,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":58,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":59,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":59,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":59,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":60,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":60,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":58,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":59,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.401Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":59,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.402Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.402Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.402Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.402Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.402Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.402Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":60,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.402Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":60,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.402Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":60,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":62,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":62,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":62,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.403Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.404Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":63,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.404Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":62,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.404Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":62,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.404Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":63,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.404Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":62,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.405Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.405Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.406Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.407Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order" -- params: [1, true]
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T14:35:06.518Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis-client.ts","line":90,"function":"EventEmitter.eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":177,"component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.555Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis-client.ts","line":100,"function":"EventEmitter.eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":214,"component":"redis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:06.731Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.732Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.732Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.732Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.732Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.732Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.803Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.803Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.804Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.804Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.804Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.804Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.804Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.804Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.804Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.805Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":"114","advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
{"@timestamp":"2025-10-10T14:35:06.808Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-10T14:35:06.810Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:06.810Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":79,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE practice_uid = $1 AND "date_value" >= $2 AND "date_value" <= $3 LIMIT 1000 -- params: [114, "2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-10T14:35:07.230Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":156,"function":"process.closeDb"}
✅ QUERY RESULT: {
  duration: '884ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '887ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '937ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T14:35:07.362Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":558,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.363Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":559,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.363Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7g81_1wj5or4c","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":632,"userId":"[UUID]","statusCode":200,"totalDuration":632,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?practice_uid=114&start_date=2025-01-01&end_date=2025-10-06&chart_type=table&data_source_id=388&limit=1000&_t=1760106903961 200 in 1791ms
✅ QUERY RESULT: { duration: '66ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:07.364Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1022,"seriesCount":2,"totalRecords":3081,"queryTime":958,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.364Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1022,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":958,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.365Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1023,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.365Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1023,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.367Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":964,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.371Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":968,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.371Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7gd8_cxy8yzsc","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1029,"userId":"[UUID]","statusCode":200,"totalDuration":1029,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1582ms
🌐 MIDDLEWARE: Global rate limit check: 174 remaining
🌐 MIDDLEWARE: Global rate limit check: 173 remaining
✅ QUERY RESULT: {
  duration: '975ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T14:35:07.405Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.406Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.406Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.406Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.406Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.406Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
✅ QUERY RESULT: {
  duration: '994ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T14:35:07.413Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.413Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.413Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.413Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":63,"function":"applyGlobalAuth","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.413Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":93,"function":"applyGlobalAuth","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.413Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
✅ QUERY RESULT: { duration: '117ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:07.418Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1076,"seriesCount":2,"totalRecords":3081,"queryTime":1011,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.418Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1076,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1011,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.419Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1077,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.419Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1077,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.420Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1017,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.423Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1020,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.423Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7gfb_3g532p8b","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1081,"userId":"[UUID]","statusCode":200,"totalDuration":1081,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1591ms
✅ QUERY RESULT: { duration: '79ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:07.431Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1090,"seriesCount":2,"totalRecords":3081,"queryTime":1025,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.431Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1090,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1025,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.431Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1090,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.432Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1091,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.433Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1030,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.436Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1033,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.436Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7gao_c743i88m","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1095,"userId":"[UUID]","statusCode":200,"totalDuration":1095,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1758ms
✅ QUERY RESULT: { duration: '60ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:07.449Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1108,"seriesCount":2,"totalRecords":3081,"queryTime":1044,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.449Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1108,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1044,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.449Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1108,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.449Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1108,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.450Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1048,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.453Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1051,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.453Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7gao_evn693zo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1112,"userId":"[UUID]","statusCode":200,"totalDuration":1112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1776ms
{"@timestamp":"2025-10-10T14:35:07.472Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
✅ QUERY RESULT: { duration: '65ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:07.473Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1131,"seriesCount":2,"totalRecords":3081,"queryTime":1067,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.474Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1132,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1067,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.474Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1132,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.474Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1132,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.475Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1073,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.478Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1076,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.478Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7g8v_1nb9rkvo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1136,"userId":"[UUID]","statusCode":200,"totalDuration":1136,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1877ms
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T14:35:07.487Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":82,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.487Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":81,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.487Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":81,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.487Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":82,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.488Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.488Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":83,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.488Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.488Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":83,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.488Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":83,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.488Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":83,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.488Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":83,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.489Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":84,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.489Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":84,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.489Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":556,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":84,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T14:35:07.563Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.563Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":115,"function":"applyGlobalAuth","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":150,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.563Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.563Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.563Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.563Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.563Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.563Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.564Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.564Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":"114","advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
{"@timestamp":"2025-10-10T14:35:07.566Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-10T14:35:07.568Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.568Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE practice_uid = $1 AND "date_value" >= $2 AND "date_value" <= $3 LIMIT 1000 -- params: [114, "2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-10T14:35:07.627Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":63,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.628Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T14:35:07.628Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7hmb_yxxuolxp","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":215,"userId":"[UUID]","statusCode":200,"totalDuration":215,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?practice_uid=114&start_date=2025-01-01&end_date=2025-10-06&chart_type=table&data_source_id=388&limit=1000&_t=1760106903978 200 in 244ms
✅ QUERY RESULT: {
  duration: '242ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: { duration: '70ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T14:35:07.801Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":687,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":396,"seriesCount":2,"totalRecords":3081,"queryTime":312,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.802Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":397,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":312,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.802Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":397,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.802Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":397,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.803Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":315,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.806Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":318,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T14:35:07.806Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgky7hmb_gkwpr96n","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":401,"userId":"[UUID]","statusCode":200,"totalDuration":401,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 424ms
{"@timestamp":"2025-10-10T14:35:08.279Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":156,"function":"process.closeDb"}