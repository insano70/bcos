 ‚úì Starting...
 ‚úì Ready in 1416ms
 ‚úì Compiled /middleware in 337ms (407 modules)
üåê MIDDLEWARE: Processing request for: /signin
üåê MIDDLEWARE: Public path detected, allowing through: /signin
 ‚óã Compiling /signin ...
 ‚úì Compiled /signin in 1615ms (1854 modules)
 GET /signin 200 in 1988ms
 ‚óã Compiling /api/admin/analytics/dashboards/default ...
 ‚úì Compiled /api/admin/analytics/dashboards/default in 1610ms (2287 modules)
{"@timestamp":"2025-10-13T23:44:22.031Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-13T23:44:22.157Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-13T23:44:22.201Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-13T23:44:22.235Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":2,"remaining":198,"limit":200}
{"@timestamp":"2025-10-13T23:44:22.236Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
üîê AUTH: Using access token from httpOnly cookie
{"@timestamp":"2025-10-13T23:44:22.267Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":1,"remaining":199,"limit":200}
{"@timestamp":"2025-10-13T23:44:22.268Z","level":"INFO","message":"Default dashboard query initiated","service":"bendcare-os","env":"development","file":"route.ts","line":21,"function":"getDefaultDashboardHandler"}
Query: select "dashboard_id" from "dashboards" where ("dashboards"."is_default" = $1 and "dashboards"."is_published" = $2 and "dashboards"."is_active" = $3) limit $4 -- params: [true, true, true, 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["tSQR-CPIrbq7TCz0VfRvW", 1]
{"@timestamp":"2025-10-13T23:44:22.292Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"mPwsrRTUV9drGUzfoZnAm731fGE17c02","tokenSource":"[REDACTED]","validationDuration":55}
üîê AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-13T23:44:22.293Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":25,"function":"getDefaultDashboardHandler","component":"database","operation":"SELECT","table":"dashboards","duration":25,"rowCount":1}
{"@timestamp":"2025-10-13T23:44:22.293Z","level":"INFO","message":"Default dashboard found","service":"bendcare-os","env":"development","file":"route.ts","line":34,"function":"getDefaultDashboardHandler","dashboardId":"[UUID]"}
 GET /api/admin/analytics/dashboards/default 200 in 2068ms
{"@timestamp":"2025-10-13T23:44:22.477Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":261,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":89,"fromRedis":true}
{"@timestamp":"2025-10-13T23:44:22.478Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"mPwsrRTUV9drGUzfoZnAm731fGE17c02","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":89,"duration":242}
{"@timestamp":"2025-10-13T23:44:22.478Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-13T23:44:22.479Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":244,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":90}
{"@timestamp":"2025-10-13T23:44:22.479Z","level":"INFO","message":"user context retrieved successfully from JWT token","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"GET","operation":"get_user_context","userId":"[UUID]","email":"[REDACTED]","rbac":{"roles":1,"permissions":89,"isSuperAdmin":true,"orgAdminFor":0},"organizations":{"direct":0,"accessible":0,"current":null},"duration":436,"slow":false,"component":"auth","cached":true}
 GET /api/auth/me 200 in 2271ms
üåê MIDDLEWARE: Processing request for: /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 ‚óã Compiling /dashboard/view/[dashboardId] ...
 ‚úì Compiled /dashboard/view/[dashboardId] in 1596ms (2707 modules)
{"@timestamp":"2025-10-13T23:44:24.353Z","level":"INFO","message":"GET /api/csrf - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:44:24.353Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/csrf","requiredPermissions":[],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:44:24.423Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":3,"remaining":197,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:44:24.423Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:44:24.423Z","level":"DEBUG","message":"Route marked as public","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":80,"function":"eval","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"reason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:44:24.423Z","level":"DEBUG","message":"Public route - skipping user context and RBAC checks","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":102,"function":"eval","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"endpoint":"/api/csrf","publicReason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["tSQR-CPIrbq7TCz0VfRvW", 1]
{"@timestamp":"2025-10-13T23:44:24.432Z","level":"INFO","message":"CSRF token request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"getCSRFTokenHandler","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":80,"isAuthenticated":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:44:24.433Z","level":"INFO","message":"Authenticated CSRF token generated","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"getCSRFTokenHandler","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":81,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:44:24.434Z","level":"INFO","message":"CSRF token issued successfully","service":"bendcare-os","env":"development","file":"route.ts","line":82,"function":"getCSRFTokenHandler","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":82,"tokenType":"[REDACTED]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:44:24.434Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":109,"function":"eval","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":11,"statusCode":200,"isPublic":true,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-13T23:44:24.434Z","level":"INFO","message":"Public route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":115,"function":"eval","correlationId":"cor_mgps5dye_dbotmlqc","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":82,"endpoint":"/api/csrf","statusCode":200,"totalDuration":82,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
 GET /api/csrf 200 in 1931ms
 GET /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa 200 in 2295ms
 ‚óã Compiling /api/admin/analytics/dashboards/[dashboardId] ...
 ‚úì Compiled /api/admin/analytics/dashboards/[dashboardId] in 1470ms (2715 modules)
{"@timestamp":"2025-10-13T23:44:26.703Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.704Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.739Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":4,"remaining":196,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.739Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.739Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.770Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.770Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.770Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.839Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-13T23:44:26.858Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.858Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":88,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.859Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":119,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.859Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.859Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.859Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.859Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.859Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.859Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-13T23:44:26.869Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"published":7,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":27,"averageChartsPerDashboard":4,"page":1,"pageSize":7},"duration":10,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.870Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":11,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.870Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5fwl_97ukz69b","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":167,"userId":"[UUID]","statusCode":200,"totalDuration":167,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 1842ms
{"@timestamp":"2025-10-13T23:44:26.900Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.900Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.934Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.934Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.934Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.969Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":7,"remaining":193,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.969Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:26.969Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.040Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.040Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.038Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
{"@timestamp":"2025-10-13T23:44:27.122Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":223,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.123Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":154,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.123Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.123Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":223,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.123Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.123Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":223,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.123Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.123Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":223,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.123Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":223,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-13T23:44:27.126Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"published":7,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":27,"averageChartsPerDashboard":4,"page":1,"pageSize":7},"duration":3,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.126Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-13T23:44:27.126Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5hc0_xm237vt8","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":226,"userId":"[UUID]","statusCode":200,"totalDuration":226,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 246ms
{"@timestamp":"2025-10-13T23:44:27.148Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"type":"api","identifier":"::1","current":8,"remaining":192,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.148Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.148Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"pathname":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.180Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"type":"api","identifier":"::1","current":9,"remaining":191,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.180Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"pathname":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.180Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.249Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":209,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.249Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.249Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.249Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":209,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.249Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.249Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":209,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.249Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.249Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":209,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.249Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":209,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:238:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-13T23:44:27.308Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":268,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:238:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["a0324818-ae41-4bf5-8291-447f30322faa", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["a0324818-ae41-4bf5-8291-447f30322faa"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["a0324818-ae41-4bf5-8291-447f30322faa"]
{"@timestamp":"2025-10-13T23:44:27.352Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":103,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.352Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
{"@timestamp":"2025-10-13T23:44:27.352Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5fx6_lf16ctkz","method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":312,"userId":"[UUID]","statusCode":200,"totalDuration":312,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa"}}
 GET /api/admin/analytics/dashboards/a0324818-ae41-4bf5-8291-447f30322faa 200 in 2298ms
 ‚úì Compiled /api/admin/analytics/charts in 315ms (2718 modules)
{"@timestamp":"2025-10-13T23:44:27.848Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.849Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.883Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":10,"remaining":190,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.883Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.883Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.913Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":11,"remaining":189,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.913Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.913Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.977Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":129,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-13T23:44:27.985Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.985Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":72,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.985Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.985Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.985Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.986Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.986Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.986Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.986Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-13T23:44:27.992Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"stacked-bar":2,"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":4},"activeCount":13,"inactiveCount":0},"duration":6,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.992Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":6,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-13T23:44:27.992Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5hpi_86q2o0xh","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","statusCode":200,"totalDuration":144,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 626ms
{"@timestamp":"2025-10-13T23:44:28.034Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":2,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:44:28.035Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:44:28.036Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:44:28.036Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
 ‚óã Compiling /api/admin/data-sources/[id]/query ...
 ‚úì Compiled /api/admin/data-sources/[id]/query in 914ms (2759 modules)
{"@timestamp":"2025-10-13T23:44:29.104Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-13T23:44:29.104Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-13T23:44:29.105Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-13T23:44:29.105Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-13T23:44:29.105Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-13T23:44:29.105Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-13T23:44:29.105Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-13T23:44:29.105Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-13T23:44:29.106Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-13T23:44:29.114Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.114Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.114Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.114Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.114Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.114Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.114Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.114Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.148Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.149Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.220Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"type":"api","identifier":"::1","current":12,"remaining":188,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.220Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.220Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.245Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"type":"api","identifier":"::1","current":13,"remaining":187,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.245Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.245Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.245Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"type":"api","identifier":"::1","current":14,"remaining":186,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.245Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.245Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.245Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"type":"api","identifier":"::1","current":15,"remaining":185,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.245Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":130,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.245Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.246Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":98,"type":"api","identifier":"::1","current":16,"remaining":184,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.246Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":97,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.246Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":98,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.252Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"type":"api","identifier":"::1","current":17,"remaining":183,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.253Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.253Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.276Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":162,"type":"api","identifier":"::1","current":18,"remaining":182,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.276Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":162,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.276Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":162,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.282Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":168,"type":"api","identifier":"::1","current":19,"remaining":181,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.283Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":169,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.283Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":169,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.283Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":169,"type":"api","identifier":"::1","current":20,"remaining":180,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.283Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":169,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.283Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":169,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.283Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"type":"api","identifier":"::1","current":21,"remaining":179,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.283Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.283Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.317Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-13T23:44:29.331Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":218,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.332Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":78,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.332Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.332Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.332Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.332Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.332Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.332Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.332Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.332Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.334Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.334Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"chartType":"bar","dataSourceId":1,"hash":"b7c28847d8b7","cacheKey":"[REDACTED]","configSize":371,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.348Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":234,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":72,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.349Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"number","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"chartType":"number","dataSourceId":3,"hash":"88ad969b5656","cacheKey":"[REDACTED]","configSize":155,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.350Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"dual-axis","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"chartType":"dual-axis","dataSourceId":3,"hash":"d3dffb7e03b0","cacheKey":"[REDACTED]","configSize":359,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"progress-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"chartType":"progress-bar","dataSourceId":3,"hash":"63ef8ec8d13c","cacheKey":"[REDACTED]","configSize":186,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.351Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":203,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.352Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.352Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.352Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.352Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.352Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.352Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.352Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.352Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["4e23ee8f-33b1-4a6a-a371-0437d01c40d6", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["4e23ee8f-33b1-4a6a-a371-0437d01c40d6", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["c2fc33f6-1aa3-4f13-af4f-0ba70aa26502", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["c2fc33f6-1aa3-4f13-af4f-0ba70aa26502", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["7b747a0d-9c72-4d28-9f8b-4b4772f1b207", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["7b747a0d-9c72-4d28-9f8b-4b4772f1b207", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["43ca9f7c-ad3d-475c-8488-9f336dfe2670", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["43ca9f7c-ad3d-475c-8488-9f336dfe2670", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["b5555393-4fa7-4c4e-888a-51df14c926fa", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["b5555393-4fa7-4c4e-888a-51df14c926fa", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["782213de-c77c-4d4b-96ec-0ecc726a3a6f", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["782213de-c77c-4d4b-96ec-0ecc726a3a6f", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["e6f56c97-ca51-4ecb-9b8a-7e83b0e92951", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["e6f56c97-ca51-4ecb-9b8a-7e83b0e92951", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["669eb7e0-0e5e-422a-9a96-63f131a6a967", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["669eb7e0-0e5e-422a-9a96-63f131a6a967", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["fcfa2cee-7aa4-425c-857f-f846264cae32", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["fcfa2cee-7aa4-425c-857f-f846264cae32", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["746eed9d-8ba9-4c16-a575-3f7ce9c385af", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["746eed9d-8ba9-4c16-a575-3f7ce9c385af", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["9514bf48-e5d3-4373-ae4e-f98e55e3dd6f", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["9514bf48-e5d3-4373-ae4e-f98e55e3dd6f", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["2ed596e4-e76d-4b18-87d8-73c734b804ca", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["2ed596e4-e76d-4b18-87d8-73c734b804ca", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["b5d849fe-23fc-43aa-bd6d-c3604c802d6a", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["b5d849fe-23fc-43aa-bd6d-c3604c802d6a", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["9229292d-ac42-4db4-b502-e855dbe4226e", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["9229292d-ac42-4db4-b502-e855dbe4226e", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["119c4772-85ac-42c8-bcc9-9c0e2705d788", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["119c4772-85ac-42c8-bcc9-9c0e2705d788", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["b5fbb298-5306-4fe0-9fb8-9f8e58e2c69f", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["b5fbb298-5306-4fe0-9fb8-9f8e58e2c69f", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["f2bb8b5c-3c21-48e3-91d6-8a5c73524255", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["f2bb8b5c-3c21-48e3-91d6-8a5c73524255", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["79314eb5-9667-47cc-920d-ef824c7c7e8e", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["79314eb5-9667-47cc-920d-ef824c7c7e8e", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["a4d679f5-e27c-4641-af35-49de7d472ead", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["a4d679f5-e27c-4641-af35-49de7d472ead", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["8a17c879-6c34-4213-950e-f86b17276c99", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["8a17c879-6c34-4213-950e-f86b17276c99", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["5478581f-b7f2-4a81-95e6-e9b476e85f45", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["5478581f-b7f2-4a81-95e6-e9b476e85f45", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["d2fb3efa-dc52-412d-aa1b-0007263e1e8b", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["d2fb3efa-dc52-412d-aa1b-0007263e1e8b", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["8cf7ab1a-714c-4c15-89fb-be188ac79996", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["8cf7ab1a-714c-4c15-89fb-be188ac79996", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["05fca3fd-38d6-41c2-8343-1035e1f7fde8", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["05fca3fd-38d6-41c2-8343-1035e1f7fde8", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["297bfaba-257b-4566-9146-3de6f69cd311", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["297bfaba-257b-4566-9146-3de6f69cd311", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["42dea213-bad3-41d1-90c5-88da8fd0859c", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["42dea213-bad3-41d1-90c5-88da8fd0859c", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["9b0e28f4-edec-4edf-ab8f-493df3863136", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["9b0e28f4-edec-4edf-ab8f-493df3863136", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["c73ec1e3-f010-437b-82d2-029ba25b188e", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["c73ec1e3-f010-437b-82d2-029ba25b188e", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["aee86b6c-a02d-4522-9d52-e71c15bc80d1", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["aee86b6c-a02d-4522-9d52-e71c15bc80d1", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["a09ec951-85bb-45c6-a62f-a152b4262320", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["a09ec951-85bb-45c6-a62f-a152b4262320", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["fb0a01ea-e3db-4967-93be-0924bd9a380c", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["fb0a01ea-e3db-4967-93be-0924bd9a380c", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["d8f0ef2e-0d4c-4685-85d1-ebcecea39aa3", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["d8f0ef2e-0d4c-4685-85d1-ebcecea39aa3", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["885ccab9-84ae-4cc5-b2e2-782c7b6d3437", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["885ccab9-84ae-4cc5-b2e2-782c7b6d3437", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["a8e277ca-d473-4263-8563-d5c618ae11e0", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["a8e277ca-d473-4263-8563-d5c618ae11e0", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["e917cfd6-ea45-4e32-846f-42a624e77d00", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["e917cfd6-ea45-4e32-846f-42a624e77d00", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["2b670095-76e2-4ef9-a319-9128d703cd64", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["2b670095-76e2-4ef9-a319-9128d703cd64", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["9344cc12-cab3-417a-ba0b-34226ccc430a", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["9344cc12-cab3-417a-ba0b-34226ccc430a", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["60d3139e-5749-427d-b958-7710c823d3f1", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["60d3139e-5749-427d-b958-7710c823d3f1", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["6ba4ff08-2178-4fac-9302-0ef6347ac7e1", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["6ba4ff08-2178-4fac-9302-0ef6347ac7e1", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["0ce0edbe-d3ee-4543-bb9c-3c710450882b", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["0ce0edbe-d3ee-4543-bb9c-3c710450882b", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["7b70e645-82f2-4b18-8b22-db946991f6d5", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["7b70e645-82f2-4b18-8b22-db946991f6d5", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["640c5969-74bc-4189-a455-81bf26f74829", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["640c5969-74bc-4189-a455-81bf26f74829", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-13T23:44:29.424Z","level":"INFO","message":"organizations list query completed - returned 44 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":44,"active":44,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":72,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.425Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.425Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5i7v_8diqhy6l","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":277,"userId":"[UUID]","statusCode":200,"totalDuration":277,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 1388ms
{"@timestamp":"2025-10-13T23:44:29.431Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:44:29.446Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.446Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.506Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.506Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.504Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
{"@timestamp":"2025-10-13T23:44:29.786Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":673,"key":"[REDACTED]","chartType":"bar","cachedAt":"2025-10-13T23:42:10.817Z","recordCount":3081,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.786Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":673,"requestingUserId":"[UUID]","chartType":"bar","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:42:10.817Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.793Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":460,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.793Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5i7v_s4k1pewh","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":680,"userId":"[UUID]","statusCode":200,"totalDuration":680,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.794Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":680,"key":"[REDACTED]","chartType":"number","cachedAt":"2025-10-13T23:42:10.700Z","recordCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.794Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":680,"requestingUserId":"[UUID]","chartType":"number","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:42:10.700Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.795Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":445,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.795Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5i7v_uln1qc98","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":681,"userId":"[UUID]","statusCode":200,"totalDuration":681,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1758ms
{"@timestamp":"2025-10-13T23:44:29.796Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":682,"key":"[REDACTED]","chartType":"dual-axis","cachedAt":"2025-10-13T23:42:10.701Z","recordCount":94,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.796Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":682,"requestingUserId":"[UUID]","chartType":"dual-axis","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:42:10.701Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.797Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":447,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.797Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5i7w_rgdl5y77","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":683,"userId":"[UUID]","statusCode":200,"totalDuration":683,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1759ms
 POST /api/admin/analytics/chart-data/universal 200 in 1760ms
{"@timestamp":"2025-10-13T23:44:29.806Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-13T23:44:29.836Z","level":"INFO","message":"POST /api/admin/analytics/chart-data/universal - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.836Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data/universal","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.847Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.847Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.849Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.849Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.888Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":774,"key":"[REDACTED]","chartType":"progress-bar","cachedAt":"2025-10-13T23:42:04.191Z","recordCount":1154,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.888Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":774,"requestingUserId":"[UUID]","chartType":"progress-bar","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:42:04.191Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.890Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":538,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.890Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5i7w_jqhdnfct","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":776,"userId":"[UUID]","statusCode":200,"totalDuration":776,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.890Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":444,"type":"api","identifier":"::1","current":22,"remaining":178,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":444,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":445,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":385,"type":"api","identifier":"::1","current":23,"remaining":177,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":385,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":385,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":55,"type":"api","identifier":"::1","current":24,"remaining":176,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":54,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":55,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"type":"api","identifier":"::1","current":25,"remaining":175,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.891Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.892Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":43,"type":"api","identifier":"::1","current":26,"remaining":174,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.892Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":43,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.892Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":43,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 POST /api/admin/analytics/chart-data/universal 200 in 1854ms
{"@timestamp":"2025-10-13T23:44:29.974Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":528,"type":"api","identifier":"::1","current":27,"remaining":173,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.974Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":528,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.974Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":528,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.975Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":469,"type":"api","identifier":"::1","current":28,"remaining":172,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.975Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":469,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.975Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":469,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.976Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"type":"api","identifier":"::1","current":29,"remaining":171,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.976Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"pathname":"/api/admin/analytics/chart-data/universal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.976Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:29.976Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":129,"type":"api","identifier":"::1","current":30,"remaining":170,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.976Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":129,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.976Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":129,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:29.977Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":128,"type":"api","identifier":"::1","current":31,"remaining":169,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.977Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":128,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:29.977Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":128,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.128Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":682,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.129Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":155,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.129Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":238,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.129Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":683,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.129Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.129Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":683,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.129Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.129Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":683,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.129Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":683,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.129Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":683,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.130Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":684,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"stacked-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.130Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":684,"chartType":"stacked-bar","dataSourceId":3,"hash":"55dc91641314","cacheKey":"[REDACTED]","configSize":190,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.130Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":624,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.131Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":155,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.131Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":240,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.131Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":625,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.131Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.131Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":625,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.131Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.131Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":625,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.131Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":625,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.132Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":626,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":null,"advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
{"@timestamp":"2025-10-13T23:44:30.132Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.132Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data/universal","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":156,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.132Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":241,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.132Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.132Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.133Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.133Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.133Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.133Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.133Z","level":"INFO","message":"Universal chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":102,"function":"universalChartDataHandler","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"INFO","message":"Universal chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"universalChartDataHandler","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"requestingUserId":"[UUID]","hasChartDefinitionId":false,"hasChartConfig":true,"chartType":"horizontal-bar","hasRuntimeFilters":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"DEBUG","message":"Cache key generated","service":"bendcare-os","env":"development","file":"cache-key-generator.ts","line":78,"function":"generateCacheKey","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"chartType":"horizontal-bar","dataSourceId":1,"hash":"00fe5b41e88f","cacheKey":"[REDACTED]","configSize":175,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":287,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":158,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":243,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":287,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":287,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":287,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.134Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":287,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":288,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":null,"advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":286,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":158,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":243,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":286,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":132,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":154,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":286,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":170,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":179,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":286,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.135Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":286,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
{"@timestamp":"2025-10-13T23:44:30.140Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":634,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-13T23:44:30.141Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-13T23:44:30.143Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":3,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.145Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":639,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE "date_value" >= $1 AND "date_value" <= $2 LIMIT 1000 -- params: ["2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-13T23:44:30.147Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":5,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.147Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE "date_value" >= $1 AND "date_value" <= $2 LIMIT 1000 -- params: ["2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-13T23:44:30.166Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":720,"key":"[REDACTED]","chartType":"stacked-bar","cachedAt":"2025-10-13T23:42:10.707Z","recordCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.166Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":720,"requestingUserId":"[UUID]","chartType":"stacked-bar","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:42:10.707Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.166Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.167Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5jau_nyo6qjpm","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":721,"userId":"[UUID]","statusCode":200,"totalDuration":721,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 736ms
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["4e23ee8f-33b1-4a6a-a371-0437d01c40d6", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["4e23ee8f-33b1-4a6a-a371-0437d01c40d6", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["c2fc33f6-1aa3-4f13-af4f-0ba70aa26502", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["c2fc33f6-1aa3-4f13-af4f-0ba70aa26502", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["7b747a0d-9c72-4d28-9f8b-4b4772f1b207", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["7b747a0d-9c72-4d28-9f8b-4b4772f1b207", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["43ca9f7c-ad3d-475c-8488-9f336dfe2670", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["43ca9f7c-ad3d-475c-8488-9f336dfe2670", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["b5555393-4fa7-4c4e-888a-51df14c926fa", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["b5555393-4fa7-4c4e-888a-51df14c926fa", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["782213de-c77c-4d4b-96ec-0ecc726a3a6f", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["782213de-c77c-4d4b-96ec-0ecc726a3a6f", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["e6f56c97-ca51-4ecb-9b8a-7e83b0e92951", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["e6f56c97-ca51-4ecb-9b8a-7e83b0e92951", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["669eb7e0-0e5e-422a-9a96-63f131a6a967", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["669eb7e0-0e5e-422a-9a96-63f131a6a967", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["fcfa2cee-7aa4-425c-857f-f846264cae32", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["fcfa2cee-7aa4-425c-857f-f846264cae32", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["746eed9d-8ba9-4c16-a575-3f7ce9c385af", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["746eed9d-8ba9-4c16-a575-3f7ce9c385af", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["9514bf48-e5d3-4373-ae4e-f98e55e3dd6f", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["9514bf48-e5d3-4373-ae4e-f98e55e3dd6f", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["2ed596e4-e76d-4b18-87d8-73c734b804ca", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["2ed596e4-e76d-4b18-87d8-73c734b804ca", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["b5d849fe-23fc-43aa-bd6d-c3604c802d6a", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["b5d849fe-23fc-43aa-bd6d-c3604c802d6a", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["9229292d-ac42-4db4-b502-e855dbe4226e", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["9229292d-ac42-4db4-b502-e855dbe4226e", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["119c4772-85ac-42c8-bcc9-9c0e2705d788", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["119c4772-85ac-42c8-bcc9-9c0e2705d788", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["b5fbb298-5306-4fe0-9fb8-9f8e58e2c69f", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["b5fbb298-5306-4fe0-9fb8-9f8e58e2c69f", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["f2bb8b5c-3c21-48e3-91d6-8a5c73524255", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["f2bb8b5c-3c21-48e3-91d6-8a5c73524255", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["79314eb5-9667-47cc-920d-ef824c7c7e8e", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["79314eb5-9667-47cc-920d-ef824c7c7e8e", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["a4d679f5-e27c-4641-af35-49de7d472ead", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["a4d679f5-e27c-4641-af35-49de7d472ead", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["8a17c879-6c34-4213-950e-f86b17276c99", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["8a17c879-6c34-4213-950e-f86b17276c99", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["5478581f-b7f2-4a81-95e6-e9b476e85f45", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["5478581f-b7f2-4a81-95e6-e9b476e85f45", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["d2fb3efa-dc52-412d-aa1b-0007263e1e8b", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["d2fb3efa-dc52-412d-aa1b-0007263e1e8b", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["8cf7ab1a-714c-4c15-89fb-be188ac79996", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["8cf7ab1a-714c-4c15-89fb-be188ac79996", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["05fca3fd-38d6-41c2-8343-1035e1f7fde8", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["05fca3fd-38d6-41c2-8343-1035e1f7fde8", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["297bfaba-257b-4566-9146-3de6f69cd311", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["297bfaba-257b-4566-9146-3de6f69cd311", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["42dea213-bad3-41d1-90c5-88da8fd0859c", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["42dea213-bad3-41d1-90c5-88da8fd0859c", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["9b0e28f4-edec-4edf-ab8f-493df3863136", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["9b0e28f4-edec-4edf-ab8f-493df3863136", true]
{"@timestamp":"2025-10-13T23:44:30.212Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["c73ec1e3-f010-437b-82d2-029ba25b188e", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["c73ec1e3-f010-437b-82d2-029ba25b188e", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["aee86b6c-a02d-4522-9d52-e71c15bc80d1", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["aee86b6c-a02d-4522-9d52-e71c15bc80d1", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["a09ec951-85bb-45c6-a62f-a152b4262320", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["a09ec951-85bb-45c6-a62f-a152b4262320", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["fb0a01ea-e3db-4967-93be-0924bd9a380c", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["fb0a01ea-e3db-4967-93be-0924bd9a380c", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["d8f0ef2e-0d4c-4685-85d1-ebcecea39aa3", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["d8f0ef2e-0d4c-4685-85d1-ebcecea39aa3", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["885ccab9-84ae-4cc5-b2e2-782c7b6d3437", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["885ccab9-84ae-4cc5-b2e2-782c7b6d3437", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["a8e277ca-d473-4263-8563-d5c618ae11e0", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["a8e277ca-d473-4263-8563-d5c618ae11e0", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["e917cfd6-ea45-4e32-846f-42a624e77d00", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["e917cfd6-ea45-4e32-846f-42a624e77d00", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["2b670095-76e2-4ef9-a319-9128d703cd64", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["2b670095-76e2-4ef9-a319-9128d703cd64", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["9344cc12-cab3-417a-ba0b-34226ccc430a", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["9344cc12-cab3-417a-ba0b-34226ccc430a", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["60d3139e-5749-427d-b958-7710c823d3f1", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["60d3139e-5749-427d-b958-7710c823d3f1", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["6ba4ff08-2178-4fac-9302-0ef6347ac7e1", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["6ba4ff08-2178-4fac-9302-0ef6347ac7e1", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["0ce0edbe-d3ee-4543-bb9c-3c710450882b", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["0ce0edbe-d3ee-4543-bb9c-3c710450882b", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["7b70e645-82f2-4b18-8b22-db946991f6d5", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["7b70e645-82f2-4b18-8b22-db946991f6d5", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["640c5969-74bc-4189-a455-81bf26f74829", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["640c5969-74bc-4189-a455-81bf26f74829", true]
Query: select count(*) from "user_organizations" where ("user_organizations"."organization_id" = $1 and "user_organizations"."is_active" = $2) -- params: ["13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "organization_id", "name", "slug", "parent_organization_id", "is_active", "created_at", "updated_at", "deleted_at" from "organizations" where ("organizations"."parent_organization_id" = $1 and "organizations"."is_active" = $2 and "organizations"."deleted_at" is null) -- params: ["13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-13T23:44:30.234Z","level":"INFO","message":"organizations list query completed - returned 44 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":44,"active":44,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":99,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.234Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":99,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-13T23:44:30.234Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5jle_vx1nxsbo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":385,"userId":"[UUID]","statusCode":200,"totalDuration":385,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 421ms
{"@timestamp":"2025-10-13T23:44:30.309Z","level":"INFO","message":"Cache hit","service":"bendcare-os","env":"development","file":"chart-data-cache.ts","line":51,"function":"ChartDataCache.get","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":473,"key":"[REDACTED]","chartType":"horizontal-bar","cachedAt":"2025-10-13T23:42:10.813Z","recordCount":1501,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.309Z","level":"INFO","message":"Chart data served from cache","service":"bendcare-os","env":"development","file":"route.ts","line":145,"function":"universalChartDataHandler","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":473,"requestingUserId":"[UUID]","chartType":"horizontal-bar","cacheKey":"[REDACTED]","cachedAt":"2025-10-13T23:42:10.813Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.310Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":177,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
{"@timestamp":"2025-10-13T23:44:30.310Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5jl8_te4av3v1","method":"POST","path":"/api/admin/analytics/chart-data/universal","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":474,"userId":"[UUID]","statusCode":200,"totalDuration":474,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data/universal"}}
 POST /api/admin/analytics/chart-data/universal 200 in 504ms
{"@timestamp":"2025-10-13T23:44:30.990Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":859,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.991Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":860,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.991Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5i7w_lxtu2w2b","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1485,"userId":"[UUID]","statusCode":200,"totalDuration":1485,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?start_date=2025-01-01&end_date=2025-10-06&practice=114&limit=1000&_t=1760399068019 200 in 2949ms
{"@timestamp":"2025-10-13T23:44:30.994Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":859,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.994Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":860,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-13T23:44:30.994Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgps5jl8_jgs755ic","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1147,"userId":"[UUID]","statusCode":200,"totalDuration":1147,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?start_date=2025-01-01&end_date=2025-10-06&practice=114&limit=1000&_t=1760399068020 200 in 1186ms
üåê MIDDLEWARE: Processing request for: /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa?datePreset=this_month 200 in 96ms
üåê MIDDLEWARE: Processing request for: /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa?datePreset=ytd 200 in 38ms
üåê MIDDLEWARE: Processing request for: /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/a0324818-ae41-4bf5-8291-447f30322faa?datePreset=last_quarter 200 in 27ms