 ✓ Starting...
 ✓ Ready in 1487ms
 ✓ Compiled /middleware in 323ms (406 modules)
 ○ Compiling /api/auth/oidc/login ...
 ✓ Compiled /api/auth/oidc/login in 1059ms (725 modules)
{"@timestamp":"2025-10-10T19:02:57.246Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-10T19:02:57.385Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-10T19:02:57.429Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-10T19:02:57.459Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"auth","identifier":"::1","current":2,"remaining":18,"limit":20}
{"@timestamp":"2025-10-10T19:02:57.460Z","level":"INFO","message":"GET /api/auth/oidc/login - OIDC login initiated","service":"bendcare-os","env":"development","file":"route.ts","line":55,"function":"oidcLoginHandler","correlationId":"cor_mgl7rw8e_mxg7tw68","component":"api","method":"GET","path":"/api/auth/oidc/login","request":{}}
{"@timestamp":"2025-10-10T19:02:57.461Z","level":"INFO","message":"OIDC login initiation started","service":"bendcare-os","env":"development","file":"route.ts","line":75,"function":"oidcLoginHandler","requestId":"unknown","ipAddress":"[REDACTED]","returnUrl":"/dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43","fingerprint":"13b197eeb712468a..."}
{"@timestamp":"2025-10-10T19:02:57.461Z","level":"DEBUG","message":"OIDC configuration loaded","service":"bendcare-os","env":"development","file":"config.ts","line":48,"function":"buildOIDCConfig","tenantId":"[UUID]","clientId":"44ae5aae...","redirectUri":"http://localhost:4001/api/auth/oidc/callback","scopes":["openid","profile","email"],"allowedDomains":["aara.care","sparc.care","illumination.health","bendcare.com","oasis.care"],"strictFingerprint":false}
{"@timestamp":"2025-10-10T19:02:57.461Z","level":"INFO","message":"Fetching OIDC discovery document","service":"bendcare-os","env":"development","file":"client.ts","line":65,"function":"OIDCClient.initialize","tenantId":"[UUID]"}
{"@timestamp":"2025-10-10T19:02:57.926Z","level":"INFO","message":"OIDC configuration discovered successfully","service":"bendcare-os","env":"development","file":"client.ts","line":72,"function":"OIDCClient.initialize","issuer":"https://login.microsoftonline.com/e0268fe2-3176-4ac0-8cef-5f1925dd490e/v2.0"}
{"@timestamp":"2025-10-10T19:02:57.971Z","level":"DEBUG","message":"Authorization URL created","service":"bendcare-os","env":"development","file":"client.ts","line":120,"function":"OIDCClient.createAuthUrl","state":"S4xnudv9...","nonce":"hefQzibB...","scopes":["openid","profile","email"]}
Query: insert into "oidc_states" ("state", "nonce", "user_fingerprint", "is_used", "created_at", "expires_at", "used_at") values ($1, $2, $3, $4, default, $5, default) -- params: ["S4xnudv9ai2QWHSh2BgHiNsxV02gwdLe0Cb7MELnYk0", "hefQzibB_AkuSB2z1hsXxqCtzvyqAeYGIZsULD-vA_8", "13b197eeb712468ac5b56dbf7be43c43", false, "2025-10-10T19:08:27.971Z"]
{"@timestamp":"2025-10-10T19:02:58.011Z","level":"DEBUG","message":"State token registered in database","service":"bendcare-os","env":"development","file":"database-state-manager.ts","line":72,"function":"DatabaseStateManager.registerState","state":"S4xnudv9...","expiresAt":"2025-10-10T19:08:27.971Z"}
{"@timestamp":"2025-10-10T19:02:58.011Z","level":"DEBUG","message":"OIDC state token registered","service":"bendcare-os","env":"development","file":"route.ts","line":88,"function":"oidcLoginHandler","state":"S4xnudv9..."}
{"@timestamp":"2025-10-10T19:02:58.016Z","level":"INFO","message":"OIDC login audit","service":"bendcare-os","env":"development","file":"route.ts","line":118,"function":"oidcLoginHandler","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","returnUrl":"/dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43"}
{"@timestamp":"2025-10-10T19:02:58.016Z","level":"INFO","message":"OIDC login redirect","service":"bendcare-os","env":"development","file":"route.ts","line":124,"function":"oidcLoginHandler","duration":557,"authEndpoint":"https://login.microsoftonline.com/e0268fe2-3176-4ac0-8cef-5f1925dd490e/oauth2/v2.0/authorize"}
 GET /api/auth/oidc/login?returnUrl=%2Fdashboard%2Fview%2F30d9570d-5a7f-4553-a72b-0a54430daa43 307 in 2026ms
 ○ Compiling /api/auth/oidc/callback ...
 ✓ Compiled /api/auth/oidc/callback in 515ms (728 modules)
{"@timestamp":"2025-10-10T19:02:59.469Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"auth","identifier":"::1","current":3,"remaining":17,"limit":20}
{"@timestamp":"2025-10-10T19:02:59.469Z","level":"INFO","message":"GET /api/auth/oidc/callback - OIDC callback received","service":"bendcare-os","env":"development","file":"route.ts","line":70,"function":"oidcCallbackHandler","correlationId":"cor_mgl7ryd4_p7xaclvg","component":"api","method":"GET","path":"/api/auth/oidc/callback","request":{}}
Query: select "state", "nonce", "user_fingerprint", "is_used", "created_at", "expires_at", "used_at" from "oidc_states" where ("oidc_states"."state" = $1 and "oidc_states"."expires_at" > $2) for update -- params: ["S4xnudv9ai2QWHSh2BgHiNsxV02gwdLe0Cb7MELnYk0", "2025-10-10T19:02:59.475Z"]
Query: update "oidc_states" set "is_used" = $1, "used_at" = $2 where "oidc_states"."state" = $3 -- params: [true, "2025-10-10T19:02:59.479Z", "S4xnudv9ai2QWHSh2BgHiNsxV02gwdLe0Cb7MELnYk0"]
{"@timestamp":"2025-10-10T19:02:59.481Z","level":"INFO","message":"State token validated and marked as used","service":"bendcare-os","env":"development","file":"database-state-manager.ts","line":135,"function":"eval","state":"S4xnudv9...","age":1487}
{"@timestamp":"2025-10-10T19:02:59.483Z","level":"DEBUG","message":"OIDC configuration loaded","service":"bendcare-os","env":"development","file":"config.ts","line":48,"function":"buildOIDCConfig","tenantId":"[UUID]","clientId":"44ae5aae...","redirectUri":"http://localhost:4001/api/auth/oidc/callback","scopes":["openid","profile","email"],"allowedDomains":["aara.care","sparc.care","illumination.health","bendcare.com","oasis.care"],"strictFingerprint":false}
{"@timestamp":"2025-10-10T19:02:59.483Z","level":"INFO","message":"Fetching OIDC discovery document","service":"bendcare-os","env":"development","file":"client.ts","line":65,"function":"OIDCClient.initialize","tenantId":"[UUID]"}
{"@timestamp":"2025-10-10T19:02:59.656Z","level":"INFO","message":"OIDC configuration discovered successfully","service":"bendcare-os","env":"development","file":"client.ts","line":72,"function":"OIDCClient.initialize","issuer":"https://login.microsoftonline.com/e0268fe2-3176-4ac0-8cef-5f1925dd490e/v2.0"}
{"@timestamp":"2025-10-10T19:03:00.063Z","level":"DEBUG","message":"Token exchange successful","service":"bendcare-os","env":"development","file":"client.ts","line":183,"function":"OIDCClient.handleCallback","hasAccessToken":"[REDACTED]","hasIdToken":"[REDACTED]","hasRefreshToken":"[REDACTED]"}
{"@timestamp":"2025-10-10T19:03:00.064Z","level":"WARN","message":"ID token is stale","service":"bendcare-os","env":"development","file":"client.ts","line":295,"function":"OIDCClient.handleCallback","tokenAge":"[REDACTED]","iat":"2025-10-10T18:57:59.000Z"}
{"@timestamp":"2025-10-10T19:03:00.065Z","level":"INFO","message":"ID token validation successful","service":"bendcare-os","env":"development","file":"client.ts","line":310,"function":"OIDCClient.handleCallback","email":"[REDACTED]","iat":"2025-10-10T18:57:59.000Z","exp":"2025-10-10T20:02:59.000Z","tokenAge":"[REDACTED]"}
{"@timestamp":"2025-10-10T19:03:00.065Z","level":"INFO","message":"OIDC token exchange successful","service":"bendcare-os","env":"development","file":"route.ts","line":244,"function":"oidcCallbackHandler","email":"[REDACTED]","emailVerified":"[REDACTED]"}
Query: select "user_id", "email", "first_name", "last_name", "password_hash", "email_verified", "is_active", "created_at", "updated_at", "deleted_at" from "users" where "users"."email" = $1 limit $2 -- params: ["pj@illumination.health", 1]
Query: insert into "refresh_tokens" ("token_id", "user_id", "token_hash", "device_fingerprint", "ip_address", "user_agent", "remember_me", "issued_at", "expires_at", "last_used", "is_active", "revoked_at", "revoked_reason", "rotation_count", "created_at") values ($1, $2, $3, $4, $5, $6, $7, default, $8, default, default, default, default, $9, default) -- params: ["s2RqCqTyHVwnE_g5Otu-LtU5d6SxbQ0F", "cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", "51064a1225f9b16b150eebabf6b659ffb7c1acc526ecf133acf1e84b0c290767", "13b197eeb712468ac5b56dbf7be43c43", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", false, "2025-10-17T19:03:00.069Z", 0]
Query: insert into "user_sessions" ("session_id", "user_id", "refresh_token_id", "device_fingerprint", "device_name", "ip_address", "user_agent", "remember_me", "is_active", "last_activity", "created_at", "ended_at", "end_reason") values ($1, $2, $3, $4, $5, $6, $7, $8, default, default, default, default, default) -- params: ["R4a6saGShIFnDCqORJbv6LTb2Rv29eZD", "cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", "s2RqCqTyHVwnE_g5Otu-LtU5d6SxbQ0F", "13b197eeb712468ac5b56dbf7be43c43", "Chrome Browser", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", false]
Query: insert into "login_attempts" ("attempt_id", "email", "user_id", "ip_address", "user_agent", "device_fingerprint", "success", "failure_reason", "remember_me_requested", "session_id", "attempted_at") values ($1, $2, $3, $4, $5, $6, $7, default, $8, $9, default) -- params: ["iB9ia9NwAn52_dVWj0w8i", "pj@illumination.health", "cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "13b197eeb712468ac5b56dbf7be43c43", true, false, "R4a6saGShIFnDCqORJbv6LTb2Rv29eZD"]
{"@timestamp":"2025-10-10T19:03:00.077Z","level":"INFO","message":"Auth: login","service":"bendcare-os","env":"development","file":"audit.ts","line":17,"function":"AuditLoggerService.logAuth","component":"auth","action":"login","success":true,"userId":"[UUID]","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","email":"[REDACTED]","authMethod":"oidc","sessionId":"R4a6saGShIFnDCqORJbv6LTb2Rv29eZD","refreshTokenId":"[REDACTED]","rememberMe":false,"deviceFingerprint":"13b197eeb712468ac5b56dbf7be43c43","deviceName":"Chrome Browser"}
{"@timestamp":"2025-10-10T19:03:00.078Z","level":"INFO","message":"Audit event processed","service":"bendcare-os","env":"development","file":"audit.ts","line":25,"function":"AuditLoggerService.logAuth","eventType":"auth","action":"login","severity":"medium","complianceFramework":"HIPAA","retentionPeriod":"7_years"}
Query: insert into "audit_logs" ("audit_log_id", "event_type", "action", "user_id", "ip_address", "user_agent", "resource_type", "resource_id", "old_values", "new_values", "metadata", "severity", "created_at") values ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) -- params: ["6Kq3TxqqR4pNbCYAXhiqO", "auth", "login", "cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", "::1", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", null, null, null, null, "{\"email\":\"pj@illumination.health\",\"authMethod\":\"oidc\",\"sessionId\":\"R4a6saGShIFnDCqORJbv6LTb2Rv29eZD\",\"refreshTokenId\":\"s2RqCqTyHVwnE_g5Otu-LtU5d6SxbQ0F\",\"rememberMe\":false,\"deviceFingerprint\":\"13b197eeb712468ac5b56dbf7be43c43\",\"deviceName\":\"Chrome Browser\"}", "medium", "2025-10-10T19:03:00.078Z"]
{"@timestamp":"2025-10-10T19:03:00.080Z","level":"DEBUG","message":"Audit log created","service":"bendcare-os","env":"development","file":"audit.ts","line":145,"function":"AuditLoggerService.log","eventType":"auth","action":"login","userId":"[UUID]","severity":"medium","operation":"createAuditLog","component":"audit-system","feature":"compliance-logging"}
{"@timestamp":"2025-10-10T19:03:00.080Z","level":"INFO","message":"OIDC callback successful - user authenticated","service":"bendcare-os","env":"development","file":"route.ts","line":348,"function":"oidcCallbackHandler","operation":"oidc_callback","success":true,"userId":"[UUID]","email":"[REDACTED]","authMethod":"oidc","sessionId":"R4a6saGShIFnDCqORJbv6LTb2Rv29eZD","ipAddress":"[REDACTED]","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","deviceName":"Chrome Browser","deviceFingerprint":"13b197ee","securityValidations":{"sessionDecryption":"passed","stateCsrfProtection":"passed","stateReplayPrevention":"passed","deviceFingerprintCheck":"passed","pkceValidation":"passed","emailVerification":"[REDACTED]","emailDomain":"[REDACTED]","profileSanitization":"passed","userProvisioning":"existing","userActiveStatus":"active"},"duration":611,"component":"auth","severity":"info"}
{"@timestamp":"2025-10-10T19:03:00.081Z","level":"INFO","message":"OIDC callback redirect","service":"bendcare-os","env":"development","file":"route.ts","line":405,"function":"oidcCallbackHandler","requestedReturnUrl":"/dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43","resolvedReturnUrl":"/dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43","baseUrl":"http://localhost:4001/api/auth/oidc/callback?code=1.ASkA4o8m4HYxwEqM718ZJd1JDq5arkSCS7dDreiVxdfAXZUpAE0pAA.AgABBAIAAABlMNzVhAPUTrARzfQjWPtKAwDs_wUA9P-llw4c277349wKv1qf_fXu6ZRc3OAPVQYCcV14xRnwxtFRgH0rAYIsiZjYMBkCfpKreZnQurWhrW1WO5pZJdeH6eBAnt0k6gNc4-QJUDN77HjTCg-rXXWs_TExbGrZVTdon_4kVBKgpq18tn3tIYTnqCRBOVaFU7LQIuEF9cjgC004TQMimHKHhVkGKVnt5gVlPg11YirlvbSslodhyekap3c3lr81-Ho85UHJvKZs4REiuW_XoJoGpnsPwDJ0e-eXCZCokZn7WHxlXmBpqekY-cYVV6p8wE8IkJWHDsScei5LvJNGmPyGI_b-vOETdXHoaIA8-ppoUqi2KAwUEM-Gy-mHOlEolhXjerK_wb1_wbqG0o1SGQgTTm6SlsxXpbXkPLy6jYjJ8ZYXzUwbauKfQbPZPsim71SFinDO5p32sDmoTYQCkOaxxpgjpzrtmof1qGjNEl21Dn4p26c-9UbZLguZRJxSy98R7inyjA4oo0ctKvMrw5XjbS7fK_bqGnLYEv8t5T3zOinW4fM_Ywc8hFoNBSJdG3uwAGXASkY4OhHlk1JP4itLf2yRK8u2_ZNzapkqpdiGJMiSVe-2odfnIeU00sGJw2owtkFy-dIc4wyLJcZD44ZW70TEvrpsq_3RvTQNp3invRNoB3-rIJ4Q6WVH0bbZ5gNtNmSPqbWQ6TToASOOH6n5DHRGO9t4IHal9ycP_HxPXzjZPKD5IXqLRgxvY16FcFbuN1jd_3SEO1O0QOjCaH4Zal4F_GJBcyrUx78cbVgyCH51qc05bEbiPlXYSiswzXwALJX8e5SusDu5kLTHLnPY_w2DvsZF4sRysjUsJ0gsBr-bZWaa6pRO5_1zlhMLopNdVP37ZBEv2b9Ow_mpKfkpUk-7MCWWPl-uxCmxyP_0kBRorPaTUOA&state=S4xnudv9ai2QWHSh2BgHiNsxV02gwdLe0Cb7MELnYk0&session_state=008cb789-1185-0cdd-3831-9608c634a050","finalRedirect":"http://localhost:4001/authenticating?returnUrl=%2Fdashboard%2Fview%2F30d9570d-5a7f-4553-a72b-0a54430daa43"}
 GET /api/auth/oidc/callback?code=1.ASkA4o8m4HYxwEqM718ZJd1JDq5arkSCS7dDreiVxdfAXZUpAE0pAA.AgABBAIAAABlMNzVhAPUTrARzfQjWPtKAwDs_wUA9P-llw4c277349wKv1qf_fXu6ZRc3OAPVQYCcV14xRnwxtFRgH0rAYIsiZjYMBkCfpKreZnQurWhrW1WO5pZJdeH6eBAnt0k6gNc4-QJUDN77HjTCg-rXXWs_TExbGrZVTdon_4kVBKgpq18tn3tIYTnqCRBOVaFU7LQIuEF9cjgC004TQMimHKHhVkGKVnt5gVlPg11YirlvbSslodhyekap3c3lr81-Ho85UHJvKZs4REiuW_XoJoGpnsPwDJ0e-eXCZCokZn7WHxlXmBpqekY-cYVV6p8wE8IkJWHDsScei5LvJNGmPyGI_b-vOETdXHoaIA8-ppoUqi2KAwUEM-Gy-mHOlEolhXjerK_wb1_wbqG0o1SGQgTTm6SlsxXpbXkPLy6jYjJ8ZYXzUwbauKfQbPZPsim71SFinDO5p32sDmoTYQCkOaxxpgjpzrtmof1qGjNEl21Dn4p26c-9UbZLguZRJxSy98R7inyjA4oo0ctKvMrw5XjbS7fK_bqGnLYEv8t5T3zOinW4fM_Ywc8hFoNBSJdG3uwAGXASkY4OhHlk1JP4itLf2yRK8u2_ZNzapkqpdiGJMiSVe-2odfnIeU00sGJw2owtkFy-dIc4wyLJcZD44ZW70TEvrpsq_3RvTQNp3invRNoB3-rIJ4Q6WVH0bbZ5gNtNmSPqbWQ6TToASOOH6n5DHRGO9t4IHal9ycP_HxPXzjZPKD5IXqLRgxvY16FcFbuN1jd_3SEO1O0QOjCaH4Zal4F_GJBcyrUx78cbVgyCH51qc05bEbiPlXYSiswzXwALJX8e5SusDu5kLTHLnPY_w2DvsZF4sRysjUsJ0gsBr-bZWaa6pRO5_1zlhMLopNdVP37ZBEv2b9Ow_mpKfkpUk-7MCWWPl-uxCmxyP_0kBRorPaTUOA&state=S4xnudv9ai2QWHSh2BgHiNsxV02gwdLe0Cb7MELnYk0&session_state=008cb789-1185-0cdd-3831-9608c634a050 307 in 1338ms
🌐 MIDDLEWARE: Processing request for: /authenticating
🌐 MIDDLEWARE: Public path detected, allowing through: /authenticating
 ○ Compiling /authenticating ...
 ✓ Compiled /authenticating in 1422ms (1983 modules)
 GET /authenticating?returnUrl=%2Fdashboard%2Fview%2F30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 1956ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 876ms (1988 modules)
{"@timestamp":"2025-10-10T19:03:03.433Z","level":"INFO","message":"GET /api/auth/me - User context request","service":"bendcare-os","env":"development","file":"route.ts","line":23,"function":"GET","correlationId":"cor_mgl7s15p_ne0bybq2","component":"api","method":"GET","path":"/api/auth/me","request":{}}
🌐 MIDDLEWARE: Processing request for: /authenticating
🌐 MIDDLEWARE: Public path detected, allowing through: /authenticating
 GET /authenticating?returnUrl=%2Fdashboard%2Fview%2F30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 77ms
{"@timestamp":"2025-10-10T19:03:03.546Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":1,"remaining":199,"limit":200}
{"@timestamp":"2025-10-10T19:03:03.547Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"route.ts","line":28,"function":"GET","duration":113}
{"@timestamp":"2025-10-10T19:03:03.547Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
🔐 AUTH: Using access token from httpOnly cookie
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["d6IsVTqPYHxFjRGky--sT", 1]
{"@timestamp":"2025-10-10T19:03:03.587Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"R4a6saGShIFnDCqORJbv6LTb2Rv29eZD","tokenSource":"[REDACTED]","validationDuration":40}
🔐 AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-10T19:03:03.691Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":256,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":89,"fromRedis":true}
{"@timestamp":"2025-10-10T19:03:03.691Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"R4a6saGShIFnDCqORJbv6LTb2Rv29eZD","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":89,"duration":144}
{"@timestamp":"2025-10-10T19:03:03.691Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-10T19:03:03.691Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":144,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":90}
{"@timestamp":"2025-10-10T19:03:03.691Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"route.ts","line":34,"function":"GET","duration":144}
{"@timestamp":"2025-10-10T19:03:03.691Z","level":"INFO","message":"User context retrieved successfully","service":"bendcare-os","env":"development","file":"route.ts","line":46,"function":"GET","userId":"[UUID]","roleCount":1,"permissionCount":89,"organizationCount":0,"duration":258}
 GET /api/auth/me 200 in 1327ms
🌐 MIDDLEWARE: Processing request for: /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 ○ Compiling /dashboard/view/[dashboardId] ...
 ✓ Compiled /dashboard/view/[dashboardId] in 1746ms (2590 modules)
{"@timestamp":"2025-10-10T19:03:05.685Z","level":"INFO","message":"GET /api/csrf - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T19:03:05.686Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/csrf","requiredPermissions":[],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T19:03:05.750Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":2,"remaining":198,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T19:03:05.750Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T19:03:05.750Z","level":"DEBUG","message":"Route marked as public","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"reason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T19:03:05.751Z","level":"DEBUG","message":"Public route - skipping user context and RBAC checks","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":96,"function":"eval","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"endpoint":"/api/csrf","publicReason":"CSRF tokens must be available to anonymous users for login protection","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["d6IsVTqPYHxFjRGky--sT", 1]
{"@timestamp":"2025-10-10T19:03:05.756Z","level":"INFO","message":"CSRF token request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"getCSRFTokenHandler","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"isAuthenticated":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T19:03:05.757Z","level":"INFO","message":"Authenticated CSRF token generated","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"getCSRFTokenHandler","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T19:03:05.758Z","level":"INFO","message":"CSRF token issued successfully","service":"bendcare-os","env":"development","file":"route.ts","line":82,"function":"getCSRFTokenHandler","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"tokenType":"[REDACTED]","_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T19:03:05.758Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":103,"function":"eval","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":7,"statusCode":200,"isPublic":true,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
{"@timestamp":"2025-10-10T19:03:05.758Z","level":"INFO","message":"Public route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":109,"function":"eval","correlationId":"cor_mgl7s26v_semobxxj","method":"GET","path":"/api/csrf","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"endpoint":"/api/csrf","statusCode":200,"totalDuration":73,"_contextMetadata":{"method":"GET","path":"/api/csrf"}}
 GET /api/csrf 200 in 2056ms
 GET /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 2480ms
 ○ Compiling /api/admin/analytics/dashboards/[dashboardId] ...
 ✓ Compiled /api/admin/analytics/dashboards/[dashboardId] in 1427ms (2598 modules)
{"@timestamp":"2025-10-10T19:03:08.047Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.048Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.116Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":3,"remaining":197,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.116Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.116Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.184Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"type":"api","identifier":"::1","current":4,"remaining":196,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.184Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.184Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.252Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T19:03:08.266Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.266Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":82,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.266Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.266Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.266Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.267Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.267Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.267Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.267Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-10T19:03:08.272Z","level":"INFO","message":"dashboards list query completed - returned 4 of 4","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":4,"total":4,"published":4,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":18,"averageChartsPerDashboard":5,"page":1,"pageSize":4},"duration":4,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.272Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.272Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s49f_fqsfdvlk","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"userId":"[UUID]","statusCode":200,"totalDuration":225,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 1885ms
{"@timestamp":"2025-10-10T19:03:08.297Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.298Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.342Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":45,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.342Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.343Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":46,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.374Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.374Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.374Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.378Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43 - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.378Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.376Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
{"@timestamp":"2025-10-10T19:03:08.407Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":29,"type":"api","identifier":"::1","current":7,"remaining":193,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.408Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.408Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":30,"pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.436Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.436Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":62,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.436Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":94,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.436Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.436Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.437Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.437Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.437Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.437Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
{"@timestamp":"2025-10-10T19:03:08.438Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":60,"type":"api","identifier":"::1","current":8,"remaining":192,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.439Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.439Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-10T19:03:08.441Z","level":"INFO","message":"dashboards list query completed - returned 4 of 4","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":4,"total":4,"published":4,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":18,"averageChartsPerDashboard":5,"page":1,"pageSize":4},"duration":4,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.441Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-10T19:03:08.441Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s5q3_5rdai6ri","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","statusCode":200,"totalDuration":144,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 158ms
{"@timestamp":"2025-10-10T19:03:08.582Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.582Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":143,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.582Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":174,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.582Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.583Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.583Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.583Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.584Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.584Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:236:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-10T19:03:08.653Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":275,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:236:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43"]
{"@timestamp":"2025-10-10T19:03:08.695Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":111,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.695Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":111,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.695Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s49f_ps3eocp4","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":317,"userId":"[UUID]","statusCode":200,"totalDuration":317,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
 GET /api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 2303ms
{"@timestamp":"2025-10-10T19:03:08.718Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43 - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.718Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.755Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":9,"remaining":191,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.755Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.755Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.851Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"type":"api","identifier":"::1","current":10,"remaining":190,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.851Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.852Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.969Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":251,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.969Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":118,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.969Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":214,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.969Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":251,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.969Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.970Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.970Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.970Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:08.970Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:236:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-10T19:03:09.040Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":322,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:236:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43"]
{"@timestamp":"2025-10-10T19:03:09.092Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["30d9570d-5a7f-4553-a72b-0a54430daa43"]
{"@timestamp":"2025-10-10T19:03:09.107Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":137,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:09.107Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
{"@timestamp":"2025-10-10T19:03:09.107Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s61p_z6lxzj3x","method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":389,"userId":"[UUID]","statusCode":200,"totalDuration":389,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43"}}
 GET /api/admin/analytics/dashboards/30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 405ms
 ✓ Compiled /api/admin/analytics/charts in 446ms (2601 modules)
{"@timestamp":"2025-10-10T19:03:09.329Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.329Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.362Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":11,"remaining":189,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.362Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.362Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.392Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"type":"api","identifier":"::1","current":12,"remaining":188,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.392Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.392Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.457Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":129,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T19:03:09.465Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.466Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.466Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.466Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.466Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.466Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.466Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.466Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.466Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-10T19:03:09.471Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":5,"stacked-bar":1},"activeCount":13,"inactiveCount":0},"duration":5,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.471Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.471Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s623_b82frcxo","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","statusCode":200,"totalDuration":143,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 753ms
{"@timestamp":"2025-10-10T19:03:09.491Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.491Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.610Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":119,"type":"api","identifier":"::1","current":13,"remaining":187,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.610Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":119,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.611Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":120,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.662Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":171,"type":"api","identifier":"::1","current":14,"remaining":186,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.663Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":172,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.663Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":172,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.728Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.728Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":65,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.728Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.728Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.729Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.729Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":238,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.729Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.729Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":238,"userId":"[UUID]","permissions":["analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.729Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":238,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-10T19:03:09.734Z","level":"INFO","message":"charts list query completed - returned 13 of 13","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":13,"total":13,"chartTypeBreakdown":{"number":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1,"bar":5,"stacked-bar":1},"activeCount":13,"inactiveCount":0},"duration":5,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.734Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-10T19:03:09.734Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s6n9_pcbrrxb4","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":243,"userId":"[UUID]","statusCode":200,"totalDuration":243,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 257ms
 ✓ Compiled /api/admin/analytics/chart-data in 482ms (2614 modules)
{"@timestamp":"2025-10-10T19:03:10.152Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.152Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.153Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.153Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.153Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.153Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.153Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.153Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.153Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.153Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.154Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.154Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.183Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":15,"remaining":185,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.183Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.183Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.185Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":16,"remaining":184,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.185Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.185Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.185Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":17,"remaining":183,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.185Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.185Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.185Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":18,"remaining":182,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.185Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.186Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.186Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":19,"remaining":181,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.186Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.186Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.186Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":20,"remaining":180,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.186Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.186Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.214Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":63,"type":"api","identifier":"::1","current":21,"remaining":179,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.215Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.215Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.217Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"type":"api","identifier":"::1","current":22,"remaining":178,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.217Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.217Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.218Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":23,"remaining":177,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.218Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.218Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.218Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":24,"remaining":176,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.218Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.218Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.219Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":25,"remaining":175,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.219Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.219Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.219Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":26,"remaining":174,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.219Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.219Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.285Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T19:03:10.295Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.295Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.295Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.295Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":81,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":79,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":78,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":78,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":113,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.296Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.297Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.298Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.299Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.299Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.300Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.301Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.301Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.301Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.301Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.301Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.301Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.301Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.302Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.302Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.302Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.303Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.303Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.303Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.304Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.304Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.305Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.305Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.305Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.305Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.305Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.305Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.305Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.306Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.306Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.306Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.306Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.306Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.306Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.306Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.306Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:10.306Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.343Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.344Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":190,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.374Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.375Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.376Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":223,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.376Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":223,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.377Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":226,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.377Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":223,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.414Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":261,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.416Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.417Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":264,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.417Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":264,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.417Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":266,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.418Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":264,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.451Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.454Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.455Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.456Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.456Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.458Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":304,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.492Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.497Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.498Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.499Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.500Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.501Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":348,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.529Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":376,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.533Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":382,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:10.537Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":384,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.538Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":385,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.538Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":385,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:10.538Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":384,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:10.563Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":410,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:10.657Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":504,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:10.657Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":504,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:10.658Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":505,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '795ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '828ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '714ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '824ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '734ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '747ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: { duration: '100ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:11.433Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1283,"seriesCount":2,"totalRecords":3081,"queryTime":1128,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.434Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1283,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1128,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.434Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1283,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.435Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1284,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.442Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1143,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.446Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1148,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.446Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s6nw_4030bpmw","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1295,"userId":"[UUID]","statusCode":200,"totalDuration":1295,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
✅ QUERY RESULT: { duration: '80ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:11.448Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1294,"seriesCount":2,"totalRecords":3081,"queryTime":1141,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.448Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1294,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1141,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.448Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1294,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.448Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1294,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.449Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1148,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.453Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1152,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.453Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s6nw_85p8v2fg","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1299,"userId":"[UUID]","statusCode":200,"totalDuration":1299,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1942ms
✅ QUERY RESULT: { duration: '84ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:11.455Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1302,"seriesCount":2,"totalRecords":3081,"queryTime":1149,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.455Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1302,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1149,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.455Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1302,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.455Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1302,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.456Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1155,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.460Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1159,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.460Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s6zd_klofeh9y","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1307,"userId":"[UUID]","statusCode":200,"totalDuration":1307,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
✅ QUERY RESULT: { duration: '74ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:11.461Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1308,"seriesCount":2,"totalRecords":3081,"queryTime":1156,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.461Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1308,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1156,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.461Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1308,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.461Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1308,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.462Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1162,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.466Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1166,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.466Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s6nw_rsouprcm","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1313,"userId":"[UUID]","statusCode":200,"totalDuration":1313,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1956ms
 POST /api/admin/analytics/chart-data 200 in 1550ms
 POST /api/admin/analytics/chart-data 200 in 1956ms
✅ QUERY RESULT: { duration: '99ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:11.491Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1338,"seriesCount":2,"totalRecords":3081,"queryTime":1185,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.491Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1338,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1185,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.491Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1338,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.491Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1338,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.492Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1192,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.495Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1195,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.495Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s6nw_aukwn0lf","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1342,"userId":"[UUID]","statusCode":200,"totalDuration":1342,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1987ms
{"@timestamp":"2025-10-10T19:03:11.507Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.507Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
✅ QUERY RESULT: { duration: '112ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:11.518Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1365,"seriesCount":2,"totalRecords":3081,"queryTime":1212,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.518Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1365,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1212,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.518Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1365,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.519Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1366,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.519Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1219,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.522Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1222,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.522Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s6nw_iy1zl9fo","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1369,"userId":"[UUID]","statusCode":200,"totalDuration":1369,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 2013ms
{"@timestamp":"2025-10-10T19:03:11.541Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":27,"remaining":173,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.541Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.541Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.584Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"type":"api","identifier":"::1","current":28,"remaining":172,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.584Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.584Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.754Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T19:03:11.884Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":377,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.884Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":300,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.884Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":343,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.884Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":377,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.884Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.884Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":377,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.885Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.885Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":378,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.885Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":378,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.885Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":378,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.885Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":378,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.885Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":378,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.885Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":378,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:11.885Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":378,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:11.940Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":433,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.004Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":497,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
 ○ Compiling /api/admin/data-sources/[id]/query ...
{"@timestamp":"2025-10-10T19:03:12.097Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":590,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
 ✓ Compiled /api/admin/data-sources/[id]/query in 614ms (2620 modules)
{"@timestamp":"2025-10-10T19:03:12.240Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.240Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.241Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.241Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
(node:27198) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGINT listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(Use `node --trace-warnings ...` to show where the warning was created)
(node:27198) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGTERM listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
{"@timestamp":"2025-10-10T19:03:12.252Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":745,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.260Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.261Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.261Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.261Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.280Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":40,"type":"api","identifier":"::1","current":29,"remaining":171,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.280Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":40,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.280Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":40,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.285Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"type":"api","identifier":"::1","current":30,"remaining":170,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.285Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.285Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.289Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":782,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.293Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":31,"remaining":169,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.293Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.293Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.293Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":32,"remaining":168,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.293Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.293Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.312Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"type":"api","identifier":"::1","current":33,"remaining":167,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.312Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.312Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.316Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"type":"api","identifier":"::1","current":34,"remaining":166,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.316Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.316Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.324Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":817,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:12.324Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"type":"api","identifier":"::1","current":35,"remaining":165,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.324Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.324Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.324Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":63,"type":"api","identifier":"::1","current":36,"remaining":164,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.324Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":63,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.324Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":63,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.387Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":87,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":83,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":119,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.399Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":115,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.400Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.401Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.402Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.402Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.402Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.402Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.402Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.402Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.402Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.402Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.403Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.403Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":162,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.403Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.403Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.403Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.403Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.404Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.404Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.404Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.404Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":163,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.404Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.404Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.404Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.404Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.404Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.405Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.441Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":181,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.442Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":202,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.442Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":201,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.442Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":181,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
✅ QUERY RESULT: {
  duration: '142ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:12.495Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":234,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.495Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.496Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":255,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.496Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":256,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.533Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":272,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.533Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":273,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.534Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.534Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
✅ QUERY RESULT: { duration: '68ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:12.534Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1027,"seriesCount":2,"totalRecords":3081,"queryTime":649,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.534Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1027,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":649,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.534Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1027,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.535Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1028,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.536Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":651,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.539Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":654,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.539Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s86q_js3s96jr","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1032,"userId":"[UUID]","statusCode":200,"totalDuration":1032,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1063ms
{"@timestamp":"2025-10-10T19:03:12.558Z","level":"INFO","message":"POST /api/admin/analytics/chart-data - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.558Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/chart-data","requiredPermissions":["analytics:read:organization","analytics:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.580Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.580Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":320,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.581Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":320,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.581Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.590Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":37,"remaining":163,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.591Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.591Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.627Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":386,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.627Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":367,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.628Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":388,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.628Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":367,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.628Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":38,"remaining":162,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.628Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/admin/analytics/chart-data","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.628Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.636Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.636Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.634Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
{"@timestamp":"2025-10-10T19:03:12.759Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":518,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:12.761Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":521,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:12.761Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":500,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:12.761Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":501,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:12.761Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"type":"api","identifier":"::1","current":39,"remaining":161,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.761Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.761Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/chart-data","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":165,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":202,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"userId":"[UUID]","permissions":["analytics:read:organization","analytics:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.793Z","level":"INFO","message":"Transform chart data request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"transformChartDataHandler","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"requestingUserId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.794Z","level":"INFO","message":"Chart data request received","service":"bendcare-os","env":"development","file":"route.ts","line":47,"function":"transformChartDataHandler","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"requestingUserId":"[UUID]","chartType":"bar","hasMultipleSeries":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.794Z","level":"INFO","message":"Chart data request validated","service":"bendcare-os","env":"development","file":"route.ts","line":54,"function":"transformChartDataHandler","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"requestingUserId":"[UUID]","chartType":"bar","hasDataSourceId":false,"hasMultipleSeries":true,"hasPeriodComparison":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.794Z","level":"INFO","message":"Fetching measures from analytics database","service":"bendcare-os","env":"development","file":"route.ts","line":111,"function":"transformChartDataHandler","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"requestingUserId":"[UUID]","queryParams":{"frequency":"Monthly","hasFilters":false,"hasMultipleSeries":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:12.794Z","level":"INFO","message":"Building efficient multiple series analytics query","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":530,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"seriesCount":2,"measures":["Charges by Provider","Payments by Provider"],"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.795Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"type":"api","identifier":"::1","current":40,"remaining":160,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.795Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.795Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.831Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":273,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.882Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":246,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.883Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":87,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.883Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":122,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.883Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.884Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.884Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":248,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.885Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.886Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.886Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":250,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.887Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":"114","advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
{"@timestamp":"2025-10-10T19:03:12.889Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
{"@timestamp":"2025-10-10T19:03:12.895Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":259,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-10T19:03:12.898Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":3,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:12.898Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE practice_uid = $1 AND "date_value" >= $2 AND "date_value" <= $3 LIMIT 1000 -- params: [114, "2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-10T19:03:12.935Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":377,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:12.976Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":418,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:13.012Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":454,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
Query: select "data_source_id" from "chart_data_sources" where ("chart_data_sources"."table_name" = $1 and "chart_data_sources"."schema_name" = $2 and "chart_data_sources"."is_active" = $3) -- params: ["agg_app_measures", "ih", true]
{"@timestamp":"2025-10-10T19:03:13.048Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":490,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT practice, practice_primary, practice_uid, provider_name, measure, frequency as frequency, date_index as date_index, measure_value as measure_value, measure_type as measure_type\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '      ORDER BY measure, date_index ASC\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '912ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '915ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '915ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: {
  duration: '915ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
{"@timestamp":"2025-10-10T19:03:13.698Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":811,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.699Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":813,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.699Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s86q_vc03zqhq","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1063,"userId":"[UUID]","statusCode":200,"totalDuration":1063,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?practice_uid=114&start_date=2025-01-01&end_date=2025-10-06&chart_type=table&data_source_id=388&limit=1000&_t=1760122989491 200 in 2218ms
{"@timestamp":"2025-10-10T19:03:13.721Z","level":"INFO","message":"GET /api/admin/data-sources/388/query - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":41,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.721Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":42,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/data-sources/388/query","requiredPermissions":["data-sources:read:organization","data-sources:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.831Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"type":"api","identifier":"::1","current":41,"remaining":159,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.831Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":55,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.831Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
✅ QUERY RESULT: { duration: '156ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:13.831Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1590,"seriesCount":2,"totalRecords":3081,"queryTime":1427,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.831Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1590,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1427,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.832Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1591,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.832Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1591,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.834Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1433,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.837Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1436,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.837Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s86q_vidrp580","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1596,"userId":"[UUID]","statusCode":200,"totalDuration":1596,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 2359ms
✅ QUERY RESULT: { duration: '164ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:13.838Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1598,"seriesCount":2,"totalRecords":3081,"queryTime":1434,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.838Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1598,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1434,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.838Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1598,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.838Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1598,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.839Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1438,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.842Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1441,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.842Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s86q_81u5j47e","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1602,"userId":"[UUID]","statusCode":200,"totalDuration":1602,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 2365ms
✅ QUERY RESULT: { duration: '167ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:13.843Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1583,"seriesCount":2,"totalRecords":3081,"queryTime":1439,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.844Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1584,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1439,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.844Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1584,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.844Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1584,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.845Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1443,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.848Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1446,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.848Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s88b_zzay0gky","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1588,"userId":"[UUID]","statusCode":200,"totalDuration":1588,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 2315ms
✅ QUERY RESULT: {
  duration: '801ms',
  rowCount: 3081,
  sampleData: {
    practice: 'Sierra Pacific Arth Rheumatology Centers',
    practice_primary: 'Watrous, Daniel',
    practice_uid: 56,
    provider_name: 'Scott, Frank',
    measure: 'Charges by Provider',
    frequency: 'Monthly',
    date_index: '2025-02-28',
    measure_value: '269485',
    measure_type: 'currency'
  }
}
🔍 EXECUTING SQL: {
  sql: '\n' +
    '      SELECT COUNT(*) as count\n' +
    '      FROM ih.agg_app_measures\n' +
    '      WHERE measure = ANY($1) AND frequency = $2 AND date_index >= $3 AND date_index <= $4\n' +
    '    ',
  parameters: [
    [ 'Charges by Provider', 'Payments by Provider' ],
    'Monthly',
    '2025-01-01',
    '2025-09-18'
  ],
  paramCount: 4
}
✅ QUERY RESULT: { duration: '173ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:13.850Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1589,"seriesCount":2,"totalRecords":3081,"queryTime":1445,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.851Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1590,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1445,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.851Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1590,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.851Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1590,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.852Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1450,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.855Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1453,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.856Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s88g_i0i7slzu","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1595,"userId":"[UUID]","statusCode":200,"totalDuration":1595,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 2314ms
{"@timestamp":"2025-10-10T19:03:13.863Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"type":"api","identifier":"::1","current":42,"remaining":158,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.863Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":104,"function":"applyGlobalAuth","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"pathname":"/api/admin/data-sources/388/query","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.863Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
✅ QUERY RESULT: { duration: '75ms', rowCount: 1, sampleData: { count: '3081' } }
{"@timestamp":"2025-10-10T19:03:13.925Z","level":"INFO","message":"Efficient multiple series query completed","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":661,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1367,"seriesCount":2,"totalRecords":3081,"queryTime":1131,"userId":"[UUID]","measuresQueried":["Charges by Provider","Payments by Provider"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.926Z","level":"INFO","message":"Measures fetched successfully","service":"bendcare-os","env":"development","file":"route.ts","line":123,"function":"transformChartDataHandler","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1368,"requestingUserId":"[UUID]","measureCount":3081,"queryTimeMs":1131,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.926Z","level":"INFO","message":"Column metadata loaded","service":"bendcare-os","env":"development","file":"route.ts","line":143,"function":"transformChartDataHandler","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1368,"requestingUserId":"[UUID]","columnCount":0,"hasMetadata":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.926Z","level":"INFO","message":"Transformation parameters","service":"bendcare-os","env":"development","file":"route.ts","line":169,"function":"transformChartDataHandler","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1368,"requestingUserId":"[UUID]","transformChartType":"bar","groupBy":"provider_name","totalMeasures":3081,"sampleMeasures":[{"provider_name":"Scott, Frank","measure_value":"269485"},{"provider_name":"Kades, Wagdy","measure_value":"594023"},{"provider_name":"Kinter, Christopher","measure_value":"71482"},{"provider_name":"Guigui, Muriel","measure_value":"61605"},{"provider_name":"Munoz, George","measure_value":"1248655"}],"uniqueGroupValuesCount":309,"uniqueGroupValuesSample":["Scott, Frank","Kades, Wagdy","Kinter, Christopher","Guigui, Muriel","Munoz, George","Khorran, Kavita","Carter, Mary","Soto-Aguilar, Maria","Kanagasegar, Sivalingam","White, Robyn"],"hasNullValues":0,"hasUndefinedValues":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.927Z","level":"INFO","message":"Chart data transformed successfully","service":"bendcare-os","env":"development","file":"route.ts","line":201,"function":"transformChartDataHandler","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","requestingUserId":"[UUID]","duration":1134,"chartType":"bar","measureCount":3081,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.930Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1137,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
{"@timestamp":"2025-10-10T19:03:13.930Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s90g_v5qieffx","method":"POST","path":"/api/admin/analytics/chart-data","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1372,"userId":"[UUID]","statusCode":200,"totalDuration":1372,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/chart-data"}}
 POST /api/admin/analytics/chart-data 200 in 1385ms
{"@timestamp":"2025-10-10T19:03:13.931Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":210,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-10T19:03:13.938Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"userId":"[UUID]","rolesCount":1,"permissionsCount":89,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.938Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":126,"function":"applyGlobalAuth","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/data-sources/388/query","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":75,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.938Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":65,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.938Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":68,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.938Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":126,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.938Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":148,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"userId":"[UUID]","roleCount":1,"permissionCount":89,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.938Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":164,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.938Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":173,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"userId":"[UUID]","permissions":["data-sources:read:organization","data-sources:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.938Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":180,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.939Z","level":"INFO","message":"Data source query request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":97,"function":"queryDataSourceHandler","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":218,"requestingUserId":"[UUID]","dataSourceId":388,"limit":1000,"startDate":"2025-01-01","endDate":"2025-10-06","practiceUid":"114","advancedFiltersCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [388]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [388, true]
{"@timestamp":"2025-10-10T19:03:13.941Z","level":"INFO","message":"Data source columns query initiated","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":476,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":220,"userId":"[UUID]","dataSourceId":388,"isActive":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: select "column_id", "data_source_id", "column_name", "display_name", "column_description", "data_type", "is_filterable", "is_groupable", "is_measure", "is_dimension", "is_date_field", "is_measure_type", "is_time_period", "format_type", "sort_order", "default_aggregation", "display_icon", "icon_type", "icon_color_mode", "icon_color", "icon_mapping", "is_sensitive", "access_level", "allowed_values", "validation_rules", "example_value", "is_active", "created_at", "updated_at" from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) order by "chart_data_source_columns"."sort_order", "chart_data_source_columns"."column_name" limit $3 -- params: [388, true, 100]
{"@timestamp":"2025-10-10T19:03:13.943Z","level":"INFO","message":"Data source columns query completed","service":"bendcare-os","env":"development","file":"rbac-data-sources-service.ts","line":501,"function":"RBACDataSourcesService.getDataSourceColumns","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","dataSourceId":388,"columnCount":9,"duration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:13.943Z","level":"INFO","message":"Executing data source query","service":"bendcare-os","env":"development","file":"route.ts","line":269,"function":"queryDataSourceHandler","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"dataSourceId":388,"tableName":"ih.agg_table_data","columnsCount":9,"hasFilters":true,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
Query: SELECT entity_type, date_value, practice, practice_primary, entity_name, entity_text, entity_subtext, entity_id, created_at FROM ih.agg_table_data WHERE practice_uid = $1 AND "date_value" >= $2 AND "date_value" <= $3 LIMIT 1000 -- params: [114, "2025-01-01", "2025-10-06"]
{"@timestamp":"2025-10-10T19:03:14.009Z","level":"INFO","message":"Data source query completed","service":"bendcare-os","env":"development","file":"route.ts","line":278,"function":"queryDataSourceHandler","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":388,"rowCount":5,"duration":71,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:14.010Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":186,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
{"@timestamp":"2025-10-10T19:03:14.010Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgl7s9wp_n3we08k0","method":"GET","path":"/api/admin/data-sources/388/query","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"userId":"[UUID]","statusCode":200,"totalDuration":289,"_contextMetadata":{"method":"GET","path":"/api/admin/data-sources/388/query"}}
 GET /api/admin/data-sources/388/query?practice_uid=114&start_date=2025-01-01&end_date=2025-10-06&chart_type=table&data_source_id=388&limit=1000&_t=1760122989497 200 in 303ms
{"@timestamp":"2025-10-10T19:03:14.066Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":154,"function":"process.closeDb"}
 ✓ Compiled in 181ms (995 modules)
🌐 MIDDLEWARE: Processing request for: /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 95ms
 ✓ Compiled in 129ms (995 modules)
🌐 MIDDLEWARE: Processing request for: /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 ✓ Compiled in 188ms (995 modules)
 GET /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 178ms
🌐 MIDDLEWARE: Processing request for: /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/30d9570d-5a7f-4553-a72b-0a54430daa43 200 in 25ms
