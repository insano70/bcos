{"@timestamp":"2025-10-16T08:46:58.385Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2247,"chartType":"number","recordCount":46,"fetchDuration":2050,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.385Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2247,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.385Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2247,"component":"column-mapping-service","dataSourceId":3,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.385Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":630,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":2009,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.386Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2248,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.386Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":391,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":2050,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.386Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"BarChartHandler.fetchData","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2248,"chartType":"bar","recordCount":46,"queryTimeMs":2050,"cacheHit":true,"fetchDuration":2050,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.386Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2248,"chartType":"stacked-bar","recordCount":46,"fetchDuration":2050,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.386Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2248,"chartType":"stacked-bar","recordCount":46,"groupBy":"provider_name","colorPalette":"blue","stackingMode":"normal","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.386Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"stacked-bar","duration":0,"datasetCount":6,"labelCount":9,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.386Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2248,"chartType":"stacked-bar","datasetCount":6,"labelCount":9,"transformDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.386Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2248,"chartType":"stacked-bar","totalDuration":2061,"fetchDuration":2050,"transformDuration":0,"recordCount":46,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.387Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2249,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.387Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2249,"component":"column-mapping-service","dataSourceId":3,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.387Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":630,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":1428,"afterRBAC":1428,"finalRowCount":1428,"duration":2011,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.387Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2249,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.387Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":391,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":1428,"totalCount":5280122.160000001,"duration":2051,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.387Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"BarChartHandler.fetchData","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2249,"chartType":"bar","recordCount":1428,"queryTimeMs":2051,"cacheHit":true,"fetchDuration":2051,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.387Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2249,"chartType":"bar","recordCount":1428,"fetchDuration":2051,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.387Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2249,"chartType":"bar","recordCount":1428,"groupBy":"practice","colorPalette":"default","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.397Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"bar","duration":10,"datasetCount":1,"labelCount":281,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.397Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2259,"chartType":"bar","datasetCount":1,"labelCount":281,"transformDuration":10,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.397Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2259,"chartType":"bar","totalDuration":2069,"fetchDuration":2051,"transformDuration":10,"recordCount":1428,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.397Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2259,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.397Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2259,"component":"column-mapping-service","dataSourceId":3,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":630,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":2022,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2260,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":391,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":2061,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2260,"chartType":"dual-axis","recordCount":48,"queryTimeMs":2061,"cacheHit":true,"fetchDuration":2061,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2260,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2260,"component":"column-mapping-service","dataSourceId":3,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":630,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":1907,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2260,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":391,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":2061,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2260,"chartType":"dual-axis","recordCount":46,"queryTimeMs":2061,"cacheHit":true,"fetchDuration":2061,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.398Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":2062,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.399Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2261,"chartType":"dual-axis","recordCount":94,"fetchDuration":2062,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.399Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2261,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.399Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2261,"component":"column-mapping-service","dataSourceId":1,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.399Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":630,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":1501,"afterRBAC":1501,"finalRowCount":1501,"duration":1908,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.399Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2261,"component":"column-mapping-service","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.399Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":391,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":1,"measure":"Charges by Provider","rowCount":1501,"totalCount":1057348789,"duration":2061,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.464Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2326,"component":"chart-config-cache","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.464Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2326,"component":"column-mapping-service","dataSourceId":1,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.464Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":630,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":1580,"afterRBAC":1580,"finalRowCount":1580,"duration":1973,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.464Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2326,"component":"column-mapping-service","dataSourceId":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.465Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":391,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":1,"measure":"Payments by Provider","rowCount":1580,"totalCount":396105515,"duration":2127,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.465Z","level":"INFO","message":"Multiple series query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":727,"function":"AnalyticsQueryBuilder.queryMultipleSeries","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2327,"seriesCount":2,"totalRecords":3081,"queryTime":2127,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.465Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"BarChartHandler.fetchData","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2327,"chartType":"bar","recordCount":3081,"queryTimeMs":2127,"cacheHit":true,"fetchDuration":2127,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.465Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2327,"chartType":"bar","recordCount":3081,"fetchDuration":2127,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.465Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2327,"chartType":"bar","recordCount":3081,"groupBy":"provider_name","colorPalette":"default","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.467Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"bar","duration":2,"datasetCount":2,"labelCount":6,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.467Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2329,"chartType":"bar","datasetCount":2,"labelCount":6,"transformDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.467Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2329,"chartType":"bar","totalDuration":2139,"fetchDuration":2127,"transformDuration":2,"recordCount":3081,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
 ✓ Compiled in 212ms (1264 modules)
{"@timestamp":"2025-10-16T08:46:58.587Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":368,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2449,"datasourceId":3,"measure":"Cancellations","frequency":"Weekly","matchingKeys":"[REDACTED]","rowsReturned":199,"indexLookupDuration":1887,"fetchDuration":208,"totalDuration":2095,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.587Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":87,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2449,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":199,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.588Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":415,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2450,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":199,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.588Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2450,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.588Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":630,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":199,"afterRBAC":199,"finalRowCount":199,"duration":2216,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.588Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2450,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.588Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":391,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","practiceUid":114,"rowCount":199,"totalCount":199,"duration":2255,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.588Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"BarChartHandler.fetchData","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2450,"chartType":"bar","recordCount":199,"queryTimeMs":2255,"cacheHit":true,"fetchDuration":2255,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.588Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2450,"chartType":"stacked-bar","recordCount":199,"fetchDuration":2255,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.588Z","level":"INFO","message":"Transforming bar chart data","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":41,"function":"BarChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2450,"chartType":"stacked-bar","recordCount":199,"groupBy":"provider_name","colorPalette":"default","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.590Z","level":"INFO","message":"Bar chart data transformed","service":"bendcare-os","env":"development","file":"bar-chart-handler.ts","line":70,"function":"BarChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"stacked-bar","duration":2,"datasetCount":6,"labelCount":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.590Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2452,"chartType":"stacked-bar","datasetCount":6,"labelCount":39,"transformDuration":2,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.590Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2452,"chartType":"stacked-bar","totalDuration":2263,"fetchDuration":2255,"transformDuration":2,"recordCount":199,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.590Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1899,"type":"api","identifier":"::1","current":93,"remaining":107,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.591Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1900,"pathname":"/api/admin/monitoring/errors","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.591Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1900,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.591Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1869,"type":"api","identifier":"::1","current":94,"remaining":106,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.591Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1869,"pathname":"/api/admin/monitoring/metrics","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.591Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1869,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.591Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1858,"type":"api","identifier":"::1","current":95,"remaining":105,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.591Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1858,"pathname":"/api/admin/monitoring/slow-queries","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.591Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1858,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.592Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1837,"type":"api","identifier":"::1","current":96,"remaining":104,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.592Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1837,"pathname":"/api/admin/analytics/cache/stats","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.592Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1837,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.592Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1826,"type":"api","identifier":"::1","current":97,"remaining":103,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.592Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1826,"pathname":"/api/admin/monitoring/security-events","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.592Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1826,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.592Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2454,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.592Z","level":"DEBUG","message":"Column name resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":64,"function":"getColumnName","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2454,"dataSourceId":3,"columnType":"measure","resolvedName":"numeric_value","fromConfig":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"INFO","message":"Transforming metric chart data","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":90,"function":"MetricChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2455,"chartType":"number","recordCount":48,"aggregationType":"sum","valueColumn":"numeric_value","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"INFO","message":"Data aggregated","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":74,"function":"MetricChartHandler.aggregateData","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","aggregationType":"sum","valueColumn":"numeric_value","valueCount":48,"result":382,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2455,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"INFO","message":"Metric chart data transformed","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":153,"function":"MetricChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"number","duration":208,"aggregationType":"sum","aggregatedValue":382,"measureType":"count","datasetCount":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2455,"chartType":"number","datasetCount":1,"labelCount":0,"transformDuration":209,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2455,"chartType":"number","totalDuration":2267,"fetchDuration":2049,"transformDuration":209,"recordCount":48,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2455,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"DEBUG","message":"Column name resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":64,"function":"getColumnName","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2455,"dataSourceId":3,"columnType":"measure","resolvedName":"numeric_value","fromConfig":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"INFO","message":"Transforming metric chart data","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":90,"function":"MetricChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2455,"chartType":"number","recordCount":46,"aggregationType":"sum","valueColumn":"numeric_value","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"INFO","message":"Data aggregated","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":74,"function":"MetricChartHandler.aggregateData","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","aggregationType":"sum","valueColumn":"numeric_value","valueCount":46,"result":5289376.439999999,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.593Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2455,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"INFO","message":"Metric chart data transformed","service":"bendcare-os","env":"development","file":"metric-handler.ts","line":153,"function":"MetricChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","chartType":"number","duration":208,"aggregationType":"sum","aggregatedValue":5289376.439999999,"measureType":"currency","datasetCount":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2456,"chartType":"number","datasetCount":1,"labelCount":0,"transformDuration":209,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2456,"chartType":"number","totalDuration":2268,"fetchDuration":2050,"transformDuration":209,"recordCount":46,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2456,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2456,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2456,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2456,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":247,"function":"ComboChartHandler.transform","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":195,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2456,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":195,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2456,"chartType":"dual-axis","totalDuration":2267,"fetchDuration":2062,"transformDuration":195,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":9,"cacheHits":9,"cacheMisses":0,"totalQueryTime":18752,"parallelDuration":2266,"duration":2280,"queryDeduplication":{"uniqueQueries":8,"queriesDeduped":1,"deduplicationRate":"11%","totalCharts":9,"queriesSaved":1},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.594Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2456,"uniqueQueries":8,"queriesDeduped":1,"deduplicationRate":"11%","totalRequests":9,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.595Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"renderDashboardHandler","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":2322,"metrics":{"chartsRendered":9,"queriesExecuted":9,"cacheHits":9,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":18752,"parallelExecution":true,"filtersApplied":1,"nocache":false},"slow":true,"performance":{"target":2000,"actual":2322,"overTarget":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.601Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2329,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
{"@timestamp":"2025-10-16T08:46:58.601Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6etsi_pa6763v9","method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2463,"userId":"[UUID]","statusCode":200,"totalDuration":2463,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render"}}
 POST /api/admin/analytics/dashboard/6db475e1-ad7b-45ca-8845-226a0d9a3b0a/render 200 in 2517ms
{"@timestamp":"2025-10-16T08:46:58.687Z","level":"INFO","message":"GET /api/admin/monitoring/at-risk-users - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":46,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.687Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/monitoring/at-risk-users","requiredPermissions":["settings:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.721Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":98,"remaining":102,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.721Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":60,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.721Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/monitoring/at-risk-users","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.734Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2043,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2049,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2018,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2007,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1985,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1974,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/monitoring/errors","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":149,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/monitoring/metrics","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":149,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/monitoring/slow-queries","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":149,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/cache/stats","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":148,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.740Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/monitoring/security-events","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":148,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":360,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2050,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2050,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":361,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2019,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2019,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":361,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2008,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2008,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":361,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1986,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1986,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":361,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1975,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1975,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.741Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["settings:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.742Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2051,"userId":"[UUID]","permissions":["settings:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.742Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2051,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.742Z","level":"INFO","message":"Errors query initiated","service":"bendcare-os","env":"development","file":"route.ts","line":28,"function":"errorsHandler","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2051,"operation":"query_errors","timeRange":"1h","limit":20,"component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.742Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["settings:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.742Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2020,"userId":"[UUID]","permissions":["settings:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.742Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2020,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["settings:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2010,"userId":"[UUID]","permissions":["settings:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2010,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"Slow queries request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":35,"function":"slowQueriesHandler","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2010,"operation":"query_slow_queries","timeRange":"1h","threshold":500,"limit":10,"component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["settings:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1988,"userId":"[UUID]","permissions":["settings:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1988,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"Analytics cache stats request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":33,"function":"analyticsCacheStatsHandler","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1988,"operation":"analytics_cache_stats","component":"analytics-cache-admin","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","permissions":["settings:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1977,"userId":"[UUID]","permissions":["settings:read:all"],"rbacDuration":2,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.743Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1977,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"Security events query initiated","service":"bendcare-os","env":"development","file":"route.ts","line":30,"function":"securityEventsHandler","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1978,"operation":"query_security_events","timeRange":"1h","limit":50,"component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"DEBUG","message":"CloudWatch queries disabled in development mode","service":"bendcare-os","env":"development","file":"cloudwatch-queries.ts","line":45,"function":"querySecurityEvents","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1978,"operation":"query_security_events","component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"Errors retrieved","service":"bendcare-os","env":"development","file":"route.ts","line":71,"function":"errorsHandler","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"query_errors","duration":2,"errorCount":0,"component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"Slow queries retrieved","service":"bendcare-os","env":"development","file":"route.ts","line":89,"function":"slowQueriesHandler","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"query_slow_queries","duration":1,"queryCount":0,"avgDuration":0,"component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name" from "chart_data_sources" where "chart_data_sources"."is_active" = $1 order by "chart_data_sources"."data_source_name" -- params: [true]
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"Security events retrieved","service":"bendcare-os","env":"development","file":"route.ts","line":56,"function":"securityEventsHandler","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"query_security_events","duration":0,"eventCount":0,"timeRange":"1h","component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6eu87_po82g1y7","method":"GET","path":"/api/admin/monitoring/errors","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2053,"userId":"[UUID]","statusCode":200,"totalDuration":2053,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/errors"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6eu8c_wyxu5w8v","method":"GET","path":"/api/admin/monitoring/slow-queries","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2011,"userId":"[UUID]","statusCode":200,"totalDuration":2011,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/slow-queries"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
{"@timestamp":"2025-10-16T08:46:58.744Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6eu8i_hrtfugt5","method":"GET","path":"/api/admin/monitoring/security-events","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1978,"userId":"[UUID]","statusCode":200,"totalDuration":1978,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/security-events"}}
 GET /api/admin/monitoring/errors?timeRange=1h&limit=20 200 in 2098ms
 GET /api/admin/monitoring/slow-queries?limit=10 200 in 2090ms
 GET /api/admin/monitoring/security-events?timeRange=1h 200 in 2083ms
🌐 MIDDLEWARE: Processing request for: /dashboard/view/6db475e1-ad7b-45ca-8845-226a0d9a3b0a
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Processing request for: /admin/command-center
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
{"@timestamp":"2025-10-16T08:46:58.754Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":99,"remaining":101,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.755Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/monitoring/at-risk-users","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.755Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
Query: select COUNT(*) FILTER (WHERE "suspicious_activity_detected" = true), COUNT(*) FILTER (WHERE "locked_until" > $1) from "account_security" -- params: ["2025-10-16T08:46:58.775Z"]
{"@timestamp":"2025-10-16T08:46:58.777Z","level":"ERROR","message":"Failed to get security metrics","service":"bendcare-os","env":"development","file":"route.ts","line":290,"function":"getSecurityMetrics","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2055,"error":{"name":"Error","message":"Failed query: select COUNT(*) FILTER (WHERE \"suspicious_activity_detected\" = true), COUNT(*) FILTER (WHERE \"locked_until\" > $1) from \"account_security\"\nparams: Thu Oct 16 2025 04:46:58 GMT-0400 (Eastern Daylight Time)","stack":["Error: Failed query: select COUNT(*) FILTER (WHERE \"suspicious_activity_detected\" = true), COUNT(*) FILTER (WHERE \"locked_until\" > $1) from \"account_security\"","params: Thu Oct 16 2025 04:46:58 GMT-0400 (Eastern Daylight Time)","at PostgresJsPreparedQuery.queryWithCache (webpack-internal:///(rsc)/./node_modules/.pnpm/drizzle-orm@0.44.6_postgres@3.4.7/node_modules/drizzle-orm/pg-core/session.js:53:15)","at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","at async eval (webpack-internal:///(rsc)/./node_modules/.pnpm/drizzle-orm@0.44.6_postgres@3.4.7/node_modules/drizzle-orm/postgres-js/session.js:50:20)","at async getSecurityMetrics (webpack-internal:///(rsc)/./app/api/admin/monitoring/metrics/route.ts:276:33)","at async metricsHandler (webpack-internal:///(rsc)/./app/api/admin/monitoring/metrics/route.ts:42:33)","at async eval (webpack-internal:///(rsc)/./lib/api/rbac-route-handler.ts:203:38)","at async AppRouteRouteModule.do (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)","at async AppRouteRouteModule.handle (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)","at async responseGenerator (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fmonitoring%2Fmetrics%2Froute&page=%2Fapi%2Fadmin%2Fmonitoring%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmonitoring%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)","at async AppRouteRouteModule.handleResponse (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)","at async handleResponse (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fmonitoring%2Fmetrics%2Froute&page=%2Fapi%2Fadmin%2Fmonitoring%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmonitoring%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)","at async handler (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fmonitoring%2Fmetrics%2Froute&page=%2Fapi%2Fadmin%2Fmonitoring%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmonitoring%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)","at async DevServer.renderToResponseWithComponentsImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1422:9)","at async DevServer.renderPageComponent (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1474:24)","at async DevServer.renderToResponseImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1514:32)","at async DevServer.pipeImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1025:25)","at async NextNodeServer.handleCatchallRenderRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/next-server.js:393:17)","at async DevServer.handleRequestImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:916:17)","at async /Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:399:20","at async Span.traceAsyncFn (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/trace/trace.js:157:20)","at async DevServer.handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:395:24)","at async invokeRender (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:240:21)","at async handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:437:24)","at async requestHandlerImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:485:13)","at async Server.requestListener (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/start-server.js:226:13)"],"cause":{"name":"TypeError","message":"The \"string\" argument must be of type string or an instance of Buffer or ArrayBuffer. Received an instance of Date","stack":["TypeError: The \"string\" argument must be of type string or an instance of Buffer or ArrayBuffer. Received an instance of Date","at Buffer.byteLength (node:buffer:787:11)","at reset.str (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/bytes.js:26:27)","at eval (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:959:65)","at Array.forEach (<anonymous>)","at Bind (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:949:16)","at prepared (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:219:7)","at ParameterDescription (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:628:58)","at handle (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:495:6)","at Socket.data (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:330:9)","at Socket.emit (node:events:508:28)","at addChunk (node:internal/streams/readable:559:12)","at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)","at Readable.push (node:internal/streams/readable:390:5)","at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","at TCP.callbackTrampoline (node:internal/async_hooks:130:17)"],"code":"ERR_INVALID_ARG_TYPE","query":"select COUNT(*) FILTER (WHERE \"suspicious_activity_detected\" = true), COUNT(*) FILTER (WHERE \"locked_until\" > $1) from \"account_security\"","parameters":["2025-10-16T08:46:58.775Z"],"args":["2025-10-16T08:46:58.775Z"],"types":[1184]},"query":"select COUNT(*) FILTER (WHERE \"suspicious_activity_detected\" = true), COUNT(*) FILTER (WHERE \"locked_until\" > $1) from \"account_security\"","params":["2025-10-16T08:46:58.775Z"]},"operation":"get_security_metrics","component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.778Z","level":"INFO","message":"Monitoring metrics retrieved","service":"bendcare-os","env":"development","file":"route.ts","line":115,"function":"metricsHandler","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"get_monitoring_metrics","duration":36,"systemHealth":75,"activeUsers":1,"requestsPerSec":0.006666666666666667,"component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.778Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
{"@timestamp":"2025-10-16T08:46:58.778Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6eu8c_q95ppr0q","method":"GET","path":"/api/admin/monitoring/metrics","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2056,"userId":"[UUID]","statusCode":200,"totalDuration":2056,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/metrics"}}
 GET /api/admin/monitoring/metrics 200 in 2123ms
{"@timestamp":"2025-10-16T08:46:58.818Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":46,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.818Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.848Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":162,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
{"@timestamp":"2025-10-16T08:46:58.868Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":50,"type":"api","identifier":"::1","current":100,"remaining":100,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.868Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":60,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":50,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.868Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":50,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-16T08:46:58.876Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":190,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.876Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/monitoring/at-risk-users","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":121,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.876Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.877Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.877Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.877Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.877Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["settings:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.877Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"userId":"[UUID]","permissions":["settings:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.877Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.877Z","level":"INFO","message":"At-risk users query initiated","service":"bendcare-os","env":"development","file":"route.ts","line":33,"function":"atRiskUsersHandler","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"operation":"query_at_risk_users","limit":100,"minRiskScore":0,"component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
Query: select "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "account_security"."failed_login_attempts", "account_security"."last_failed_attempt", "account_security"."locked_until", "account_security"."suspicious_activity_detected", "account_security"."lockout_reason" from "users" left join "account_security" on "users"."user_id" = "account_security"."user_id" where ("account_security"."failed_login_attempts" > $1 or "account_security"."locked_until" > $2 or "account_security"."suspicious_activity_detected" = $3) order by "account_security"."failed_login_attempts" DESC, "account_security"."last_failed_attempt" DESC NULLS LAST limit $4 -- params: [0, "2025-10-16T08:46:58.877Z", true, 100]
 GET /admin/command-center 200 in 121ms
Query: select "user_id", COUNT(*) FILTER (WHERE "attempted_at" > $1), COUNT(DISTINCT "ip_address") FILTER (WHERE "attempted_at" > $2) from "login_attempts" where "login_attempts"."user_id" = ANY(($3)) group by "login_attempts"."user_id" -- params: ["2025-10-15T08:46:58.877Z", "2025-10-09T08:46:58.877Z", "cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f"]
{"@timestamp":"2025-10-16T08:46:58.881Z","level":"ERROR","message":"Failed to get at-risk users","service":"bendcare-os","env":"development","file":"route.ts","line":133,"function":"atRiskUsersHandler","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","error":{"name":"Error","message":"Failed query: select \"user_id\", COUNT(*) FILTER (WHERE \"attempted_at\" > $1), COUNT(DISTINCT \"ip_address\") FILTER (WHERE \"attempted_at\" > $2) from \"login_attempts\" where \"login_attempts\".\"user_id\" = ANY(($3)) group by \"login_attempts\".\"user_id\"\nparams: Wed Oct 15 2025 04:46:58 GMT-0400 (Eastern Daylight Time),Thu Oct 09 2025 04:46:58 GMT-0400 (Eastern Daylight Time),cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f","stack":["Error: Failed query: select \"user_id\", COUNT(*) FILTER (WHERE \"attempted_at\" > $1), COUNT(DISTINCT \"ip_address\") FILTER (WHERE \"attempted_at\" > $2) from \"login_attempts\" where \"login_attempts\".\"user_id\" = ANY(($3)) group by \"login_attempts\".\"user_id\"","params: Wed Oct 15 2025 04:46:58 GMT-0400 (Eastern Daylight Time),Thu Oct 09 2025 04:46:58 GMT-0400 (Eastern Daylight Time),cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f","at PostgresJsPreparedQuery.queryWithCache (webpack-internal:///(rsc)/./node_modules/.pnpm/drizzle-orm@0.44.6_postgres@3.4.7/node_modules/drizzle-orm/pg-core/session.js:53:15)","at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","at async eval (webpack-internal:///(rsc)/./node_modules/.pnpm/drizzle-orm@0.44.6_postgres@3.4.7/node_modules/drizzle-orm/postgres-js/session.js:50:20)","at async atRiskUsersHandler (webpack-internal:///(rsc)/./app/api/admin/monitoring/at-risk-users/route.ts:57:55)","at async eval (webpack-internal:///(rsc)/./lib/api/rbac-route-handler.ts:203:38)","at async AppRouteRouteModule.do (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)","at async AppRouteRouteModule.handle (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)","at async responseGenerator (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fmonitoring%2Fat-risk-users%2Froute&page=%2Fapi%2Fadmin%2Fmonitoring%2Fat-risk-users%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmonitoring%2Fat-risk-users%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)","at async AppRouteRouteModule.handleResponse (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)","at async handleResponse (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fmonitoring%2Fat-risk-users%2Froute&page=%2Fapi%2Fadmin%2Fmonitoring%2Fat-risk-users%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmonitoring%2Fat-risk-users%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)","at async handler (webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fmonitoring%2Fat-risk-users%2Froute&page=%2Fapi%2Fadmin%2Fmonitoring%2Fat-risk-users%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fmonitoring%2Fat-risk-users%2Froute.ts&appDir=%2FUsers%2Fpstewart%2Fbcos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpstewart%2Fbcos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)","at async DevServer.renderToResponseWithComponentsImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1422:9)","at async DevServer.renderPageComponent (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1474:24)","at async DevServer.renderToResponseImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1514:32)","at async DevServer.pipeImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:1025:25)","at async NextNodeServer.handleCatchallRenderRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/next-server.js:393:17)","at async DevServer.handleRequestImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-server.js:916:17)","at async /Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:399:20","at async Span.traceAsyncFn (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/trace/trace.js:157:20)","at async DevServer.handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/dev/next-dev-server.js:395:24)","at async invokeRender (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:240:21)","at async handleRequest (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:437:24)","at async requestHandlerImpl (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/router-server.js:485:13)","at async Server.requestListener (/Users/pstewart/bcos/node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/start-server.js:226:13)"],"cause":{"name":"TypeError","message":"The \"string\" argument must be of type string or an instance of Buffer or ArrayBuffer. Received an instance of Date","stack":["TypeError: The \"string\" argument must be of type string or an instance of Buffer or ArrayBuffer. Received an instance of Date","at Buffer.byteLength (node:buffer:787:11)","at reset.str (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/bytes.js:26:27)","at eval (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:959:65)","at Array.forEach (<anonymous>)","at Bind (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:949:16)","at prepared (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:219:7)","at ParameterDescription (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:628:58)","at handle (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:495:6)","at Socket.data (webpack-internal:///(rsc)/./node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:330:9)","at Socket.emit (node:events:508:28)","at addChunk (node:internal/streams/readable:559:12)","at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)","at Readable.push (node:internal/streams/readable:390:5)","at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","at TCP.callbackTrampoline (node:internal/async_hooks:130:17)"],"code":"ERR_INVALID_ARG_TYPE","query":"select \"user_id\", COUNT(*) FILTER (WHERE \"attempted_at\" > $1), COUNT(DISTINCT \"ip_address\") FILTER (WHERE \"attempted_at\" > $2) from \"login_attempts\" where \"login_attempts\".\"user_id\" = ANY(($3)) group by \"login_attempts\".\"user_id\"","parameters":["2025-10-15T08:46:58.877Z","2025-10-09T08:46:58.877Z","cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f"],"args":["2025-10-15T08:46:58.877Z","2025-10-09T08:46:58.877Z","cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f"],"types":[1184,1184,2951]},"query":"select \"user_id\", COUNT(*) FILTER (WHERE \"attempted_at\" > $1), COUNT(DISTINCT \"ip_address\") FILTER (WHERE \"attempted_at\" > $2) from \"login_attempts\" where \"login_attempts\".\"user_id\" = ANY(($3)) group by \"login_attempts\".\"user_id\"","params":["2025-10-15T08:46:58.877Z","2025-10-09T08:46:58.877Z","cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f"]},"operation":"query_at_risk_users","duration":4,"component":"monitoring","_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.882Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
{"@timestamp":"2025-10-16T08:46:58.882Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6evqn_2ewwmuiu","method":"GET","path":"/api/admin/monitoring/at-risk-users","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":196,"userId":"[UUID]","statusCode":200,"totalDuration":196,"_contextMetadata":{"method":"GET","path":"/api/admin/monitoring/at-risk-users"}}
 GET /api/admin/monitoring/at-risk-users?limit=100 200 in 275ms
 GET /dashboard/view/6db475e1-ad7b-45ca-8845-226a0d9a3b0a 200 in 122ms
🌐 MIDDLEWARE: Processing request for: /admin/command-center
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
{"@timestamp":"2025-10-16T08:46:58.907Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":89,"type":"api","identifier":"::1","current":101,"remaining":99,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.907Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":89,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.907Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":89,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.910Z","level":"WARN","message":"Failed to get memory usage sample","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":461,"function":"IndexedAnalyticsCache.getCacheStats","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2155,"error":{"command":{"name":"memory","args":["USAGE","cache:{ds:3}:m:Follow Up:p:114:prov:211:freq:Monthly"]}},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:58.917Z","level":"WARN","message":"Failed to get memory usage sample","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":461,"function":"IndexedAnalyticsCache.getCacheStats","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2162,"error":{"command":{"name":"memory","args":["USAGE","cache:{ds:1}:m:Payments by Provider:p:82:prov:29:freq:Quarterly"]}},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
 GET /admin/command-center 200 in 47ms
🌐 MIDDLEWARE: Processing request for: /admin/command-center
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /admin/command-center 200 in 29ms
{"@timestamp":"2025-10-16T08:46:58.984Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.984Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.984Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":116,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.984Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.984Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.984Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.984Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.984Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.984Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-16T08:46:58.989Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"index.ts","line":257,"function":"OrganizationsService.getOrganizations","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"service","query":{"duration":1,"slow":false},"enrichment":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.989Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.989Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:58.989Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6evuw_s4nbuw8z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":171,"userId":"[UUID]","statusCode":200,"totalDuration":171,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 225ms
{"@timestamp":"2025-10-16T08:46:59.013Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":46,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.013Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.137Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":124,"type":"api","identifier":"::1","current":102,"remaining":98,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.137Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":60,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":124,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.141Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":128,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.174Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"type":"api","identifier":"::1","current":103,"remaining":97,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.174Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.174Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.216Z","level":"INFO","message":"Analytics cache stats retrieved","service":"bendcare-os","env":"development","file":"route.ts","line":107,"function":"analyticsCacheStatsHandler","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"analytics_cache_stats","duration":473,"datasourcesTotal":3,"datasourcesWarm":2,"totalMemoryMB":0,"overallHitRate":0,"component":"analytics-cache-admin","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:59.217Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":474,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
{"@timestamp":"2025-10-16T08:46:59.218Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6eu8i_lzk4ejnh","method":"GET","path":"/api/admin/analytics/cache/stats","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2463,"userId":"[UUID]","statusCode":200,"totalDuration":2463,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/stats"}}
 GET /api/admin/analytics/cache/stats 200 in 2557ms
🌐 MIDDLEWARE: Processing request for: /dashboard/view/6db475e1-ad7b-45ca-8845-226a0d9a3b0a
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
{"@timestamp":"2025-10-16T08:46:59.257Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":244,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.258Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":84,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.259Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":120,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.259Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":246,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.260Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.260Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.261Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.262Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":249,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.262Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":249,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-16T08:46:59.284Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"index.ts","line":257,"function":"OrganizationsService.getOrganizations","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":22,"slow":false,"component":"service","query":{"duration":12,"slow":false},"enrichment":{"duration":10,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.284Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":22,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.284Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":22,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-16T08:46:59.285Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6ew1e_l3lakpei","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":272,"userId":"[UUID]","statusCode":200,"totalDuration":271,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 292ms
 GET /dashboard/view/6db475e1-ad7b-45ca-8845-226a0d9a3b0a 200 in 130ms
🌐 MIDDLEWARE: Processing request for: /dashboard/view/6db475e1-ad7b-45ca-8845-226a0d9a3b0a
🌐 MIDDLEWARE: Protected route detected
🌐 MIDDLEWARE: Checking auth - access token: true, refresh token: true
🌐 MIDDLEWARE: Access token valid - allowing access
🌐 MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/6db475e1-ad7b-45ca-8845-226a0d9a3b0a 200 in 131ms
{"@timestamp":"2025-10-16T08:47:01.678Z","level":"INFO","message":"GET /api/admin/analytics/cache/warming/status - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":46,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.678Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/cache/warming/status","requiredPermissions":["settings:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.794Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":116,"type":"api","identifier":"::1","current":1,"remaining":199,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.794Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":60,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":116,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.794Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":116,"pathname":"/api/admin/analytics/cache/warming/status","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.828Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"type":"api","identifier":"::1","current":2,"remaining":198,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.828Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"pathname":"/api/admin/analytics/cache/warming/status","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.828Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.890Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":212,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-16T08:47:01.899Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.899Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/cache/warming/status","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.899Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.899Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":221,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.899Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.900Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.900Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["settings:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.900Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"userId":"[UUID]","permissions":["settings:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.900Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.900Z","level":"INFO","message":"Warming status request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"warmingStatusHandler","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"operation":"warming_status","component":"analytics-cache-admin","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.900Z","level":"INFO","message":"Warming status retrieved","service":"bendcare-os","env":"development","file":"route.ts","line":55,"function":"warmingStatusHandler","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"warming_status","duration":0,"activeJobs":0,"recentJobs":0,"component":"analytics-cache-admin","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.900Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:01.900Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6ey35_atlahrdr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":222,"userId":"[UUID]","statusCode":200,"totalDuration":222,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
 GET /api/admin/analytics/cache/warming/status 200 in 250ms
{"@timestamp":"2025-10-16T08:47:03.675Z","level":"INFO","message":"GET /api/admin/analytics/cache/warming/status - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":46,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.675Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/cache/warming/status","requiredPermissions":["settings:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.708Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":3,"remaining":197,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.708Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":60,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.709Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/cache/warming/status","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.828Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"type":"api","identifier":"::1","current":4,"remaining":196,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.828Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"pathname":"/api/admin/analytics/cache/warming/status","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.828Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.891Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":224,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/cache/warming/status","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":190,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":224,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":224,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["settings:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":224,"userId":"[UUID]","permissions":["settings:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":224,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.899Z","level":"INFO","message":"Warming status request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"warmingStatusHandler","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":224,"operation":"warming_status","component":"analytics-cache-admin","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.900Z","level":"INFO","message":"Warming status retrieved","service":"bendcare-os","env":"development","file":"route.ts","line":55,"function":"warmingStatusHandler","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"warming_status","duration":1,"activeJobs":0,"recentJobs":0,"component":"analytics-cache-admin","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.900Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:03.900Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6ezml_vgwfskbr","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":225,"userId":"[UUID]","statusCode":200,"totalDuration":225,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
 GET /api/admin/analytics/cache/warming/status 200 in 254ms
{"@timestamp":"2025-10-16T08:47:05.660Z","level":"INFO","message":"GET /api/admin/analytics/cache/warming/status - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":46,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.660Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/cache/warming/status","requiredPermissions":["settings:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.691Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.691Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":60,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.691Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"pathname":"/api/admin/analytics/cache/warming/status","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.721Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.721Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"pathname":"/api/admin/analytics/cache/warming/status","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.721Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":61,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.785Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":125,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-16T08:47:05.791Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.791Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/cache/warming/status","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.791Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":70,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":100,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.791Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":73,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.791Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":144,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.791Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":166,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.792Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":182,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["settings:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.792Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":191,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"userId":"[UUID]","permissions":["settings:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.792Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":198,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.792Z","level":"INFO","message":"Warming status request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"warmingStatusHandler","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"operation":"warming_status","component":"analytics-cache-admin","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.792Z","level":"INFO","message":"Warming status retrieved","service":"bendcare-os","env":"development","file":"route.ts","line":55,"function":"warmingStatusHandler","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"warming_status","duration":0,"activeJobs":0,"recentJobs":0,"component":"analytics-cache-admin","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.792Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":204,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
{"@timestamp":"2025-10-16T08:47:05.792Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":210,"function":"eval","correlationId":"cor_mgt6f162_fnwggupl","method":"GET","path":"/api/admin/analytics/cache/warming/status","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"userId":"[UUID]","statusCode":200,"totalDuration":132,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/cache/warming/status"}}
 GET /api/admin/analytics/cache/warming/status 200 in 150ms
