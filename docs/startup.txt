Last login: Thu Oct 16 05:06:51 on ttys007
pstewart@Patricks-MacBook-Pro-2 ~ % cd bcos 
pstewart@Patricks-MacBook-Pro-2 bcos % ./dev.sh restart
================================
  BCOS Development Helper
================================
[INFO] Restarting BCOS application...
[INFO] Killing processes on port 4001...
[INFO] No processes found on port 4001
[INFO] Starting fresh development server...
[INFO] Starting development server on port 4001...

> bendcare-os@0.1.0 dev /Users/pstewart/bcos
> next dev -p ${PORT:-4001}

   ‚ñ≤ Next.js 15.5.3
   - Local:        http://localhost:4001
   - Network:      http://192.168.4.53:4001
   - Environments: .env.local, .env
   - Experiments (use with caution):
     ¬∑ optimizePackageImports

 ‚úì Starting...
 ‚úì Ready in 1328ms
 ‚úì Compiled /middleware in 261ms (407 modules)
üåê MIDDLEWARE: Processing request for: /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 ‚óã Compiling /dashboard/view/[dashboardId] ...
 ‚úì Compiled /dashboard/view/[dashboardId] in 1354ms (2054 modules)
 GET /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63 200 in 2216ms
 ‚óã Compiling /api/admin/analytics/dashboards/[dashboardId] ...
 ‚úì Compiled /api/admin/analytics/dashboards/[dashboardId] in 1552ms (2515 modules)
{"@timestamp":"2025-10-17T08:38:53.953Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:38:54.017Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkb2i_6r9fueey","duration":0,"component":"api","method":"GET","path":"/api/admin/analytics/dashboards","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:54.017Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkb2i_6r9fueey","duration":0,"endpoint":"/api/admin/analytics/dashboards","method":"GET","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
üåê MIDDLEWARE: Processing request for: /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63 200 in 77ms
{"@timestamp":"2025-10-17T08:38:54.417Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:38:54.449Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkb2i_rgxr0cud","duration":1,"component":"api","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:54.449Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkb2i_rgxr0cud","duration":1,"endpoint":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","method":"GET","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:54.536Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:38:54.570Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:38:55.106Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:38:55.145Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:38:55.181Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1164,"type":"api","identifier":"::1","current":2,"remaining":198,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.182Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1165,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.184Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1167,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.185Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":737,"type":"api","identifier":"::1","current":3,"remaining":197,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.186Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":737,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.186Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":738,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.213Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":1,"remaining":199,"limit":200}
{"@timestamp":"2025-10-17T08:38:55.214Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
üîê AUTH: Using access token from httpOnly cookie
{"@timestamp":"2025-10-17T08:38:55.220Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1203,"type":"api","identifier":"::1","current":4,"remaining":196,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.221Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1204,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.221Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1204,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.222Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":774,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.222Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":774,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.222Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":774,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["au_4QLdkxBqMZMeEIYRdW", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["au_4QLdkxBqMZMeEIYRdW", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["au_4QLdkxBqMZMeEIYRdW", 1]
{"@timestamp":"2025-10-17T08:38:55.280Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"mRkXh-2d1z5EZcVglhvy2C1HMXX6K6mX","tokenSource":"[REDACTED]","validationDuration":66}
üîê AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-17T08:38:55.319Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":871,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:38:55.341Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":893,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.342Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":120,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.342Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.343Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":895,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.343Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":895,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.343Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":895,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.344Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.344Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":896,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.344Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":896,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.345Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":30,"function":"getDashboardHandler","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":897,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:38:55.355Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":9,"slow":false,"component":"service","query":{"duration":5,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":3,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.355Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":42,"function":"getDashboardHandler","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":11,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.356Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":12,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-17T08:38:55.356Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkb2i_rgxr0cud","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":908,"userId":"[UUID]","statusCode":200,"totalDuration":908,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
 GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 200 in 3178ms
{"@timestamp":"2025-10-17T08:38:55.388Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":261,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":90,"fromRedis":true}
{"@timestamp":"2025-10-17T08:38:55.388Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"mRkXh-2d1z5EZcVglhvy2C1HMXX6K6mX","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":90,"duration":174}
{"@timestamp":"2025-10-17T08:38:55.388Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-17T08:38:55.388Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":174,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":91}
{"@timestamp":"2025-10-17T08:38:55.389Z","level":"INFO","message":"user context retrieved successfully from JWT token","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"GET","operation":"get_user_context","userId":"[UUID]","email":"[REDACTED]","rbac":{"roles":1,"permissions":90,"isSuperAdmin":true,"orgAdminFor":0},"organizations":{"direct":0,"accessible":0,"current":null},"duration":1427,"slow":true,"component":"auth","cached":true}
 GET /api/auth/me 200 in 3203ms
{"@timestamp":"2025-10-17T08:38:55.390Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1373,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.390Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":169,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.390Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":207,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.390Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1373,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.390Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1373,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.390Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1373,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.390Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.390Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1373,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.390Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1373,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
{"@timestamp":"2025-10-17T08:38:55.399Z","level":"INFO","message":"dashboards list query completed - returned 8 of 8","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":211,"function":"RBACDashboardsServiceImpl.getDashboards","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":8,"total":8,"page":1},"empty":false,"duration":8,"slow":false,"component":"service","query":{"duration":8,"slow":false},"rbacScope":"all","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-17T08:38:55.404Z","level":"INFO","message":"dashboards counted","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":366,"function":"RBACDashboardsServiceImpl.getDashboardCount","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"count_dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"count":8,"duration":5,"metadata":{"query":{"duration":5,"slow":false},"rbacScope":"all","component":"service"},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.404Z","level":"INFO","message":"dashboards list query completed - returned 8 of 8","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":8,"total":8,"published":8,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":30,"averageChartsPerDashboard":4,"page":1,"pageSize":8},"duration":13,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.404Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":14,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-17T08:38:55.405Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkb2i_6r9fueey","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1388,"userId":"[UUID]","statusCode":200,"totalDuration":1387,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 3232ms
 ‚úì Compiled /api/admin/analytics/charts in 293ms (2518 modules)
{"@timestamp":"2025-10-17T08:38:55.867Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkdjh_otgyzbgu","duration":0,"component":"api","method":"GET","path":"/api/admin/analytics/charts","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:55.868Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkdjh_otgyzbgu","duration":1,"endpoint":"/api/admin/analytics/charts","method":"GET","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:55.910Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":43,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:55.911Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":42,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:55.911Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":44,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:55.948Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":81,"type":"api","identifier":"::1","current":7,"remaining":193,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:55.948Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":81,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:55.948Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":81,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.021Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:38:56.031Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.032Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":84,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.032Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":121,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.032Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.032Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.032Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.033Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.033Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.033Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-17T08:38:56.039Z","level":"INFO","message":"charts list query completed - returned 15 of 15","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":15,"total":15,"chartTypeBreakdown":{"bar":5,"number":3,"stacked-bar":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1},"activeCount":15,"inactiveCount":0},"duration":6,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.040Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":6,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-17T08:38:56.040Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkdjh_otgyzbgu","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":173,"userId":"[UUID]","statusCode":200,"totalDuration":173,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 669ms
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:38:56.052Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
 ‚úì Compiled /api/admin/analytics/dashboard/[dashboardId]/render in 310ms (2562 modules)
{"@timestamp":"2025-10-17T08:38:56.517Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:38:56.518Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:38:56.518Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:38:56.518Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:38:56.518Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:38:56.518Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:38:56.518Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:38:56.518Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:38:56.518Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-17T08:38:56.856Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:38:56.874Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:38:56.874Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:38:56.874Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:38:56.874Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:38:56.874Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:38:56.874Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:38:56.874Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:38:56.874Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:38:56.874Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-17T08:38:56.892Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulke2b_g61rdbv3","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:56.892Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulke2b_g61rdbv3","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:56.929Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":8,"remaining":192,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:56.929Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:56.929Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:56.963Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":9,"remaining":191,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:56.963Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:56.964Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:56.973Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:38:57.011Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:38:57.032Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:38:57.047Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.047Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":84,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.047Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":118,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.047Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.047Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.047Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.048Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.048Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.048Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.048Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.050Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:38:57.054Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":4,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:38:57.056Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.056Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.056Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.057Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.057Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.057Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:38:57.059Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":167,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.060Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":168,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.060Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":168,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.060Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":168,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.060Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":168,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.060Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":168,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.061Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":169,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.061Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":169,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.061Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":169,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.061Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":169,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.095Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":203,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.096Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.128Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.128Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.165Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":273,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.200Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.235Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":343,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":69,"totalDuration":103,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.235Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":343,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.236Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.237Z","level":"DEBUG","message":"Column mapping cache miss - loading from config","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":62,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.238Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":37,"fetchDuration":38,"totalDuration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.238Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.239Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.239Z","level":"DEBUG","message":"Column mapping cache miss - loading from config","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":62,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.275Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":383,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.276Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":384,"component":"column-mapping-service","dataSourceId":3,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.276Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":180,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.277Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":385,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.278Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":216,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.278Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":386,"chartType":"dual-axis","recordCount":48,"queryTimeMs":216,"cacheHit":true,"fetchDuration":218,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.278Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":386,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.279Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":387,"component":"column-mapping-service","dataSourceId":3,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.279Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":151,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.279Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":387,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.280Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":218,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.280Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":388,"chartType":"dual-axis","recordCount":46,"queryTimeMs":218,"cacheHit":true,"fetchDuration":219,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.280Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":220,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.280Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":388,"chartType":"dual-axis","recordCount":94,"fetchDuration":220,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.315Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":423,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.317Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":425,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.318Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":426,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.318Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":426,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.319Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.319Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":427,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.319Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":427,"chartType":"dual-axis","totalDuration":262,"fetchDuration":220,"transformDuration":39,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.320Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":218,"parallelDuration":263,"duration":271,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.320Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":428,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.321Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":272,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":218,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":272,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.321Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":273,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:57.322Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulke2b_g61rdbv3","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":430,"userId":"[UUID]","statusCode":200,"totalDuration":430,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 1273ms
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:38:57.382Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
 ‚óã Compiling /api/organizations ...
 ‚úì Compiled /api/organizations in 543ms (2576 modules)
{"@timestamp":"2025-10-17T08:38:58.061Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkf2v_k8hjwt8g","duration":1,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.061Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkf2v_k8hjwt8g","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.086Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:38:58.086Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:38:58.086Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:38:58.086Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:38:58.087Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:38:58.087Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:38:58.087Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:38:58.087Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:38:58.087Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-17T08:38:58.098Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkf3a_i9uwwp94","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.098Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkf3a_i9uwwp94","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.099Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"type":"api","identifier":"::1","current":10,"remaining":190,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.099Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.099Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.133Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":11,"remaining":189,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.133Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.134Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.134Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"type":"api","identifier":"::1","current":12,"remaining":188,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.134Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.134Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.168Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":13,"remaining":187,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.168Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.168Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.205Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:38:58.212Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.212Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":78,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.212Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":113,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.212Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.212Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.212Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.213Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.213Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.213Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:58.220Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":6,"slow":false,"component":"core_service","query":{"duration":3,"slow":false},"memberCountQuery":{"duration":2,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.220Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":7,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.220Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":7,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.221Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkf2v_k8hjwt8g","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"userId":"[UUID]","statusCode":200,"totalDuration":161,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 854ms
{"@timestamp":"2025-10-17T08:38:58.239Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkfqr_bnf4r1fw","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.239Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkfqr_bnf4r1fw","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.242Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.243Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:38:58.248Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":4,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":0,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:38:58.249Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.250Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.250Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.250Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.250Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.250Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:38:58.252Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.252Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.252Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.252Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.252Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.252Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.253Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.253Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.253Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.253Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.272Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":14,"remaining":186,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.273Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.273Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.290Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.291Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.324Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":226,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.324Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.324Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":85,"type":"api","identifier":"::1","current":15,"remaining":185,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.325Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":86,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.325Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":86,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.363Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":265,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":41,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":79,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":131,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.404Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:58.407Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":2,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":0,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.407Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.407Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.407Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkfqr_bnf4r1fw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":168,"userId":"[UUID]","statusCode":200,"totalDuration":168,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 181ms
{"@timestamp":"2025-10-17T08:38:58.426Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:38:58.438Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":37,"fetchDuration":75,"totalDuration":112,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.438Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.438Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.439Z","level":"DEBUG","message":"Column mapping cache miss - loading from config","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":62,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.439Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":41,"fetchDuration":35,"totalDuration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.439Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.439Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.439Z","level":"DEBUG","message":"Column mapping cache miss - loading from config","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":62,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.443Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:38:58.444Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:38:58.444Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:38:58.444Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:38:58.444Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:38:58.444Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:38:58.444Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:38:58.444Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:38:58.444Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-17T08:38:58.480Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":382,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.480Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":382,"component":"column-mapping-service","dataSourceId":3,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.480Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":190,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.480Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":382,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.480Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":227,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.480Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":382,"chartType":"dual-axis","recordCount":48,"queryTimeMs":227,"cacheHit":true,"fetchDuration":228,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.480Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":382,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.481Z","level":"INFO","message":"Column mapping loaded and cached","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":82,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":383,"component":"column-mapping-service","dataSourceId":3,"mapping":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.481Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":157,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.481Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":383,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.481Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":228,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.481Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":383,"chartType":"dual-axis","recordCount":46,"queryTimeMs":228,"cacheHit":true,"fetchDuration":228,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.481Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":229,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.481Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":383,"chartType":"dual-axis","recordCount":94,"fetchDuration":229,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.516Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":418,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.516Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":418,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.516Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":418,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.517Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":419,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.517Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.517Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":419,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.517Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":419,"chartType":"dual-axis","totalDuration":267,"fetchDuration":229,"transformDuration":36,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.517Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":228,"parallelDuration":267,"duration":274,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.517Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":419,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.517Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":275,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":228,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":275,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.518Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":276,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.518Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkf3a_i9uwwp94","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":420,"userId":"[UUID]","statusCode":200,"totalDuration":420,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 1126ms
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:38:58.547Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:38:58.550Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkfza_3itaiwid","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.550Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkfza_3itaiwid","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.552Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:38:58.569Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkfzn_wnnotjrx","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.569Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkfzn_wnnotjrx","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.585Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":16,"remaining":184,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.586Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.586Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.593Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:38:58.603Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":17,"remaining":183,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.603Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.603Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.618Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":18,"remaining":182,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.618Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.618Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.637Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":19,"remaining":181,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.637Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.637Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.684Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.684Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.684Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":98,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.684Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.685Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.685Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.685Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.685Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.685Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:58.689Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.689Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.689Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.689Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkfza_3itaiwid","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","statusCode":200,"totalDuration":139,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 155ms
{"@timestamp":"2025-10-17T08:38:58.702Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":65,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":100,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.703Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:38:58.712Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkg3r_iccf4v3r","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.712Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkg3r_iccf4v3r","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:38:58.713Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":10,"slow":false,"component":"service","query":{"duration":6,"slow":false},"chartCountQuery":{"duration":3,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:38:58.715Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.715Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.716Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.716Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.716Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.716Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.718Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.745Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":20,"remaining":180,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.745Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.745Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.758Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.758Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.758Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.758Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.779Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":21,"remaining":179,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.779Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.779Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.828Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":259,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.828Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":259,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.846Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.847Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.847Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.847Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.847Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.847Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.847Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.847Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.847Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:58.851Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":0,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.851Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.851Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.851Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkg3r_iccf4v3r","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","statusCode":200,"totalDuration":139,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 156ms
{"@timestamp":"2025-10-17T08:38:58.863Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":37,"fetchDuration":35,"totalDuration":72,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.863Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.863Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.863Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.863Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":105,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.863Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":146,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"chartType":"dual-axis","recordCount":48,"queryTimeMs":146,"cacheHit":true,"fetchDuration":146,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":37,"fetchDuration":36,"totalDuration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":106,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":146,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.864Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"chartType":"dual-axis","recordCount":46,"queryTimeMs":146,"cacheHit":true,"fetchDuration":146,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.865Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":146,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.865Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"chartType":"dual-axis","recordCount":94,"fetchDuration":147,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.901Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.901Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.901Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.901Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.901Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.901Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.901Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"dual-axis","totalDuration":185,"fetchDuration":147,"transformDuration":36,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.901Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":146,"parallelDuration":185,"duration":198,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.902Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.902Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":199,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":146,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":199,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.902Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":199,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.902Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkfzn_wnnotjrx","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"userId":"[UUID]","statusCode":200,"totalDuration":333,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 352ms
{"@timestamp":"2025-10-17T08:38:58.910Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:38:58.930Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:38:58.930Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:38:58.930Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:38:58.930Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:38:58.930Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:38:58.930Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:38:58.930Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:38:58.930Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:38:58.930Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:38:58.936Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:38:58.938Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkga0_1bq61heh","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.938Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkga0_1bq61heh","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.955Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkgaf_k0p5vbuu","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.955Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkgaf_k0p5vbuu","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.972Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":22,"remaining":178,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.972Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.972Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:58.988Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":23,"remaining":177,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.988Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:58.989Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.005Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":24,"remaining":176,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.006Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.006Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.021Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":25,"remaining":175,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.021Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.022Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.035Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:38:59.072Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.072Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.072Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":100,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.072Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.073Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.073Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.073Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.073Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.073Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:59.075Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:59.077Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.077Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.077Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.077Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkga0_1bq61heh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","statusCode":200,"totalDuration":139,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 157ms
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.091Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.092Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
{"@timestamp":"2025-10-17T08:38:59.097Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkgei_wbqljpfz","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.098Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkgei_wbqljpfz","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:38:59.100Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":8,"slow":false,"component":"service","query":{"duration":6,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:38:59.101Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.101Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.101Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.102Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.102Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.102Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.103Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.129Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":26,"remaining":174,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.129Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.129Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.140Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":185,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.140Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.140Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":185,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.140Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.167Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":27,"remaining":173,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.167Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.167Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.207Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.207Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.238Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:38:59.246Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.246Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":79,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.246Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.246Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.246Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.246Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.246Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.246Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.246Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:38:59.248Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":41,"totalDuration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.248Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.248Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.248Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.248Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":108,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.248Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.248Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":145,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.248Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"chartType":"dual-axis","recordCount":48,"queryTimeMs":145,"cacheHit":true,"fetchDuration":145,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:59.249Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":34,"fetchDuration":42,"totalDuration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.249Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.249Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.249Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.249Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":109,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.250Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.250Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":147,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.250Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"chartType":"dual-axis","recordCount":46,"queryTimeMs":147,"cacheHit":true,"fetchDuration":147,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.250Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":147,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.250Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"chartType":"dual-axis","recordCount":94,"fetchDuration":147,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:59.251Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":2,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.252Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.252Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":6,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.252Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkgei_wbqljpfz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"userId":"[UUID]","statusCode":200,"totalDuration":155,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 169ms
{"@timestamp":"2025-10-17T08:38:59.286Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.286Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.286Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.287Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.287Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.287Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.287Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"dual-axis","totalDuration":185,"fetchDuration":147,"transformDuration":37,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.287Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":147,"parallelDuration":185,"duration":195,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.287Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.287Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":196,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":147,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":196,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.287Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":196,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.287Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkgaf_k0p5vbuu","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"userId":"[UUID]","statusCode":200,"totalDuration":332,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 349ms
{"@timestamp":"2025-10-17T08:38:59.289Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:38:59.308Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:38:59.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:38:59.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:38:59.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:38:59.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:38:59.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:38:59.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:38:59.309Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:38:59.309Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:38:59.319Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:38:59.321Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkgkp_b24ez577","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.321Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkgkp_b24ez577","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.339Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkgl2_rla875b5","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.339Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkgl2_rla875b5","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.354Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":28,"remaining":172,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.354Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.355Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.372Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":29,"remaining":171,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.372Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.372Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.390Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":30,"remaining":170,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.390Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.390Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.412Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"type":"api","identifier":"::1","current":31,"remaining":169,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.412Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.413Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.414Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:38:59.454Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:38:59.457Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.457Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.457Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.457Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.457Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.457Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.458Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.458Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.458Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:59.461Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.461Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.461Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.461Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkgkp_b24ez577","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","statusCode":200,"totalDuration":140,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 156ms
{"@timestamp":"2025-10-17T08:38:59.480Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkgp7_5n1g475n","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.480Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkgp7_5n1g475n","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.482Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.483Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:38:59.487Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":4,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:38:59.488Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.488Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.489Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.489Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.489Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.489Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.491Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.516Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":32,"remaining":168,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.516Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.516Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.527Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":188,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.527Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.530Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.531Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.547Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":33,"remaining":167,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.548Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.548Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.597Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":258,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.597Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":258,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.614Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.614Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.614Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":98,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.614Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.614Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.614Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.614Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.614Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.614Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:59.617Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":0,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.617Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.617Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.617Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkgp7_5n1g475n","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","statusCode":200,"totalDuration":137,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 150ms
{"@timestamp":"2025-10-17T08:38:59.636Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":39,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.636Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.636Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.636Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":109,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":146,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"chartType":"dual-axis","recordCount":48,"queryTimeMs":146,"cacheHit":true,"fetchDuration":146,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":34,"fetchDuration":40,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":107,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":146,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.637Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"chartType":"dual-axis","recordCount":46,"queryTimeMs":146,"cacheHit":true,"fetchDuration":146,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.638Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":147,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.638Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"chartType":"dual-axis","recordCount":94,"fetchDuration":147,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.670Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"chartType":"dual-axis","totalDuration":188,"fetchDuration":147,"transformDuration":39,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":146,"parallelDuration":188,"duration":194,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.677Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":195,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":146,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":195,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.678Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":196,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.678Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkgl2_rla875b5","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"userId":"[UUID]","statusCode":200,"totalDuration":339,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 356ms
{"@timestamp":"2025-10-17T08:38:59.687Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:38:59.687Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:38:59.687Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:38:59.687Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:38:59.688Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:38:59.688Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:38:59.688Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:38:59.688Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:38:59.688Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:38:59.707Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:38:59.718Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkgvl_cbb4cdon","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.718Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkgvl_cbb4cdon","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.730Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkgvt_r7kgt8rg","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.730Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkgvt_r7kgt8rg","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.753Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":34,"remaining":166,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.753Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.753Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.767Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":35,"remaining":165,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.767Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.767Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.788Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":36,"remaining":164,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.788Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.788Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.790Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:38:59.799Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":37,"remaining":163,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.800Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.800Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.824Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:38:59.858Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.858Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.858Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.858Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.858Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.858Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.858Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.859Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.859Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:38:59.862Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.862Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.862Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.862Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkgvl_cbb4cdon","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","statusCode":200,"totalDuration":144,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 165ms
{"@timestamp":"2025-10-17T08:38:59.866Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.866Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.866Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":99,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.866Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.866Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.866Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.866Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.867Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.867Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.867Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.867Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:38:59.875Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":8,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":4,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:38:59.879Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.879Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.879Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.879Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.880Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.880Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:38:59.885Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkh0d_7l0i76um","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.885Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkh0d_7l0i76um","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.886Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.923Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"type":"api","identifier":"::1","current":38,"remaining":162,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.924Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.924Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.924Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.924Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.924Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.925Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.955Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":39,"remaining":161,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.955Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.955Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:38:59.996Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":266,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:38:59.996Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":266,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.026Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.026Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.026Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.026Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.026Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.026Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.026Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.026Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.026Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:00.029Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":0,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.030Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.030Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.030Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkh0d_7l0i76um","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","statusCode":200,"totalDuration":145,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 160ms
{"@timestamp":"2025-10-17T08:39:00.035Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":39,"totalDuration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.035Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.035Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.035Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.035Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":111,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.035Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":149,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"chartType":"dual-axis","recordCount":48,"queryTimeMs":149,"cacheHit":true,"fetchDuration":150,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":34,"fetchDuration":40,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":112,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":150,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"chartType":"dual-axis","recordCount":46,"queryTimeMs":150,"cacheHit":true,"fetchDuration":150,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":150,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.036Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"chartType":"dual-axis","recordCount":94,"fetchDuration":150,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.056Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:00.073Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:00.073Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:00.073Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:00.073Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:00.073Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:00.073Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:00.073Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"chartType":"dual-axis","totalDuration":194,"fetchDuration":150,"transformDuration":38,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":150,"parallelDuration":194,"duration":207,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":207,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":150,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":207,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.075Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":208,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.075Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkgvt_r7kgt8rg","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"userId":"[UUID]","statusCode":200,"totalDuration":345,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 362ms
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:00.074Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:00.100Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:00.123Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkh6r_kaqv8bvs","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.123Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkh6r_kaqv8bvs","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.129Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkh6r_itwr58d0","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.129Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkh6r_itwr58d0","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.162Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":2,"remaining":198,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.162Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.162Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.180Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:00.189Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":1,"remaining":199,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.189Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.189Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.198Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":3,"remaining":197,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.198Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.198Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.219Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:00.224Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"type":"api","identifier":"::1","current":4,"remaining":196,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.224Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.225Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.264Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:00.271Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.271Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.271Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.271Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.271Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.271Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.272Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.272Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.272Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.272Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.272Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:00.276Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":4,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:00.278Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.278Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.278Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.278Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.278Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.278Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.280Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.295Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":172,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.295Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.295Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.295Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":172,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.295Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":172,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.295Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":172,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.295Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.295Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":172,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.295Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":172,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:00.299Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.299Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.299Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.299Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkh6r_kaqv8bvs","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":176,"userId":"[UUID]","statusCode":200,"totalDuration":176,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 200ms
{"@timestamp":"2025-10-17T08:39:00.318Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkhcg_9g0b9ncq","duration":1,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.318Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkhcg_9g0b9ncq","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.323Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.323Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.323Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.323Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.354Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.354Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.355Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.387Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.387Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.387Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.393Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":264,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.393Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":264,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.431Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":35,"fetchDuration":38,"totalDuration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.432Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.432Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.432Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.432Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":109,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.432Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.432Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":152,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.432Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"chartType":"dual-axis","recordCount":48,"queryTimeMs":152,"cacheHit":true,"fetchDuration":152,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":35,"fetchDuration":45,"totalDuration":80,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":116,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":159,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"chartType":"dual-axis","recordCount":46,"queryTimeMs":159,"cacheHit":true,"fetchDuration":159,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":159,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.439Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"chartType":"dual-axis","recordCount":94,"fetchDuration":159,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.461Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.461Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.461Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.461Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.461Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.461Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.461Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.461Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.462Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:00.465Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.465Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.465Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.465Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkhcg_9g0b9ncq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","statusCode":200,"totalDuration":148,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 161ms
{"@timestamp":"2025-10-17T08:39:00.467Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"chartType":"dual-axis","totalDuration":196,"fetchDuration":159,"transformDuration":35,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":159,"parallelDuration":196,"duration":202,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.474Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":202,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":159,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":202,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.475Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":203,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.475Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkh6r_itwr58d0","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"userId":"[UUID]","statusCode":200,"totalDuration":346,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 371ms
{"@timestamp":"2025-10-17T08:39:00.486Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:00.486Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:00.486Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:00.486Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:00.486Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:00.486Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:00.486Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:00.486Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:00.486Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:00.501Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:00.512Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkhho_58bo993k","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.512Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkhho_58bo993k","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.525Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkhhw_btsitxzc","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.525Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkhhw_btsitxzc","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.547Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":7,"remaining":193,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.547Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.547Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.560Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":8,"remaining":192,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.560Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.560Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.581Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":9,"remaining":191,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.581Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.581Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.595Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":10,"remaining":190,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.595Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.595Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.596Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:00.632Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:00.650Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.650Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.650Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.650Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.650Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.650Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.650Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.650Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.650Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:00.654Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.654Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.655Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.655Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkhho_58bo993k","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","statusCode":200,"totalDuration":143,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 162ms
{"@timestamp":"2025-10-17T08:39:00.661Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.661Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.661Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.661Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.661Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.661Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.662Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.662Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.662Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.662Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.662Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:00.675Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":13,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":7,"slow":false},"chartsQuery":{"duration":3,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:00.679Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.679Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.679Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.680Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.680Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.680Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
{"@timestamp":"2025-10-17T08:39:00.682Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkhmc_c0umxtb9","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.682Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkhmc_c0umxtb9","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.684Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.714Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":11,"remaining":189,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.714Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.714Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.718Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":193,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.718Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.724Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":199,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.724Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.747Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":12,"remaining":188,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.747Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.747Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.788Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.788Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":32,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.816Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.816Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.816Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.816Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.816Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.816Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.816Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.816Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.816Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:00.819Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":0,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.819Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.819Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.819Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkhmc_c0umxtb9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","statusCode":200,"totalDuration":137,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 157ms
{"@timestamp":"2025-10-17T08:39:00.825Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":37,"totalDuration":71,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.825Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.825Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.825Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.825Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":107,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.825Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.825Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":141,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":48,"queryTimeMs":141,"cacheHit":true,"fetchDuration":142,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":32,"fetchDuration":38,"totalDuration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":102,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":142,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":46,"queryTimeMs":142,"cacheHit":true,"fetchDuration":142,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":142,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.826Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":94,"fetchDuration":142,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.862Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"chartType":"dual-axis","totalDuration":185,"fetchDuration":142,"transformDuration":39,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":142,"parallelDuration":185,"duration":203,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.865Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":203,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":142,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":203,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.866Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.866Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkhhw_btsitxzc","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"userId":"[UUID]","statusCode":200,"totalDuration":341,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 358ms
{"@timestamp":"2025-10-17T08:39:00.879Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:00.880Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:00.880Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:00.880Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:00.880Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:00.880Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:00.880Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:00.880Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:00.880Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:00.892Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:00.903Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkhsj_lojuh4fc","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.903Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkhsj_lojuh4fc","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.915Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkhsr_caq79mdi","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.915Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkhsr_caq79mdi","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.936Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":13,"remaining":187,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.936Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.936Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.949Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":14,"remaining":186,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.950Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.950Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.973Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":15,"remaining":185,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.973Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.973Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:00.983Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:00.984Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":16,"remaining":184,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.984Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:00.984Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.022Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:01.041Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.041Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.042Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.042Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.042Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.042Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.042Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.042Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.042Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:01.045Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.045Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.045Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.045Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkhsj_lojuh4fc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","statusCode":200,"totalDuration":142,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 162ms
{"@timestamp":"2025-10-17T08:39:01.053Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.054Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:01.066Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkhx6_1bkn3c2o","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.066Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkhx6_1bkn3c2o","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.066Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":12,"slow":false,"component":"service","query":{"duration":7,"slow":false},"chartCountQuery":{"duration":3,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:01.068Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.068Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.068Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.069Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.069Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.069Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:01.070Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.070Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.070Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.070Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.071Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.071Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.071Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.071Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.071Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.071Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.101Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":17,"remaining":183,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.101Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.101Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.105Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":190,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.105Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.108Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":193,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.108Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.136Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":18,"remaining":182,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.137Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.137Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.172Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":257,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.176Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":261,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.210Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.210Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.210Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.210Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.210Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.210Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.210Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.210Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.210Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:01.211Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":35,"fetchDuration":39,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.211Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.211Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.211Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.211Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":106,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":141,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"chartType":"dual-axis","recordCount":48,"queryTimeMs":141,"cacheHit":true,"fetchDuration":141,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":35,"fetchDuration":36,"totalDuration":72,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":104,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":141,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.212Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"chartType":"dual-axis","recordCount":46,"queryTimeMs":141,"cacheHit":true,"fetchDuration":141,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.213Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":141,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.213Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"chartType":"dual-axis","recordCount":94,"fetchDuration":142,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:01.216Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":3,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.216Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.216Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.217Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkhx6_1bkn3c2o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"userId":"[UUID]","statusCode":200,"totalDuration":150,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 166ms
{"@timestamp":"2025-10-17T08:39:01.247Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.247Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.247Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.247Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.247Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.247Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.247Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"dual-axis","totalDuration":178,"fetchDuration":142,"transformDuration":34,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.248Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":141,"parallelDuration":178,"duration":193,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.248Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.248Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":194,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":141,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":194,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.248Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.248Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkhsr_caq79mdi","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"userId":"[UUID]","statusCode":200,"totalDuration":333,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 351ms
{"@timestamp":"2025-10-17T08:39:01.251Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:01.272Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:01.272Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:01.272Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:01.272Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:01.272Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:01.272Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:01.272Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:01.272Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:01.272Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:01.278Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:01.290Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulki38_68mm18t5","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.290Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulki38_68mm18t5","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.302Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulki3h_679vdfwl","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.302Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulki3h_679vdfwl","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.326Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":19,"remaining":181,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.326Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.326Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.335Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":20,"remaining":180,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.335Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.335Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.359Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":21,"remaining":179,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.359Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.359Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.367Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":22,"remaining":178,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.367Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.367Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.376Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:01.413Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:01.428Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:01.436Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.436Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.436Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.436Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.436Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.436Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.436Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.436Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:01.437Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.438Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:01.442Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":2,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.442Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.442Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.442Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulki38_68mm18t5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","statusCode":200,"totalDuration":152,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 174ms
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:01.445Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":7,"slow":false,"component":"service","query":{"duration":4,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:01.447Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.448Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.448Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.448Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.448Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.448Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:01.454Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.454Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.454Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.455Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.455Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.455Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.455Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.455Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.455Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.455Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.469Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulki89_xf4zuizh","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.470Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulki89_xf4zuizh","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.490Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":188,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.490Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.490Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":188,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.490Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.504Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":23,"remaining":177,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.504Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.504Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.539Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":24,"remaining":176,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.539Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.539Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.557Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":255,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.558Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":256,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.595Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":35,"fetchDuration":38,"totalDuration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.595Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.595Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.595Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.595Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":105,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.595Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.595Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":140,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.595Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"chartType":"dual-axis","recordCount":48,"queryTimeMs":140,"cacheHit":true,"fetchDuration":140,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":35,"fetchDuration":38,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":106,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":141,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"chartType":"dual-axis","recordCount":46,"queryTimeMs":141,"cacheHit":true,"fetchDuration":141,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":141,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.596Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"chartType":"dual-axis","recordCount":94,"fetchDuration":141,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.607Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.607Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.607Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.607Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.607Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.607Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.608Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.608Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.608Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:01.611Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.611Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.611Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.611Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulki89_xf4zuizh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","statusCode":200,"totalDuration":142,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 161ms
{"@timestamp":"2025-10-17T08:39:01.632Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.632Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.632Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.633Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.633Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.633Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.633Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"chartType":"dual-axis","totalDuration":185,"fetchDuration":141,"transformDuration":37,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.633Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":141,"parallelDuration":185,"duration":195,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.633Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.633Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":196,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":141,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":196,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.633Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":196,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.633Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulki3h_679vdfwl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"userId":"[UUID]","statusCode":200,"totalDuration":331,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 348ms
{"@timestamp":"2025-10-17T08:39:01.635Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:01.653Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:01.653Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:01.653Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:01.653Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:01.653Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:01.653Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:01.654Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:01.654Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:01.654Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:01.660Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:01.668Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkidu_fb7218ez","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.669Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkidu_fb7218ez","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.683Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkie3_tt46vano","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.683Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkie3_tt46vano","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.704Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":25,"remaining":175,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.704Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.705Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.715Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":26,"remaining":174,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.716Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.716Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.738Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":27,"remaining":173,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.738Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.738Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.750Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":28,"remaining":172,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.751Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.751Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.756Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:01.791Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:01.809Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.809Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.809Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.809Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.809Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.809Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.810Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.810Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.810Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:01.813Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.813Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.813Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.813Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkidu_fb7218ez","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","statusCode":200,"totalDuration":145,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 162ms
{"@timestamp":"2025-10-17T08:39:01.817Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.817Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.817Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.817Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.817Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.817Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.817Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.817Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.817Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.818Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.818Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:01.827Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":9,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":3,"slow":false},"chartsQuery":{"duration":3,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:01.831Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.831Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.831Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.831Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.831Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.831Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:01.837Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkiik_zxsc0kbw","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.837Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkiik_zxsc0kbw","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.837Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.838Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.838Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.838Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.838Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.838Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.838Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.838Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.838Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.838Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.873Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":29,"remaining":171,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.873Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.873Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.873Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":190,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.874Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.874Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.875Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.912Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"type":"api","identifier":"::1","current":30,"remaining":170,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.912Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.912Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.945Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.945Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":33,"fetchDuration":38,"totalDuration":71,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":110,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":146,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":48,"queryTimeMs":146,"cacheHit":true,"fetchDuration":146,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":33,"fetchDuration":39,"totalDuration":72,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.984Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":111,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":147,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"chartType":"dual-axis","recordCount":46,"queryTimeMs":147,"cacheHit":true,"fetchDuration":147,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":147,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"chartType":"dual-axis","recordCount":94,"fetchDuration":147,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.985Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:01.989Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.989Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.989Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:01.989Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkiik_zxsc0kbw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","statusCode":200,"totalDuration":152,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 169ms
{"@timestamp":"2025-10-17T08:39:02.001Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:02.018Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:02.018Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:02.018Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:02.018Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:02.018Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:02.018Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:02.018Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:02.018Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:02.018Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"chartType":"dual-axis","totalDuration":191,"fetchDuration":147,"transformDuration":37,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":147,"parallelDuration":191,"duration":204,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.022Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":204,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":147,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":204,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.023Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":205,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.023Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkie3_tt46vano","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"userId":"[UUID]","statusCode":200,"totalDuration":340,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 357ms
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:02.057Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:02.060Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkioo_hjan8uv6","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.060Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkioo_hjan8uv6","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.075Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkip5_h6f5raph","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.075Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkip5_h6f5raph","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.093Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":31,"remaining":169,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.093Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.093Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.107Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":32,"remaining":168,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.107Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.107Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.119Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:02.130Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":33,"remaining":167,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.130Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.130Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.141Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":34,"remaining":166,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.141Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.141Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.157Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:02.198Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.198Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.198Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.198Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.198Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.198Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.198Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.198Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.198Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:02.203Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":2,"slow":false},"childrenCountQuery":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.203Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.203Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.203Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkioo_hjan8uv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","statusCode":200,"totalDuration":143,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 161ms
{"@timestamp":"2025-10-17T08:39:02.211Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.211Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.212Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.212Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.212Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.212Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.212Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.212Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.212Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.212Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.212Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:02.229Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkitc_e8xr94lq","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.229Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkitc_e8xr94lq","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.229Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":17,"slow":false,"component":"service","query":{"duration":10,"slow":false},"chartCountQuery":{"duration":4,"slow":false},"chartsQuery":{"duration":3,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:02.231Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.231Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.231Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.231Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.231Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.231Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.234Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":159,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.267Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"type":"api","identifier":"::1","current":35,"remaining":165,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.267Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.267Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.270Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.270Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.270Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.270Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.300Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":36,"remaining":164,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.300Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.300Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.337Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.337Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.371Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.371Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.371Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.371Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.371Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.371Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.371Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.371Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.371Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:02.375Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.376Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.376Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.376Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkitc_e8xr94lq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","statusCode":200,"totalDuration":147,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 167ms
{"@timestamp":"2025-10-17T08:39:02.379Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":304,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":42,"totalDuration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":110,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":146,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"chartType":"dual-axis","recordCount":48,"queryTimeMs":146,"cacheHit":true,"fetchDuration":146,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":34,"fetchDuration":43,"totalDuration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.380Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.381Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.381Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":111,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.381Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.381Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":147,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.381Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"chartType":"dual-axis","recordCount":46,"queryTimeMs":147,"cacheHit":true,"fetchDuration":147,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.381Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":147,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.381Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"chartType":"dual-axis","recordCount":94,"fetchDuration":147,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.404Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:02.414Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.414Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.414Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.414Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.414Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.414Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.414Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"chartType":"dual-axis","totalDuration":183,"fetchDuration":147,"transformDuration":33,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.415Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":147,"parallelDuration":184,"duration":203,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.415Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.415Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":203,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":147,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":203,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.415Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":203,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.415Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkip5_h6f5raph","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"userId":"[UUID]","statusCode":200,"totalDuration":340,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 355ms
{"@timestamp":"2025-10-17T08:39:02.422Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:02.423Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:02.423Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:02.423Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:02.423Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:02.423Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:02.423Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:02.423Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:02.423Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:02.444Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:02.456Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkizl_sgl4mu04","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.456Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkizl_sgl4mu04","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.469Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkizv_lx5rs203","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.469Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkizv_lx5rs203","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.490Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":37,"remaining":163,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.490Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.490Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.504Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":38,"remaining":162,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.504Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.504Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.530Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"type":"api","identifier":"::1","current":39,"remaining":161,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.530Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.530Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.531Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:02.536Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":40,"remaining":160,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.536Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.536Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.567Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:02.598Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:02.603Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.604Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.604Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":114,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.604Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.604Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.604Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.604Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.604Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.604Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:02.604Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.605Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:02.608Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.608Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.608Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.608Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkizl_sgl4mu04","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","statusCode":200,"totalDuration":152,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 175ms
{"@timestamp":"2025-10-17T08:39:02.609Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":4,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":0,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:02.611Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.611Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.611Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.611Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.612Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.612Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:02.614Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.614Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.614Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.614Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.614Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.614Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.615Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.615Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.615Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.615Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.628Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkj4l_bhqorztv","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.628Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkj4l_bhqorztv","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.653Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":184,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.653Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.654Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":185,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.654Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.660Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":41,"remaining":159,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.660Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.660Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.693Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":42,"remaining":158,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.693Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.693Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.727Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":258,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.727Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":258,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":40,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.761Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":292,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":39,"fetchDuration":34,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.761Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":292,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.761Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":292,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":109,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":147,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"chartType":"dual-axis","recordCount":48,"queryTimeMs":147,"cacheHit":true,"fetchDuration":148,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":40,"fetchDuration":35,"totalDuration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":108,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.762Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":147,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"chartType":"dual-axis","recordCount":46,"queryTimeMs":147,"cacheHit":true,"fetchDuration":148,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":149,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"chartType":"dual-axis","recordCount":94,"fetchDuration":149,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.763Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:02.768Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":2,"slow":false},"childrenCountQuery":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.768Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.768Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.768Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkj4l_bhqorztv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","statusCode":200,"totalDuration":140,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 153ms
{"@timestamp":"2025-10-17T08:39:02.799Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.799Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.799Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.799Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.799Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.799Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.799Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"chartType":"dual-axis","totalDuration":187,"fetchDuration":149,"transformDuration":36,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.799Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":147,"parallelDuration":187,"duration":194,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.799Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.800Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":194,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":147,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":194,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.800Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.800Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkizv_lx5rs203","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"userId":"[UUID]","statusCode":200,"totalDuration":331,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 350ms
{"@timestamp":"2025-10-17T08:39:02.800Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:02.820Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:02.820Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:02.820Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:02.820Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:02.820Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:02.820Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:02.820Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:02.820Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:02.820Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:02.828Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:02.839Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkjab_2x0b2g9i","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.839Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkjab_2x0b2g9i","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.852Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkjaj_lb87n649","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.852Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkjaj_lb87n649","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.876Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":43,"remaining":157,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.876Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.876Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.884Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":44,"remaining":156,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.884Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.884Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.910Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":45,"remaining":155,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.910Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.910Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.918Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":46,"remaining":154,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.918Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.918Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.923Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:02.963Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:02.983Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.983Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.983Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.983Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.983Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.983Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.984Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.984Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.984Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:02.987Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.987Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.987Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.987Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.987Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.988Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.988Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.988Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.988Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.988Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:02.988Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
{"@timestamp":"2025-10-17T08:39:02.989Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":2,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.989Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.989Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:02.989Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkjab_2x0b2g9i","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","statusCode":200,"totalDuration":150,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 169ms
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:03.002Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":14,"slow":false,"component":"service","query":{"duration":5,"slow":false},"chartCountQuery":{"duration":7,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:03.005Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.005Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.005Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.005Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.005Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.005Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:03.012Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.012Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.012Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.012Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.012Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.012Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.012Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.012Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.012Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.013Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.018Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkjfd_4jcw42bh","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.018Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkjfd_4jcw42bh","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.046Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.046Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.047Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.047Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.049Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"type":"api","identifier":"::1","current":47,"remaining":153,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.049Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.049Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.088Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":48,"remaining":152,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.088Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.088Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.114Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.114Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.151Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":35,"fetchDuration":37,"totalDuration":72,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.151Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.151Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":106,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":140,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"chartType":"dual-axis","recordCount":48,"queryTimeMs":140,"cacheHit":true,"fetchDuration":140,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":35,"fetchDuration":38,"totalDuration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":105,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.152Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":140,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.153Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":46,"queryTimeMs":140,"cacheHit":true,"fetchDuration":140,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.153Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":141,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.153Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":94,"fetchDuration":141,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.153Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.154Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":65,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.154Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.154Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.154Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.154Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.154Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.154Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.154Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:03.158Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.158Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.159Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.159Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkjfd_4jcw42bh","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","statusCode":200,"totalDuration":141,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 157ms
{"@timestamp":"2025-10-17T08:39:03.188Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.188Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.188Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.189Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":337,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.189Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.189Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":337,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.189Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":337,"chartType":"dual-axis","totalDuration":184,"fetchDuration":141,"transformDuration":36,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.189Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":140,"parallelDuration":184,"duration":201,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.189Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":337,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.189Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":201,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":140,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":201,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.189Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":201,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.189Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkjaj_lb87n649","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":337,"userId":"[UUID]","statusCode":200,"totalDuration":337,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 356ms
{"@timestamp":"2025-10-17T08:39:03.187Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:03.206Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:03.206Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:03.206Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:03.206Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:03.206Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:03.207Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:03.207Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:03.207Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:03.207Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:03.218Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:03.230Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkjl4_85hbp8g9","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.230Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkjl4_85hbp8g9","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.243Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkjld_sfyqivdj","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.244Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkjld_sfyqivdj","duration":1,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.266Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":49,"remaining":151,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.266Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.266Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.277Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":50,"remaining":150,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.277Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.277Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.300Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":51,"remaining":149,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.300Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.300Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.308Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:03.309Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":52,"remaining":148,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.309Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.309Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.351Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:03.374Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.374Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.374Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.374Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.374Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.374Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.375Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.375Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.375Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:03.375Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.375Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.375Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":98,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.375Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.375Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.375Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.376Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.376Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.376Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.376Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.376Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:03.379Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.379Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.379Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.379Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkjl4_85hbp8g9","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","statusCode":200,"totalDuration":149,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 171ms
{"@timestamp":"2025-10-17T08:39:03.380Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":4,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":0,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:03.391Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.391Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.391Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.391Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.391Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.391Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:03.394Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.394Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.394Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.394Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.395Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.395Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.395Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.395Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.395Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.395Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.409Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkjqa_auvz4d5s","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.409Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkjqa_auvz4d5s","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.431Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":188,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.432Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.432Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.432Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.442Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":53,"remaining":147,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.443Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.443Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.481Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"type":"api","identifier":"::1","current":54,"remaining":146,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.481Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.481Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.498Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":255,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.498Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":255,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.538Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":40,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.538Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.538Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.538Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.538Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":107,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.538Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.538Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":143,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.538Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"chartType":"dual-axis","recordCount":48,"queryTimeMs":143,"cacheHit":true,"fetchDuration":143,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":34,"fetchDuration":41,"totalDuration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":107,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":144,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"chartType":"dual-axis","recordCount":46,"queryTimeMs":144,"cacheHit":true,"fetchDuration":144,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":144,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.539Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"chartType":"dual-axis","recordCount":94,"fetchDuration":144,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.546Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.546Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":65,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.546Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.546Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.546Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.546Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.546Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.547Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.547Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:03.551Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":2,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.551Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.551Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.551Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkjqa_auvz4d5s","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","statusCode":200,"totalDuration":142,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 157ms
{"@timestamp":"2025-10-17T08:39:03.577Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":334,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"chartType":"dual-axis","totalDuration":187,"fetchDuration":144,"transformDuration":39,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":144,"parallelDuration":187,"duration":202,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":202,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":144,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":202,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":202,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.578Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkjld_sfyqivdj","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":335,"userId":"[UUID]","statusCode":200,"totalDuration":335,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 354ms
{"@timestamp":"2025-10-17T08:39:03.577Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:03.595Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:03.595Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:03.596Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:03.596Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:03.596Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:03.596Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:03.596Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:03.596Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:03.596Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:03.608Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:03.618Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkjvy_i0t7sihm","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.618Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkjvy_i0t7sihm","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.630Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkjw7_o8y2vxmq","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.630Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkjw7_o8y2vxmq","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.653Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":55,"remaining":145,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.653Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.653Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.664Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":56,"remaining":144,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.664Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.664Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.688Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":57,"remaining":143,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.688Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.688Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.699Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":58,"remaining":142,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.699Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.699Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.699Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:03.739Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:03.758Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:03.764Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.765Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.765Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.765Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.765Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.765Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.765Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.765Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.765Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.766Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.767Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:03.775Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":10,"slow":false,"component":"core_service","query":{"duration":8,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.775Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":10,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.775Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":10,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.775Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkjvy_i0t7sihm","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"userId":"[UUID]","statusCode":200,"totalDuration":157,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 176ms
{"@timestamp":"2025-10-17T08:39:03.776Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":9,"slow":false,"component":"service","query":{"duration":6,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:03.779Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.779Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.779Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.779Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.779Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.779Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:03.784Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.784Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.784Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.784Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.784Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.784Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.785Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.785Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.785Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.785Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.796Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkk10_qb3ab3qx","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.796Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkk10_qb3ab3qx","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.823Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":193,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.823Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.824Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.824Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.829Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":59,"remaining":141,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.829Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.829Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.864Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":60,"remaining":140,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.865Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.865Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.890Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":260,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.890Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":260,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.926Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":33,"fetchDuration":36,"totalDuration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.926Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.926Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.926Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":103,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":142,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"chartType":"dual-axis","recordCount":48,"queryTimeMs":142,"cacheHit":true,"fetchDuration":143,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":34,"fetchDuration":37,"totalDuration":71,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":103,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":142,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":297,"chartType":"dual-axis","recordCount":46,"queryTimeMs":142,"cacheHit":true,"fetchDuration":142,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.927Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":143,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.928Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":298,"chartType":"dual-axis","recordCount":94,"fetchDuration":143,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.938Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.938Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.938Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.938Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.938Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.938Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.939Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.939Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.939Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:03.944Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":3,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.944Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.944Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.944Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkk10_qb3ab3qx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","statusCode":200,"totalDuration":148,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 163ms
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"chartType":"dual-axis","totalDuration":184,"fetchDuration":143,"transformDuration":35,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":142,"parallelDuration":184,"duration":196,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":333,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.963Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":197,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":142,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":197,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.964Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":198,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:03.964Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkjw7_o8y2vxmq","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":334,"userId":"[UUID]","statusCode":200,"totalDuration":334,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 350ms
{"@timestamp":"2025-10-17T08:39:03.966Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:03.986Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:03.986Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:03.986Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:03.986Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:03.986Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:03.986Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:03.986Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:03.986Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:03.986Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:03.996Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:03.998Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkk6k_11cc7404","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:03.999Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkk6k_11cc7404","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.015Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkk6z_thsq5972","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.015Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkk6z_thsq5972","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.036Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"type":"api","identifier":"::1","current":61,"remaining":139,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.036Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.036Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.048Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":62,"remaining":138,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.048Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.048Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.069Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":63,"remaining":137,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.070Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.070Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.082Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":64,"remaining":136,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.083Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.083Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.087Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:04.122Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:04.139Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.139Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.140Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.140Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.140Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.140Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.140Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.140Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.140Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:04.144Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.144Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.144Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.144Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkk6k_11cc7404","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"userId":"[UUID]","statusCode":200,"totalDuration":146,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 163ms
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.149Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.150Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:04.163Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":13,"slow":false,"component":"service","query":{"duration":4,"slow":false},"chartCountQuery":{"duration":4,"slow":false},"chartsQuery":{"duration":5,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:04.166Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkkbb_nidxvkyg","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.166Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkkbb_nidxvkyg","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.166Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.166Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.167Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.167Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.167Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.167Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:04.168Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.169Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.169Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.169Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.169Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.169Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.169Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.169Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.169Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.169Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.200Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":65,"remaining":135,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.200Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.200Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.210Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.210Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.210Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.210Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.233Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":66,"remaining":134,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.233Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.233Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.281Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":266,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.281Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":266,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.299Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.299Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.299Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":99,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.299Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.300Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.300Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.300Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.300Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.300Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:04.303Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.303Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.303Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.303Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkkbb_nidxvkyg","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","statusCode":200,"totalDuration":137,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 152ms
{"@timestamp":"2025-10-17T08:39:04.323Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":42,"totalDuration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.323Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.323Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":114,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":155,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"chartType":"dual-axis","recordCount":48,"queryTimeMs":155,"cacheHit":true,"fetchDuration":155,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":35,"fetchDuration":43,"totalDuration":78,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":114,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":155,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.324Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"chartType":"dual-axis","recordCount":46,"queryTimeMs":155,"cacheHit":true,"fetchDuration":155,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.325Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":155,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.325Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"chartType":"dual-axis","recordCount":94,"fetchDuration":156,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.344Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"chartType":"dual-axis","totalDuration":194,"fetchDuration":156,"transformDuration":36,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":155,"parallelDuration":194,"duration":212,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.362Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.362Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":213,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":155,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":213,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.362Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":213,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.362Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkk6z_thsq5972","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"userId":"[UUID]","statusCode":200,"totalDuration":347,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 362ms
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:04.361Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:04.393Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:04.396Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkkhl_3dro2ua7","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.396Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkkhl_3dro2ua7","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.416Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkki1_ic8pcbbr","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.416Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkki1_ic8pcbbr","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.430Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":67,"remaining":133,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.430Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.430Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.449Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":68,"remaining":132,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.449Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.449Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.465Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":69,"remaining":131,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.465Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.465Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.467Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:04.482Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":70,"remaining":130,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.483Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.483Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.503Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:04.531Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.531Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.531Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.531Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.531Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.531Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.531Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.531Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.532Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:04.535Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.535Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.535Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.535Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkkhl_3dro2ua7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","statusCode":200,"totalDuration":139,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 158ms
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.551Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.552Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
{"@timestamp":"2025-10-17T08:39:04.554Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkkm4_a1bmbtvf","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.554Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkkm4_a1bmbtvf","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:04.558Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":6,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:04.560Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.560Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.560Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.560Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.560Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.560Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.562Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.590Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":71,"remaining":129,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.591Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.591Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.598Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":182,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.598Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.598Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":182,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.598Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.624Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":72,"remaining":128,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.625Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.625Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.665Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":249,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.665Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":249,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.695Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.695Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.695Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.695Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.695Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.695Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.696Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.696Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.696Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:04.699Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.699Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.699Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.699Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkkm4_a1bmbtvf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","statusCode":200,"totalDuration":145,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 160ms
{"@timestamp":"2025-10-17T08:39:04.705Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":33,"fetchDuration":40,"totalDuration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.705Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.706Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.706Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.706Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":108,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.706Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.706Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":144,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.706Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"chartType":"dual-axis","recordCount":48,"queryTimeMs":144,"cacheHit":true,"fetchDuration":144,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.706Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":33,"fetchDuration":41,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.706Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.706Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.707Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":291,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.707Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":109,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.707Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":291,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.707Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":145,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.707Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":291,"chartType":"dual-axis","recordCount":46,"queryTimeMs":145,"cacheHit":true,"fetchDuration":145,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.707Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":145,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.707Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":291,"chartType":"dual-axis","recordCount":94,"fetchDuration":145,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.742Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":326,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.742Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":326,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.742Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":326,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.742Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":326,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.742Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.742Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":326,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.742Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":326,"chartType":"dual-axis","totalDuration":182,"fetchDuration":145,"transformDuration":35,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.742Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":145,"parallelDuration":182,"duration":190,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.743Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":327,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.743Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":192,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":145,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":192,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.743Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.743Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkki1_ic8pcbbr","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":327,"userId":"[UUID]","statusCode":200,"totalDuration":327,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 346ms
{"@timestamp":"2025-10-17T08:39:04.748Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:04.766Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:04.766Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:04.766Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:04.766Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:04.766Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:04.766Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:04.767Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:04.767Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:04.767Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:04.777Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:04.779Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkks9_ound0x64","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.779Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkks9_ound0x64","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.794Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkkso_zbl2iswl","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.794Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkkso_zbl2iswl","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.815Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":73,"remaining":127,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.815Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.815Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.829Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":74,"remaining":126,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.829Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.829Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.849Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":75,"remaining":125,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.849Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.849Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.864Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":76,"remaining":124,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.865Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.865Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.873Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:04.908Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:04.918Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:04.925Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.925Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":76,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.925Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.925Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.925Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.925Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.925Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.925Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.925Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:04.928Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.928Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.928Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.928Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkks9_ound0x64","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","statusCode":200,"totalDuration":149,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 167ms
{"@timestamp":"2025-10-17T08:39:04.932Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.932Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.932Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":103,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.932Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.932Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.933Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.933Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.933Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.933Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.933Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.933Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:04.944Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":11,"slow":false,"component":"service","query":{"duration":5,"slow":false},"chartCountQuery":{"duration":3,"slow":false},"chartsQuery":{"duration":3,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:04.949Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkkx2_we85fwvy","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.949Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkkx2_we85fwvy","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.949Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.950Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.950Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.950Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.950Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.950Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:04.951Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.951Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.951Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.951Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.952Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.952Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.952Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.952Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.952Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.952Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.988Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"type":"api","identifier":"::1","current":77,"remaining":123,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.988Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.988Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:04.988Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.988Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.989Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:04.989Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.024Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"type":"api","identifier":"::1","current":78,"remaining":122,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.025Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":76,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.025Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":76,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.062Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":268,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.062Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":268,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.101Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":36,"fetchDuration":39,"totalDuration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.101Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.101Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.101Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":113,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":150,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"chartType":"dual-axis","recordCount":48,"queryTimeMs":150,"cacheHit":true,"fetchDuration":150,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":37,"fetchDuration":40,"totalDuration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":113,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":150,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.102Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"chartType":"dual-axis","recordCount":46,"queryTimeMs":150,"cacheHit":true,"fetchDuration":150,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":150,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"chartType":"dual-axis","recordCount":94,"fetchDuration":151,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":78,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":115,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.103Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:05.107Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.107Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.107Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.107Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkkx2_we85fwvy","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"userId":"[UUID]","statusCode":200,"totalDuration":158,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 172ms
{"@timestamp":"2025-10-17T08:39:05.126Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:05.140Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.140Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.140Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":346,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.141Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.141Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.141Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.141Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"chartType":"dual-axis","totalDuration":191,"fetchDuration":151,"transformDuration":38,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.141Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":150,"parallelDuration":191,"duration":208,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.141Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.141Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":208,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":150,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":208,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.141Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":208,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.141Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkkso_zbl2iswl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"userId":"[UUID]","statusCode":200,"totalDuration":347,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 362ms
{"@timestamp":"2025-10-17T08:39:05.145Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:05.145Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:05.145Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:05.145Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:05.145Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:05.145Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:05.145Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:05.145Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:05.145Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:05.169Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:05.180Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkl3c_2ee9hwq2","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.180Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkl3c_2ee9hwq2","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.200Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkl3k_gutxbmja","duration":1,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.200Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkl3k_gutxbmja","duration":1,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.212Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":79,"remaining":121,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.212Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.212Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.232Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":80,"remaining":120,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.232Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.232Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.252Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"type":"api","identifier":"::1","current":81,"remaining":119,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.252Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.252Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.254Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:05.266Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":82,"remaining":118,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.267Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.267Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.292Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:05.318Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.318Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.318Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.318Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.318Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.318Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.318Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.318Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.318Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:05.322Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.322Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.322Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.322Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkl3c_2ee9hwq2","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","statusCode":200,"totalDuration":142,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 162ms
{"@timestamp":"2025-10-17T08:39:05.342Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkl80_32u4oqxx","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.342Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkl80_32u4oqxx","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.342Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.342Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.342Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.342Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.343Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.343Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.343Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.343Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.343Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.343Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.343Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:05.347Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":4,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:05.348Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.348Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.348Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.348Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.349Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.349Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.351Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.378Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":83,"remaining":117,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.378Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.378Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.386Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":187,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.386Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.386Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":187,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.386Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.412Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":84,"remaining":116,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.412Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.413Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.454Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":255,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.454Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":255,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.483Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.484Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.484Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.484Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.484Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.484Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.484Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.484Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.484Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:05.487Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.487Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.487Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.487Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkl80_32u4oqxx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","statusCode":200,"totalDuration":145,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 159ms
{"@timestamp":"2025-10-17T08:39:05.500Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":33,"fetchDuration":46,"totalDuration":79,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":115,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":150,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"chartType":"dual-axis","recordCount":48,"queryTimeMs":150,"cacheHit":true,"fetchDuration":150,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":33,"fetchDuration":47,"totalDuration":80,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.501Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":115,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.502Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.502Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":151,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.502Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"chartType":"dual-axis","recordCount":46,"queryTimeMs":151,"cacheHit":true,"fetchDuration":151,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.502Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":151,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.502Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"chartType":"dual-axis","recordCount":94,"fetchDuration":151,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.536Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":337,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.536Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":337,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.536Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":337,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.537Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.537Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.537Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.537Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"chartType":"dual-axis","totalDuration":188,"fetchDuration":151,"transformDuration":35,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.537Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":151,"parallelDuration":188,"duration":194,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.537Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.537Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":194,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":151,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":194,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.537Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.537Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkl3k_gutxbmja","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"userId":"[UUID]","statusCode":200,"totalDuration":338,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 362ms
{"@timestamp":"2025-10-17T08:39:05.535Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:05.553Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:05.553Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:05.553Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:05.553Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:05.553Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:05.553Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:05.553Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:05.554Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:05.554Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:05.564Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:05.575Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkleb_lu4sp0la","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.575Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkleb_lu4sp0la","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.588Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulklej_djbsxe8x","duration":1,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.589Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulklej_djbsxe8x","duration":1,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.613Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"type":"api","identifier":"::1","current":85,"remaining":115,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.613Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.613Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.625Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":86,"remaining":114,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.625Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.625Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.647Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"type":"api","identifier":"::1","current":87,"remaining":113,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.647Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.647Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.652Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:05.660Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"type":"api","identifier":"::1","current":88,"remaining":112,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.660Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.660Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.686Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:05.718Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.718Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.718Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.718Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.718Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.718Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.718Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.718Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.719Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:05.722Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.722Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.722Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.722Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkleb_lu4sp0la","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","statusCode":200,"totalDuration":147,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 167ms
{"@timestamp":"2025-10-17T08:39:05.726Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.727Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:05.737Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":10,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":2,"slow":false},"chartsQuery":{"duration":5,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:05.740Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.740Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.740Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.740Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.740Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.740Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.746Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.748Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulklj7_6937dy1j","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.748Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulklj7_6937dy1j","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.787Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":199,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.787Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.787Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":199,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.787Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.787Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"type":"api","identifier":"::1","current":89,"remaining":111,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.787Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.787Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.824Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":76,"type":"api","identifier":"::1","current":90,"remaining":110,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.824Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":76,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.824Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":76,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.862Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":274,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.862Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":274,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.897Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":37,"fetchDuration":35,"totalDuration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.898Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.898Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.898Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.898Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":111,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.898Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.898Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":152,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.898Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"chartType":"dual-axis","recordCount":48,"queryTimeMs":152,"cacheHit":true,"fetchDuration":152,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.898Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":38,"fetchDuration":36,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.898Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":112,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":153,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"chartType":"dual-axis","recordCount":46,"queryTimeMs":153,"cacheHit":true,"fetchDuration":153,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":153,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"chartType":"dual-axis","recordCount":94,"fetchDuration":153,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":75,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":112,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.899Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.900Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.900Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.900Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:05.903Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":2,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.903Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.903Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.903Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulklj7_6937dy1j","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"userId":"[UUID]","statusCode":200,"totalDuration":155,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 172ms
{"@timestamp":"2025-10-17T08:39:05.923Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":350,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":350,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":350,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":350,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":350,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":350,"chartType":"dual-axis","totalDuration":198,"fetchDuration":153,"transformDuration":39,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":153,"parallelDuration":198,"duration":211,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":350,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.938Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":211,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":153,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":211,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.939Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":212,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.939Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulklej_djbsxe8x","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":351,"userId":"[UUID]","statusCode":200,"totalDuration":351,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 369ms
{"@timestamp":"2025-10-17T08:39:05.940Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:05.940Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:05.940Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:05.941Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:05.941Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:05.941Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:05.941Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:05.941Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:05.941Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:05.966Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:05.976Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulklph_o49kr055","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.977Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulklph_o49kr055","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:05.996Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulklpp_icq1ehcz","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:05.996Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulklpp_icq1ehcz","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.009Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":91,"remaining":109,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.009Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.009Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.027Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":92,"remaining":108,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.028Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.028Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.043Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":93,"remaining":107,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.043Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.043Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.044Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:06.060Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"type":"api","identifier":"::1","current":94,"remaining":106,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.060Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.060Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.078Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:06.111Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:06.119Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.119Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":76,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.119Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.119Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.119Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.119Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.119Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.119Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.119Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:06.122Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":0,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.122Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.123Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.123Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulklph_o49kr055","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","statusCode":200,"totalDuration":147,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 165ms
{"@timestamp":"2025-10-17T08:39:06.129Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.129Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.129Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.130Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.130Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.130Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.130Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.130Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.130Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.130Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.130Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:06.140Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":10,"slow":false,"component":"service","query":{"duration":4,"slow":false},"chartCountQuery":{"duration":3,"slow":false},"chartsQuery":{"duration":3,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:06.146Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulklu9_e9jix39z","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.146Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulklu9_e9jix39z","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.146Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.146Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.146Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.146Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.146Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.146Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:06.148Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.148Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.148Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.148Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.148Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.148Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.148Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.148Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.148Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.149Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.179Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":95,"remaining":105,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.179Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.180Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.189Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":193,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.189Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.189Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":193,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.189Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.213Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":96,"remaining":104,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.213Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.213Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.264Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":268,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":40,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.264Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":268,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":40,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.281Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.281Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.281Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.281Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.281Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.281Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.281Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.281Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.281Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:06.285Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.285Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.285Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.285Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulklu9_e9jix39z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","statusCode":200,"totalDuration":139,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 154ms
{"@timestamp":"2025-10-17T08:39:06.301Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":40,"fetchDuration":37,"totalDuration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.301Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.301Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.301Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.301Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":112,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.302Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.302Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":154,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.302Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"chartType":"dual-axis","recordCount":48,"queryTimeMs":154,"cacheHit":true,"fetchDuration":154,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.302Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":40,"fetchDuration":38,"totalDuration":78,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.302Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.302Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.302Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.302Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":113,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.303Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.303Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":154,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.303Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"chartType":"dual-axis","recordCount":46,"queryTimeMs":154,"cacheHit":true,"fetchDuration":155,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.303Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":155,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.303Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"chartType":"dual-axis","recordCount":94,"fetchDuration":155,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.329Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"chartType":"dual-axis","totalDuration":190,"fetchDuration":155,"transformDuration":33,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":154,"parallelDuration":190,"duration":206,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.336Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":206,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":154,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":206,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.337Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":207,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.337Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulklpp_icq1ehcz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"userId":"[UUID]","statusCode":200,"totalDuration":341,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 366ms
{"@timestamp":"2025-10-17T08:39:06.347Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:06.347Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:06.347Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:06.347Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:06.347Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:06.347Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:06.347Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:06.347Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:06.348Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:06.368Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:06.370Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkm0i_0g8hplpb","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.370Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkm0i_0g8hplpb","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.387Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkm0w_o1pb6lc6","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.387Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkm0w_o1pb6lc6","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.404Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":97,"remaining":103,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.404Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.404Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.421Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":98,"remaining":102,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.421Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.421Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.441Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":99,"remaining":101,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.441Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.441Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.453Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:06.454Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":100,"remaining":100,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.454Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.454Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.494Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:06.507Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.508Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.508Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.508Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.508Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.508Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.508Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.508Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.508Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:06.511Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.511Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.512Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.512Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkm0i_0g8hplpb","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","statusCode":200,"totalDuration":142,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 156ms
{"@timestamp":"2025-10-17T08:39:06.526Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":72,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.527Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
{"@timestamp":"2025-10-17T08:39:06.533Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkm51_s6ql5ayl","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.533Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkm51_s6ql5ayl","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:06.535Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":8,"slow":false,"component":"service","query":{"duration":7,"slow":false},"chartCountQuery":{"duration":0,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:06.537Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.537Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.537Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.537Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.537Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.537Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.539Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.570Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":101,"remaining":99,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.570Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.570Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.579Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.579Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.579Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.579Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.607Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"type":"api","identifier":"::1","current":102,"remaining":98,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.607Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.607Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.647Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":260,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.647Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":260,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.681Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.681Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.681Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":111,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.681Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.681Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.681Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.681Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.681Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.681Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:06.685Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.685Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.685Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.685Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkm51_s6ql5ayl","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","statusCode":200,"totalDuration":152,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 169ms
{"@timestamp":"2025-10-17T08:39:06.693Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":46,"totalDuration":80,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.694Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.694Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.694Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.694Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":115,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.694Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.694Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":155,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.694Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"chartType":"dual-axis","recordCount":48,"queryTimeMs":155,"cacheHit":true,"fetchDuration":155,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":34,"fetchDuration":51,"totalDuration":85,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":119,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":159,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"chartType":"dual-axis","recordCount":46,"queryTimeMs":159,"cacheHit":true,"fetchDuration":159,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":159,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.698Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":311,"chartType":"dual-axis","recordCount":94,"fetchDuration":159,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.717Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":348,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":348,"chartType":"dual-axis","totalDuration":198,"fetchDuration":159,"transformDuration":37,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":159,"parallelDuration":198,"duration":208,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":348,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":208,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":159,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":208,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":208,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkm0w_o1pb6lc6","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":348,"userId":"[UUID]","statusCode":200,"totalDuration":348,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 364ms
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:06.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:06.735Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:06.771Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:06.773Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkmbm_m4zfdf4u","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.773Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkmbm_m4zfdf4u","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.795Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkmc3_3b13uc3h","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.795Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkmc3_3b13uc3h","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.808Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":103,"remaining":97,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.808Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.808Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.835Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":40,"type":"api","identifier":"::1","current":104,"remaining":96,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.835Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":39,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.835Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":40,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.837Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:06.842Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":105,"remaining":95,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.842Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.842Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.869Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"type":"api","identifier":"::1","current":106,"remaining":94,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.869Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.869Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.873Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:06.906Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.907Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":64,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.907Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":99,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.907Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.907Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.907Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.907Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.907Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.907Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:06.911Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.911Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.911Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.911Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkmbm_m4zfdf4u","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","statusCode":200,"totalDuration":138,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 156ms
{"@timestamp":"2025-10-17T08:39:06.931Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkmg4_t56yafqx","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.931Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkmg4_t56yafqx","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.943Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.943Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.943Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.943Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.943Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.943Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.944Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.944Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.944Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.944Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.944Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:06.948Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":4,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:06.950Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.950Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.950Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.950Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.950Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.950Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:06.951Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.951Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.951Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.951Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.952Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.952Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.952Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.952Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.952Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.952Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.965Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":107,"remaining":93,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.965Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.965Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.992Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":197,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.992Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.992Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":197,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.992Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:06.998Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":108,"remaining":92,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.998Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:06.998Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.062Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":267,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.062Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":267,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.066Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.067Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.067Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.067Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.067Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.067Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.067Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.067Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.067Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:07.070Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.070Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.070Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.070Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkmg4_t56yafqx","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","statusCode":200,"totalDuration":139,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 154ms
{"@timestamp":"2025-10-17T08:39:07.101Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":36,"fetchDuration":39,"totalDuration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.101Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.101Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.101Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.101Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":109,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.101Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.101Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":149,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.102Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"chartType":"dual-axis","recordCount":48,"queryTimeMs":149,"cacheHit":true,"fetchDuration":150,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":36,"fetchDuration":41,"totalDuration":77,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":111,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":151,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"chartType":"dual-axis","recordCount":46,"queryTimeMs":151,"cacheHit":true,"fetchDuration":151,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":151,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.103Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"chartType":"dual-axis","recordCount":94,"fetchDuration":151,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.124Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:07.137Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":342,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.137Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":342,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.137Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":342,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.137Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":342,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.137Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.137Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":342,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.137Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":342,"chartType":"dual-axis","totalDuration":187,"fetchDuration":151,"transformDuration":34,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.137Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":151,"parallelDuration":187,"duration":193,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.137Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":342,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.138Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":193,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":151,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":193,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.138Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.138Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkmc3_3b13uc3h","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":343,"userId":"[UUID]","statusCode":200,"totalDuration":343,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 363ms
{"@timestamp":"2025-10-17T08:39:07.141Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:07.141Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:07.141Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:07.141Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:07.141Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:07.141Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:07.142Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:07.142Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:07.142Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:07.165Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:07.175Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkmms_mkkan3cc","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.176Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkmms_mkkan3cc","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.189Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkmn0_ht9e5ust","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.189Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkmn0_ht9e5ust","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.207Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":109,"remaining":91,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.207Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.208Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.220Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"type":"api","identifier":"::1","current":110,"remaining":90,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.220Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.220Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.242Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":111,"remaining":89,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.243Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.243Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.244Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:07.254Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":112,"remaining":88,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.254Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.254Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.285Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:07.311Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:07.320Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.320Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.320Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":113,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.320Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.320Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.320Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.320Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.320Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.320Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:07.322Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.322Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.322Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.322Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.322Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.322Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.322Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.322Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.322Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.323Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.323Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:07.327Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":7,"slow":false,"component":"core_service","query":{"duration":3,"slow":false},"memberCountQuery":{"duration":3,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.327Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":7,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.327Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":7,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.327Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkmms_mkkan3cc","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","statusCode":200,"totalDuration":152,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 171ms
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:07.330Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":7,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":2,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:07.334Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.334Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.334Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.334Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.334Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.334Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.345Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.349Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkmrp_8urfx3qw","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.349Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkmrp_8urfx3qw","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.381Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.381Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.381Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.382Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.382Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":113,"remaining":87,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.382Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.382Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.418Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":114,"remaining":86,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.419Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.419Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.452Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.452Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.488Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":36,"totalDuration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.488Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.488Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.488Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.488Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":107,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":144,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"chartType":"dual-axis","recordCount":48,"queryTimeMs":144,"cacheHit":true,"fetchDuration":144,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":34,"fetchDuration":37,"totalDuration":71,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":108,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.489Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":144,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":46,"queryTimeMs":144,"cacheHit":true,"fetchDuration":145,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":145,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":94,"fetchDuration":145,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.490Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:07.495Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":3,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.495Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.495Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.495Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkmrp_8urfx3qw","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"userId":"[UUID]","statusCode":200,"totalDuration":146,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 163ms
{"@timestamp":"2025-10-17T08:39:07.524Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:07.529Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.529Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.529Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.529Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.529Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.529Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.529Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":340,"chartType":"dual-axis","totalDuration":195,"fetchDuration":145,"transformDuration":39,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.529Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":144,"parallelDuration":195,"duration":206,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.530Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.530Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":208,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":144,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":208,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.530Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":208,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.530Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkmn0_ht9e5ust","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":341,"userId":"[UUID]","statusCode":200,"totalDuration":341,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 359ms
{"@timestamp":"2025-10-17T08:39:07.541Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:07.541Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:07.541Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:07.541Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:07.541Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:07.541Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:07.541Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:07.542Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:07.542Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:07.558Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:07.575Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkmxo_02y6ynbt","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.575Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkmxo_02y6ynbt","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.588Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkmxx_4yot0mvl","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.588Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkmxx_4yot0mvl","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.606Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"type":"api","identifier":"::1","current":115,"remaining":85,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.606Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.606Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.620Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":116,"remaining":84,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.620Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.620Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.643Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":117,"remaining":83,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.643Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.643Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.648Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:07.653Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":118,"remaining":82,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.653Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.653Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.685Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:07.712Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.712Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.712Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.713Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.713Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.713Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.713Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.713Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.713Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:07.718Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.718Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.718Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.718Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkmxo_02y6ynbt","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","statusCode":200,"totalDuration":143,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 169ms
{"@timestamp":"2025-10-17T08:39:07.729Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.729Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.729Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.729Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.729Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.730Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.730Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.730Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.730Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.730Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.730Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:07.739Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkn2j_e7ke0y93","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.739Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkn2j_e7ke0y93","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.739Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":9,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":5,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:07.741Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.742Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.742Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.742Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.742Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.742Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.744Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.776Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":119,"remaining":81,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.776Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.776Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.782Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.782Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.782Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.782Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.810Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":120,"remaining":80,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.810Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.810Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.851Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.851Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.876Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.876Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.876Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":100,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.876Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.876Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.876Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.876Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.876Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.876Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:07.879Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.880Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.880Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.880Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkn2j_e7ke0y93","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","statusCode":200,"totalDuration":141,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 156ms
{"@timestamp":"2025-10-17T08:39:07.889Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":35,"fetchDuration":38,"totalDuration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.889Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.889Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.889Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.889Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":107,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.889Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.889Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":145,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.889Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":48,"queryTimeMs":145,"cacheHit":true,"fetchDuration":145,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":35,"fetchDuration":39,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":108,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":146,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"chartType":"dual-axis","recordCount":46,"queryTimeMs":146,"cacheHit":true,"fetchDuration":146,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":146,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.890Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":302,"chartType":"dual-axis","recordCount":94,"fetchDuration":146,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.915Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:07.926Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.926Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.926Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.926Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.926Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.926Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.926Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":338,"chartType":"dual-axis","totalDuration":184,"fetchDuration":146,"transformDuration":36,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.926Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":146,"parallelDuration":184,"duration":196,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.927Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.927Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":197,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":146,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":197,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.927Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":197,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.927Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkmxx_4yot0mvl","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":339,"userId":"[UUID]","statusCode":200,"totalDuration":339,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 363ms
{"@timestamp":"2025-10-17T08:39:07.931Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:07.932Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:07.932Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:07.932Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:07.932Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:07.932Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:07.932Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:07.932Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:07.932Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:07.960Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:07.962Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkn8o_ic4tw1ke","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.962Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkn8o_ic4tw1ke","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.980Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkn93_vptbmm0d","duration":1,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.980Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkn93_vptbmm0d","duration":1,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:07.998Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":121,"remaining":79,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.998Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:07.998Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.012Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":122,"remaining":78,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.012Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.012Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.033Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":123,"remaining":77,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.033Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.033Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.035Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:08.044Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":124,"remaining":76,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.044Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.045Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.071Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:08.106Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.106Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.106Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.106Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.106Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.106Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.106Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.106Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.106Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:08.110Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.110Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.110Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.110Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkn8o_ic4tw1ke","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","statusCode":200,"totalDuration":148,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 166ms
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.113Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.114Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:08.122Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":8,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":2,"slow":false},"chartsQuery":{"duration":4,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:08.125Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.125Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.125Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.125Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.125Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.125Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:08.131Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.131Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.131Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.131Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.131Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.131Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.131Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.132Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.132Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.132Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.134Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkndh_zst4t8iz","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.134Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkndh_zst4t8iz","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.168Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.168Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.168Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.168Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.168Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":125,"remaining":75,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.168Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.169Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.209Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"type":"api","identifier":"::1","current":126,"remaining":74,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.209Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.209Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.247Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":268,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.247Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":268,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.287Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":38,"fetchDuration":40,"totalDuration":78,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.287Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.287Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.287Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.287Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":119,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.287Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":155,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"chartType":"dual-axis","recordCount":48,"queryTimeMs":155,"cacheHit":true,"fetchDuration":157,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":38,"fetchDuration":41,"totalDuration":79,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":120,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":156,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"chartType":"dual-axis","recordCount":46,"queryTimeMs":156,"cacheHit":true,"fetchDuration":156,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.288Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":157,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"chartType":"dual-axis","recordCount":94,"fetchDuration":158,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":80,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":120,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.289Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":155,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:08.293Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.293Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.294Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.294Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkndh_zst4t8iz","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":160,"userId":"[UUID]","statusCode":200,"totalDuration":160,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 177ms
{"@timestamp":"2025-10-17T08:39:08.317Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:08.327Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":348,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.327Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":348,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":349,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":349,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":349,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":349,"chartType":"dual-axis","totalDuration":203,"fetchDuration":158,"transformDuration":39,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":156,"parallelDuration":203,"duration":215,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":349,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":215,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":156,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":215,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":215,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.328Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkn93_vptbmm0d","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":349,"userId":"[UUID]","statusCode":200,"totalDuration":349,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 366ms
{"@timestamp":"2025-10-17T08:39:08.335Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:08.335Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:08.335Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:08.335Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:08.335Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:08.335Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:08.335Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:08.335Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:08.335Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:08.356Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:08.373Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulknjv_dgw187d1","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.373Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulknjv_dgw187d1","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.386Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulknk3_z09p1hrd","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.386Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulknk3_z09p1hrd","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.406Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":127,"remaining":73,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.406Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.406Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.421Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":128,"remaining":72,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.421Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.421Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.435Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:08.440Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":129,"remaining":71,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.440Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.440Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.453Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":130,"remaining":70,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.453Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.453Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.470Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:08.510Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:08.517Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.517Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.518Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":111,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.518Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.518Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.518Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.518Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.518Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.518Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:08.521Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.521Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.521Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.521Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulknjv_dgw187d1","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","statusCode":200,"totalDuration":148,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 174ms
{"@timestamp":"2025-10-17T08:39:08.522Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.523Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:08.530Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":7,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":2,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:08.535Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.535Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.535Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.535Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.535Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.535Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulknov_js3apvaq","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulknov_js3apvaq","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.543Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.584Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":41,"type":"api","identifier":"::1","current":131,"remaining":69,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.584Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":41,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.584Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":41,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.584Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":198,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.584Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.585Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":199,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.585Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.619Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":76,"type":"api","identifier":"::1","current":132,"remaining":68,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.619Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":76,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.619Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":76,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.653Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":267,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.653Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":267,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.694Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":40,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.694Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.694Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.694Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.694Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":110,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.694Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.694Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":151,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.694Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"chartType":"dual-axis","recordCount":48,"queryTimeMs":151,"cacheHit":true,"fetchDuration":151,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":34,"fetchDuration":42,"totalDuration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":110,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":152,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"chartType":"dual-axis","recordCount":46,"queryTimeMs":152,"cacheHit":true,"fetchDuration":152,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":152,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"chartType":"dual-axis","recordCount":94,"fetchDuration":152,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":76,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.695Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":111,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.696Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.696Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.696Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.696Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.696Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.696Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:08.698Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":2,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.699Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.699Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.699Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulknov_js3apvaq","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"userId":"[UUID]","statusCode":200,"totalDuration":157,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 172ms
{"@timestamp":"2025-10-17T08:39:08.716Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"chartType":"dual-axis","totalDuration":195,"fetchDuration":152,"transformDuration":35,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":152,"parallelDuration":195,"duration":207,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.730Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":207,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":152,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":207,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.731Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":208,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.731Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulknk3_z09p1hrd","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"userId":"[UUID]","statusCode":200,"totalDuration":345,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 369ms
{"@timestamp":"2025-10-17T08:39:08.733Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:08.733Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:08.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:08.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:08.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:08.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:08.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:08.734Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:08.734Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:08.760Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:08.794Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulknv1_x1t2hzv6","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.794Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulknv1_x1t2hzv6","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.806Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulknvb_q2du1c4o","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.806Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulknvb_q2du1c4o","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.830Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":133,"remaining":67,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.830Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.830Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.837Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:08.842Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":134,"remaining":66,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.842Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.842Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.862Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":135,"remaining":65,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.862Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.863Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.875Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":136,"remaining":64,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.875Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.875Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.877Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:08.934Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.934Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.934Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.934Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.934Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.934Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.935Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.935Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.935Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:08.938Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.938Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.938Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.938Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulknv1_x1t2hzv6","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","statusCode":200,"totalDuration":144,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 188ms
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":100,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.942Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.943Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:08.952Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":9,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":2,"slow":false},"chartsQuery":{"duration":5,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:08.955Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.956Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.956Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.956Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.956Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.956Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:08.961Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulko0h_3yt9exmf","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.961Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulko0h_3yt9exmf","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.962Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.962Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.962Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.962Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.962Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.962Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.962Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.962Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.962Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.963Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.997Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":137,"remaining":63,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.997Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.997Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:08.997Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.997Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.998Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:08.998Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.031Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":138,"remaining":62,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.031Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.031Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.067Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":261,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.068Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":32,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":35,"fetchDuration":37,"totalDuration":72,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":108,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":143,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":299,"chartType":"dual-axis","recordCount":48,"queryTimeMs":143,"cacheHit":true,"fetchDuration":143,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.105Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.106Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.106Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.106Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.106Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.106Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:09.106Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":32,"fetchDuration":38,"totalDuration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.106Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.107Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.107Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.107Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":109,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.107Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.107Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":145,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.107Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":46,"queryTimeMs":145,"cacheHit":true,"fetchDuration":145,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.107Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":145,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.107Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":94,"fetchDuration":145,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:09.110Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.110Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.110Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.110Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulko0h_3yt9exmf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","statusCode":200,"totalDuration":149,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 166ms
{"@timestamp":"2025-10-17T08:39:09.137Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"chartType":"dual-axis","totalDuration":186,"fetchDuration":145,"transformDuration":35,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":145,"parallelDuration":186,"duration":199,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":336,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.142Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":200,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":145,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":200,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.143Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":201,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.143Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulknvb_q2du1c4o","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":337,"userId":"[UUID]","statusCode":200,"totalDuration":337,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 354ms
{"@timestamp":"2025-10-17T08:39:09.154Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:09.154Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:09.154Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:09.155Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:09.155Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:09.155Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:09.155Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:09.155Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:09.155Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:09.183Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:09.185Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulko6h_t1icxozd","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.185Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulko6h_t1icxozd","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.201Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulko72_lj7sm53i","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.201Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulko72_lj7sm53i","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.219Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":139,"remaining":61,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.220Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.220Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.237Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":140,"remaining":60,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.237Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.238Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.256Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":141,"remaining":59,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.256Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.256Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.258Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:09.272Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":142,"remaining":58,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.272Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.272Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.292Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:09.320Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.320Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":64,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.320Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":100,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.320Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.320Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.320Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.321Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.321Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.321Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:09.324Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":2,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.324Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.324Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.324Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulko6h_t1icxozd","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","statusCode":200,"totalDuration":139,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 162ms
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkob5_anjqv691","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkob5_anjqv691","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.343Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.344Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:09.348Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":3,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":0,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:09.350Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.350Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.350Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.350Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.350Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.350Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.352Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.376Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":143,"remaining":57,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.376Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.376Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.388Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":187,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.388Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.388Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":187,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.388Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.410Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":144,"remaining":56,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.410Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.410Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.458Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":257,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.459Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":258,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.481Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.481Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.481Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.481Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.481Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.481Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.481Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.481Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.482Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:09.485Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":0,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.485Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.485Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.485Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkob5_anjqv691","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","statusCode":200,"totalDuration":142,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 156ms
{"@timestamp":"2025-10-17T08:39:09.495Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":37,"fetchDuration":37,"totalDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.495Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.495Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.495Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.495Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":107,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.495Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.495Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":143,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.496Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"chartType":"dual-axis","recordCount":48,"queryTimeMs":143,"cacheHit":true,"fetchDuration":143,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.496Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":38,"fetchDuration":37,"totalDuration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.496Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.496Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.496Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.496Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":108,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.496Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.497Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":144,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.497Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"chartType":"dual-axis","recordCount":46,"queryTimeMs":144,"cacheHit":true,"fetchDuration":145,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.497Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":145,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.497Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":296,"chartType":"dual-axis","recordCount":94,"fetchDuration":145,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.531Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.531Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.531Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.531Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.531Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.531Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.531Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"chartType":"dual-axis","totalDuration":181,"fetchDuration":145,"transformDuration":34,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.531Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":144,"parallelDuration":181,"duration":187,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.531Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.532Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":189,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":144,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":189,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.532Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.532Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulko72_lj7sm53i","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"userId":"[UUID]","statusCode":200,"totalDuration":331,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 346ms
{"@timestamp":"2025-10-17T08:39:09.538Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:09.560Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:09.558Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:09.559Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:09.559Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:09.559Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:09.559Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:09.559Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:09.559Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:09.559Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:09.559Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-17T08:39:09.572Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkoha_av56gy6z","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.572Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkoha_av56gy6z","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.585Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkohj_8pnhirbk","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.585Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkohj_8pnhirbk","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.607Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":145,"remaining":55,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.607Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.607Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.617Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":146,"remaining":54,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.618Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.618Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.643Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":147,"remaining":53,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.643Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.643Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.652Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"type":"api","identifier":"::1","current":148,"remaining":52,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.652Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.652Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.665Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:09.702Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:09.713Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:09.721Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.721Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.721Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":78,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.721Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.721Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":114,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.721Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.721Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:09.722Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.723Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:09.727Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":4,"slow":false},"memberCountQuery":{"duration":0,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.728Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.728Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":6,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.728Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkoha_av56gy6z","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"userId":"[UUID]","statusCode":200,"totalDuration":156,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 177ms
{"@timestamp":"2025-10-17T08:39:09.729Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":6,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":0,"slow":false},"chartsQuery":{"duration":3,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:09.731Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.731Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.731Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.731Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.731Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.731Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":146,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.737Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.748Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkomd_u5uhxzdf","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.748Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkomd_u5uhxzdf","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.775Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":190,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.775Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.776Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.776Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.780Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":149,"remaining":51,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.780Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.780Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.814Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":150,"remaining":50,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.814Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.814Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.846Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":261,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.847Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.885Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":39,"fetchDuration":39,"totalDuration":78,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.885Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.885Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.885Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.885Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":110,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.885Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":300,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.885Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":148,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.886Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":301,"chartType":"dual-axis","recordCount":48,"queryTimeMs":148,"cacheHit":true,"fetchDuration":148,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.890Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":39,"fetchDuration":43,"totalDuration":82,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":115,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":154,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"chartType":"dual-axis","recordCount":46,"queryTimeMs":154,"cacheHit":true,"fetchDuration":154,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":154,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"chartType":"dual-axis","recordCount":94,"fetchDuration":154,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":77,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":111,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.891Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.892Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.892Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.892Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:09.894Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":2,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.894Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":2,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.894Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":2,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.895Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkomd_u5uhxzdf","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","statusCode":200,"totalDuration":146,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 161ms
{"@timestamp":"2025-10-17T08:39:09.918Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":41,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":41,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"chartType":"dual-axis","totalDuration":201,"fetchDuration":154,"transformDuration":41,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":154,"parallelDuration":201,"duration":209,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":347,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":210,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":154,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":210,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.932Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":210,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.933Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkohj_8pnhirbk","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":348,"userId":"[UUID]","statusCode":200,"totalDuration":347,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 366ms
{"@timestamp":"2025-10-17T08:39:09.935Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:09.935Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:09.935Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:09.936Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:09.936Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:09.936Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:09.936Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:09.936Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:09.936Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:09.963Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:09.975Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkosc_rjoytgci","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.975Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkosc_rjoytgci","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:09.987Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkosk_4bi0iafz","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:09.987Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkosk_4bi0iafz","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.011Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":151,"remaining":49,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.011Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.011Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.021Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":152,"remaining":48,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.021Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.021Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.044Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:10.045Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":153,"remaining":47,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.045Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.045Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.055Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":154,"remaining":46,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.055Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.055Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.078Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:10.118Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.119Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.119Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.119Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.119Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.119Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.119Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.119Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.119Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:10.121Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.121Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":66,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.121Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":100,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.121Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.121Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.121Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.122Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.122Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.122Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.122Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.122Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:10.124Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":2,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.124Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.124Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.124Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkosc_rjoytgci","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","statusCode":200,"totalDuration":149,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 176ms
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:10.127Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":5,"slow":false,"component":"service","query":{"duration":2,"slow":false},"chartCountQuery":{"duration":2,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:10.130Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.130Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.130Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.130Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.130Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.130Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.137Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.145Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkoxd_7iye1m7o","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.145Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkoxd_7iye1m7o","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.170Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":184,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.171Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.173Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":186,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.173Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.177Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":155,"remaining":45,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.177Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.177Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.209Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":64,"type":"api","identifier":"::1","current":156,"remaining":44,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.210Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.210Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.242Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":255,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.242Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":255,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.280Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":38,"fetchDuration":38,"totalDuration":76,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.280Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":110,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":144,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"chartType":"dual-axis","recordCount":48,"queryTimeMs":144,"cacheHit":true,"fetchDuration":144,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":36,"fetchDuration":39,"totalDuration":75,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":108,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":144,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.281Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"chartType":"dual-axis","recordCount":46,"queryTimeMs":144,"cacheHit":true,"fetchDuration":144,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":145,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"chartType":"dual-axis","recordCount":94,"fetchDuration":145,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":72,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.282Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:10.286Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.286Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.286Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.287Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkoxd_7iye1m7o","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","statusCode":200,"totalDuration":141,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 156ms
{"@timestamp":"2025-10-17T08:39:10.316Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:10.318Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.318Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.318Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.319Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.319Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.319Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":37,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.319Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"chartType":"dual-axis","totalDuration":189,"fetchDuration":145,"transformDuration":37,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.319Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":144,"parallelDuration":189,"duration":197,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.319Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.319Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":197,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":144,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":197,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.319Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":197,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.319Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkosk_4bi0iafz","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":332,"userId":"[UUID]","statusCode":200,"totalDuration":332,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 350ms
{"@timestamp":"2025-10-17T08:39:10.333Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:10.333Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:10.333Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:10.333Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:10.333Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:10.333Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:10.333Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:10.333Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:10.334Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:10.345Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:10.355Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkp34_56m66zo7","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.355Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkp34_56m66zo7","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.368Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkp3c_096q1hqs","duration":1,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.369Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkp3c_096q1hqs","duration":1,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.391Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":157,"remaining":43,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.391Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.391Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.400Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":158,"remaining":42,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.400Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.400Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.425Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":159,"remaining":41,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.425Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.425Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.433Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:10.434Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":160,"remaining":40,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.434Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.434Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.468Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:10.490Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.490Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":65,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.490Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":99,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.490Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.490Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.490Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.490Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.490Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.490Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":135,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:10.494Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.494Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.494Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.494Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkp34_56m66zo7","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","statusCode":200,"totalDuration":139,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 158ms
{"@timestamp":"2025-10-17T08:39:10.504Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.504Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.504Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.505Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.505Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.505Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.505Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.505Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.505Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.505Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.505Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:10.515Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkp7n_1j2f4phi","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.516Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkp7n_1j2f4phi","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.517Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":12,"slow":false,"component":"service","query":{"duration":5,"slow":false},"chartCountQuery":{"duration":3,"slow":false},"chartsQuery":{"duration":4,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:10.519Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.519Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.519Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.519Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.519Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.519Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.521Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.550Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":161,"remaining":39,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.550Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.550Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.554Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":186,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.554Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.561Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":193,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.561Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.585Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":162,"remaining":38,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.585Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.585Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.623Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":255,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.625Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":257,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":32,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.659Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.659Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":74,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.659Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.659Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.659Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.659Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.660Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.660Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.660Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:10.660Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":292,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":34,"fetchDuration":37,"totalDuration":71,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.660Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":292,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.661Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.661Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.661Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":107,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.661Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.661Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":140,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.661Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":293,"chartType":"dual-axis","recordCount":48,"queryTimeMs":140,"cacheHit":true,"fetchDuration":140,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:10.662Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":32,"fetchDuration":37,"totalDuration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.662Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":294,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.663Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.663Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.663Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":102,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.663Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.663Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":142,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.663Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"chartType":"dual-axis","recordCount":46,"queryTimeMs":142,"cacheHit":true,"fetchDuration":142,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.663Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":142,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.663Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":295,"chartType":"dual-axis","recordCount":94,"fetchDuration":142,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:10.665Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":2,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.665Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.665Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.665Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkp7n_1j2f4phi","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"userId":"[UUID]","statusCode":200,"totalDuration":150,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 166ms
{"@timestamp":"2025-10-17T08:39:10.698Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.698Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.698Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":330,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.699Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.699Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.699Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.699Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"chartType":"dual-axis","totalDuration":180,"fetchDuration":142,"transformDuration":36,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.699Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":142,"parallelDuration":180,"duration":194,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.699Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.699Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":194,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":142,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":194,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.699Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.699Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkp3c_096q1hqs","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":331,"userId":"[UUID]","statusCode":200,"totalDuration":331,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 349ms
{"@timestamp":"2025-10-17T08:39:10.703Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:10.720Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:10.720Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:10.720Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:10.720Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:10.720Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:10.720Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:10.720Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:10.720Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:10.720Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:10.730Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:10.741Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkpdm_iz684gqo","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.741Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkpdm_iz684gqo","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.754Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkpe1_cyg36j00","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.754Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkpe1_cyg36j00","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.778Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":163,"remaining":37,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.778Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.778Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.787Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":164,"remaining":36,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.787Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.787Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.810Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":165,"remaining":35,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.810Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.810Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.820Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":166,"remaining":34,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.820Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.820Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.821Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:10.863Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:10.877Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-17T08:39:10.884Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.885Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":75,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.885Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.885Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.885Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.885Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.885Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.885Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.885Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:10.888Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.888Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.888Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.888Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkpdm_iz684gqo","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","statusCode":200,"totalDuration":147,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 174ms
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.893Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.894Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:10.913Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":19,"slow":false,"component":"service","query":{"duration":5,"slow":false},"chartCountQuery":{"duration":3,"slow":false},"chartsQuery":{"duration":11,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:10.918Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkpin_h7lzferr","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.918Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkpin_h7lzferr","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.918Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.918Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.918Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.918Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.919Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.919Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":165,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:10.920Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.920Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.920Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.920Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.920Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.921Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":167,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.921Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":167,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.921Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":167,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.921Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":167,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.921Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":167,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.950Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":167,"remaining":33,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.950Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.950Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.957Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":203,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.957Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.958Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":204,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.958Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:10.983Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":168,"remaining":32,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.983Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:10.983Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.027Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":273,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.027Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":273,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.050Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":132,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.051Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.051Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.051Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.051Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.051Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.051Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.051Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.051Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:11.054Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.054Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.054Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.054Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkpin_h7lzferr","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","statusCode":200,"totalDuration":136,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 159ms
{"@timestamp":"2025-10-17T08:39:11.061Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":307,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":36,"fetchDuration":34,"totalDuration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":105,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":141,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"chartType":"dual-axis","recordCount":48,"queryTimeMs":141,"cacheHit":true,"fetchDuration":141,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":35,"fetchDuration":35,"totalDuration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.062Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":308,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.063Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":104,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.063Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.063Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":142,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.063Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"chartType":"dual-axis","recordCount":46,"queryTimeMs":142,"cacheHit":true,"fetchDuration":142,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.063Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":143,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.063Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"chartType":"dual-axis","recordCount":94,"fetchDuration":143,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.083Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:11.098Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":344,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":36,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"chartType":"dual-axis","totalDuration":180,"fetchDuration":143,"transformDuration":36,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":142,"parallelDuration":180,"duration":205,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":206,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":142,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":206,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.099Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkpe1_cyg36j00","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":345,"userId":"[UUID]","statusCode":200,"totalDuration":345,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 365ms
{"@timestamp":"2025-10-17T08:39:11.100Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:11.100Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:11.100Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:11.100Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:11.100Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:11.100Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:11.100Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:11.101Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:11.101Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:11.124Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:11.133Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkpor_ztomjbwv","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.133Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkpor_ztomjbwv","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.147Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkpoz_twp1p6a4","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.147Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkpoz_twp1p6a4","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.168Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":169,"remaining":31,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.168Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.168Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.178Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":31,"type":"api","identifier":"::1","current":170,"remaining":30,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.179Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.179Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.199Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:11.202Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":171,"remaining":29,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.202Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.202Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.213Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":172,"remaining":28,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.213Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.213Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.234Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:11.270Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.270Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.270Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.270Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.270Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.270Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.270Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.270Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.271Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:11.275Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":2,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.275Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.275Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.275Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkpor_ztomjbwv","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","statusCode":200,"totalDuration":142,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 160ms
{"@timestamp":"2025-10-17T08:39:11.280Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.280Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.281Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.281Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.281Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.281Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.281Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.281Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.281Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.281Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.281Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:11.292Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":11,"slow":false,"component":"service","query":{"duration":5,"slow":false},"chartCountQuery":{"duration":2,"slow":false},"chartsQuery":{"duration":4,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:11.296Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkptc_jsteoam5","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.296Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkptc_jsteoam5","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.296Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.296Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.296Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.297Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.297Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.297Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":150,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:11.298Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.298Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.299Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.299Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.299Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.299Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.299Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.299Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.299Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.299Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.329Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":173,"remaining":27,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.330Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.330Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.332Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":185,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.332Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.334Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":187,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.335Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.362Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":66,"type":"api","identifier":"::1","current":174,"remaining":26,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.363Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.363Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":67,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.399Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.400Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":253,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":32,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.435Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.435Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":72,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.435Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.435Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.435Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.435Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.435Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.435Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.435Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":139,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
{"@timestamp":"2025-10-17T08:39:11.436Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":48,"indexLookupDuration":35,"fetchDuration":37,"totalDuration":72,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.436Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.436Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.436Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.436Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":104,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.436Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.436Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":137,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.436Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"chartType":"dual-axis","recordCount":48,"queryTimeMs":137,"cacheHit":true,"fetchDuration":137,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.437Z","level":"INFO","message":"Cache query completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":386,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","matchingKeys":"[REDACTED]","rowsReturned":46,"indexLookupDuration":32,"fetchDuration":37,"totalDuration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.437Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":89,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.437Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":322,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.437Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.437Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":537,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":102,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.437Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":290,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.438Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":121,"function":"QueryOrchestrator.executeCachePath","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":5289376.439999999,"duration":138,"cacheHit":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.438Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":291,"chartType":"dual-axis","recordCount":46,"queryTimeMs":138,"cacheHit":true,"fetchDuration":139,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.438Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":72,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":139,"parallelFetch":true,"cacheHits":{"primary":true,"secondary":true},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.438Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":291,"chartType":"dual-axis","recordCount":94,"fetchDuration":139,"cacheHit":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:11.440Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":3,"slow":false},"memberCountQuery":{"duration":1,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.440Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.440Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.440Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkptc_jsteoam5","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":144,"userId":"[UUID]","statusCode":200,"totalDuration":144,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 159ms
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":324,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":114,"function":"getResolvedColumns","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":324,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":119,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":324,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"DEBUG","message":"Column mapping cache hit","service":"bendcare-os","env":"development","file":"column-mapping-service.ts","line":56,"function":"ColumnMappingService.getMapping","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":324,"component":"column-mapping-service","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":248,"function":"ComboChartHandler.transform","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":81,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":324,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":33,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":112,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":324,"chartType":"dual-axis","totalDuration":174,"fetchDuration":139,"transformDuration":33,"recordCount":94,"cacheHit":true,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":1,"cacheMisses":0,"totalQueryTime":138,"parallelDuration":174,"duration":190,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":324,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.471Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":59,"function":"renderDashboardHandler","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":190,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":1,"cacheMisses":0,"cacheHitRate":100,"totalQueryTime":138,"parallelExecution":true,"filtersApplied":0,"nocache":false},"slow":false,"performance":{"target":2000,"actual":190,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.472Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.472Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkpoz_twp1p6a4","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":325,"userId":"[UUID]","statusCode":200,"totalDuration":325,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 343ms
{"@timestamp":"2025-10-17T08:39:11.483Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-17T08:39:11.502Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-17T08:39:11.502Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-17T08:39:11.502Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-17T08:39:11.502Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-17T08:39:11.502Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-17T08:39:11.502Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-17T08:39:11.502Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-17T08:39:11.502Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-17T08:39:11.502Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-17T08:39:11.510Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-17T08:39:11.511Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkpz3_l2uke3rp","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.512Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkpz3_l2uke3rp","duration":1,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.528Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkpzp_56q8e7t9","duration":0,"component":"api","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.528Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkpzp_56q8e7t9","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","method":"POST","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.549Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"type":"api","identifier":"::1","current":175,"remaining":25,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.549Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.549Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.562Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":176,"remaining":24,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.562Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.563Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.582Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":177,"remaining":23,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.582Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.583Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.596Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":178,"remaining":22,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.597Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.597Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.599Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-17T08:39:11.638Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-17T08:39:11.653Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.653Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":71,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.653Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.653Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.653Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.654Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.654Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.654Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.654Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":143,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:11.659Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"core_service","query":{"duration":2,"slow":false},"memberCountQuery":{"duration":2,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.659Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":5,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.659Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.659Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkpz3_l2uke3rp","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":148,"userId":"[UUID]","statusCode":200,"totalDuration":148,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 172ms
{"@timestamp":"2025-10-17T08:39:11.664Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.664Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":67,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.664Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.664Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.664Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.665Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.665Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.665Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.665Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.665Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":26,"function":"renderDashboardHandler","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.665Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":137,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":false,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-17T08:39:11.675Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":9,"slow":false,"component":"service","query":{"duration":6,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-17T08:39:11.680Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":83,"function":"eval","correlationId":"cor_mgulkq40_vh7ujkgj","duration":0,"component":"api","method":"GET","path":"/api/organizations","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.680Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":84,"function":"eval","correlationId":"cor_mgulkq40_vh7ujkgj","duration":0,"endpoint":"/api/organizations","method":"GET","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.680Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.680Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.680Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.680Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.681Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"queryHash":"b66f80418ed50fbb","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.681Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":209,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":51,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.684Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"query-orchestrator.ts","line":207,"function":"QueryOrchestrator.queryMeasures","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":156,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-10-17","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.712Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"type":"api","identifier":"::1","current":179,"remaining":21,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.712Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rate-limit-middleware.ts","line":50,"function":"RateLimitMiddleware.execute","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.712Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":32,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.722Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.722Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.722Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.722Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.745Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"type":"api","identifier":"::1","current":180,"remaining":20,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.745Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.745Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":65,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.792Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":264,"datasourceId":3,"measure":"Cancellations","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":34,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.793Z","level":"INFO","message":"Index lookup completed","service":"bendcare-os","env":"development","file":"indexed-analytics-cache.ts","line":352,"function":"IndexedAnalyticsCache.query","correlationId":"cor_mgulkpzp_56q8e7t9","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":265,"datasourceId":3,"measure":"Cash Transfer","frequency":"Monthly","practiceCount":0,"providerCount":0,"matchingKeys":"[REDACTED]","indexLookupDuration":35,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-17T08:39:11.813Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.813Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":68,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.813Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":58,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":101,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.813Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":61,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":133,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.814Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":102,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.814Z","level":"INFO","message":"Auth: auth_success","service":"bendcare-os","env":"development","file":"auth-middleware.ts","line":109,"function":"AuthMiddleware.execute","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"auth_success","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.814Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":71,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.814Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":81,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.814Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-middleware.ts","line":88,"function":"RBACMiddleware.execute","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":134,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-17T08:39:11.818Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"core-service.ts","line":223,"function":"OrganizationCoreService.getOrganizations","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"core_service","query":{"duration":1,"slow":false},"memberCountQuery":{"duration":2,"slow":false},"childrenCountQuery":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.818Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.818Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":120,"function":"eval","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-17T08:39:11.818Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-builder.ts","line":126,"function":"eval","correlationId":"cor_mgulkq40_vh7ujkgj","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":138,"userId":"[UUID]","statusCode":200,"totalDuration":138,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 153ms
^C
pstewart@Patricks-MacBook-Pro-2 bcos % 
