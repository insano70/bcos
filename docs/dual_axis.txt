Last login: Wed Oct 15 09:51:17 on ttys006
pstewart@Patricks-MacBook-Pro-2 ~ % cd bcos 
pstewart@Patricks-MacBook-Pro-2 bcos % ./dev.sh restart
================================
  BCOS Development Helper
================================
[INFO] Restarting BCOS application...
[INFO] Killing processes on port 4001...
[INFO] Killed processes: 76325
[INFO] Starting fresh development server...
[INFO] Starting development server on port 4001...

> bendcare-os@0.1.0 dev /Users/pstewart/bcos
> next dev -p ${PORT:-4001}

   ‚ñ≤ Next.js 15.5.3
   - Local:        http://localhost:4001
   - Network:      http://192.168.4.53:4001
   - Environments: .env.local, .env
   - Experiments (use with caution):
     ¬∑ optimizePackageImports

 ‚úì Starting...
 ‚úì Ready in 1843ms
 ‚úì Compiled /middleware in 330ms (407 modules)
üåê MIDDLEWARE: Processing request for: /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 ‚óã Compiling /dashboard/view/[dashboardId] ...
 ‚úì Compiled /dashboard/view/[dashboardId] in 3s (2234 modules)
 GET /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63?datePreset=this_year&startDate=2025-01-01&endDate=2025-12-31 200 in 3887ms
 ‚óã Compiling /api/admin/analytics/dashboards/[dashboardId] ...
 ‚úì Compiled /api/admin/analytics/dashboards/[dashboardId] in 2.2s (2671 modules)
{"@timestamp":"2025-10-15T15:07:54.835Z","level":"INFO","message":"Connecting to Redis","service":"bendcare-os","env":"development","file":"redis.ts","line":78,"function":"RedisClientManager.connect","component":"redis","host":"bcos-redis-dev-rt5vbv.serverless.use1.cache.amazonaws.com","port":6379,"username":"[REDACTED]","keyPrefix":"[REDACTED]","tls":true}
{"@timestamp":"2025-10-15T15:07:54.874Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:54.874Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
üåê MIDDLEWARE: Processing request for: /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63?datePreset=this_year&startDate=2025-01-01&endDate=2025-12-31 200 in 93ms
{"@timestamp":"2025-10-15T15:07:55.028Z","level":"INFO","message":"Redis connected successfully","service":"bendcare-os","env":"development","file":"redis.ts","line":109,"function":"EventEmitter.eval","component":"redis","host":"[REDACTED]","port":6379}
{"@timestamp":"2025-10-15T15:07:55.067Z","level":"INFO","message":"Redis ready for commands","service":"bendcare-os","env":"development","file":"redis.ts","line":119,"function":"EventEmitter.eval","component":"redis"}
{"@timestamp":"2025-10-15T15:07:55.109Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"type":"api","identifier":"::1","current":2,"remaining":198,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.109Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":235,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.109Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":236,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.233Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":1,"remaining":199,"limit":200}
{"@timestamp":"2025-10-15T15:07:55.234Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
üîê AUTH: Using access token from httpOnly cookie
{"@timestamp":"2025-10-15T15:07:55.235Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":362,"type":"api","identifier":"::1","current":3,"remaining":197,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.235Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":362,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.235Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":362,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["d6ew43SmkbZ3BKSvC1GNg", 1]
Query: select "jti", "user_id", "token_type", "blacklisted_at", "expires_at", "reason", "blacklisted_by", "ip_address", "user_agent" from "token_blacklist" where "token_blacklist"."jti" = $1 limit $2 -- params: ["d6ew43SmkbZ3BKSvC1GNg", 1]
{"@timestamp":"2025-10-15T15:07:55.290Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"sorsPP9c41AokDzny-VMNMD-N5HIs6MD","tokenSource":"[REDACTED]","validationDuration":56}
üîê AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-15T15:07:55.304Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.304Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.302Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":160,"function":"process.closeDb"}
{"@timestamp":"2025-10-15T15:07:55.401Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":261,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":90,"fromRedis":true}
{"@timestamp":"2025-10-15T15:07:55.401Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"sorsPP9c41AokDzny-VMNMD-N5HIs6MD","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":90,"duration":167}
{"@timestamp":"2025-10-15T15:07:55.402Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-15T15:07:55.402Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":168,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":91}
{"@timestamp":"2025-10-15T15:07:55.402Z","level":"INFO","message":"user context retrieved successfully from JWT token","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"GET","operation":"get_user_context","userId":"[UUID]","email":"[REDACTED]","rbac":{"roles":1,"permissions":90,"isSuperAdmin":true,"orgAdminFor":0},"organizations":{"direct":0,"accessible":0,"current":null},"duration":568,"slow":false,"component":"auth","cached":true}
 GET /api/auth/me 200 in 3050ms
{"@timestamp":"2025-10-15T15:07:55.405Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":532,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
{"@timestamp":"2025-10-15T15:07:55.406Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"type":"api","identifier":"::1","current":4,"remaining":196,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.406Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.406Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":102,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-15T15:07:55.420Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":547,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.421Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":186,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.421Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":312,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.421Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":548,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.421Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.421Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":548,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.421Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.422Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":549,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.422Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":549,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
{"@timestamp":"2025-10-15T15:07:55.428Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":211,"function":"RBACDashboardsServiceImpl.getDashboards","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"page":1},"empty":false,"duration":6,"slow":false,"component":"service","query":{"duration":6,"slow":false},"rbacScope":"all","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-15T15:07:55.432Z","level":"INFO","message":"dashboards counted","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":366,"function":"RBACDashboardsServiceImpl.getDashboardCount","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"count_dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"count":7,"duration":3,"metadata":{"query":{"duration":3,"slow":false},"rbacScope":"all","component":"service"},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.432Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"published":7,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":28,"averageChartsPerDashboard":4,"page":1,"pageSize":7},"duration":10,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.433Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":10,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:07:55.433Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4kv4x_9t8uoasb","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":560,"userId":"[UUID]","statusCode":200,"totalDuration":559,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 3080ms
{"@timestamp":"2025-10-15T15:07:55.440Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.440Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.440Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":136,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.510Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.510Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.510Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.510Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.510Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.510Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.510Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.510Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.510Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":206,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:261:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-15T15:07:55.576Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":272,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:261:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-15T15:07:55.719Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":108,"slow":false,"component":"service","query":{"duration":80,"slow":false},"chartCountQuery":{"duration":3,"slow":false},"chartsQuery":{"duration":25,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.719Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":208,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.719Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":209,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:07:55.719Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4kv4x_loyepygu","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":415,"userId":"[UUID]","statusCode":200,"totalDuration":415,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
 GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 200 in 3358ms
 ‚úì Compiled /api/admin/analytics/charts in 458ms (2674 modules)
{"@timestamp":"2025-10-15T15:07:56.418Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.419Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.456Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.456Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.456Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":38,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.490Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"type":"api","identifier":"::1","current":7,"remaining":193,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.490Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.490Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.567Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-15T15:07:56.575Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.575Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":85,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.575Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":119,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.575Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.575Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.575Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.576Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.576Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.576Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":158,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-15T15:07:56.581Z","level":"INFO","message":"charts list query completed - returned 49 of 49","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":49,"total":49,"chartTypeBreakdown":{"bar":22,"number":20,"stacked-bar":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1},"activeCount":49,"inactiveCount":0},"duration":5,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.582Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":6,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:07:56.582Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4kxr5_0wovtyaw","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":164,"userId":"[UUID]","statusCode":200,"totalDuration":164,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 837ms
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-15T15:07:56.595Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":1,"hasErrors":false,"errorCount":0}
 ‚úì Compiled /api/admin/analytics/dashboard/[dashboardId]/render in 425ms (2716 modules)
{"@timestamp":"2025-10-15T15:07:57.181Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-15T15:07:57.181Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-15T15:07:57.181Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-15T15:07:57.182Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-15T15:07:57.182Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-15T15:07:57.182Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-15T15:07:57.182Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-15T15:07:57.182Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-15T15:07:57.182Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-15T15:07:57.574Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-15T15:07:57.575Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-15T15:07:57.575Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-15T15:07:57.576Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-15T15:07:57.576Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-15T15:07:57.576Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-15T15:07:57.576Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-15T15:07:57.576Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-15T15:07:57.576Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-15T15:07:57.595Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.595Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.591Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":160,"function":"process.closeDb"}
{"@timestamp":"2025-10-15T15:07:57.640Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":45,"type":"api","identifier":"::1","current":8,"remaining":192,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.640Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":45,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.640Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":45,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.712Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"type":"api","identifier":"::1","current":9,"remaining":191,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.712Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.712Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.898Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-15T15:07:57.921Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":326,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.922Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":209,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.922Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":282,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.922Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":327,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.923Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.923Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":328,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.924Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.924Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":329,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.924Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":329,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Error: Route "/api/admin/analytics/dashboard/[dashboardId]/render" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at renderDashboardHandler (app/api/admin/analytics/dashboard/[dashboardId]/render/route.ts:47:11)
    at eval (lib/api/rbac-route-handler.ts:261:32)
  45 |   const startTime = Date.now();
  46 |   const { params } = args[0] as RenderDashboardParams;
> 47 |   const { dashboardId } = params;
     |           ^
  48 |
  49 |   log.info('Dashboard batch render request initiated', {
  50 |     dashboardId,
{"@timestamp":"2025-10-15T15:07:57.967Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":25,"function":"renderDashboardHandler","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":372,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.969Z","level":"INFO","message":"Dashboard universal filters applied","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"renderDashboardHandler","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":374,"dashboardId":"[UUID]","filters":{"hasDateRange":true,"dateRangePreset":"this_year"},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.969Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":374,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":true,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-15T15:07:57.976Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":7,"slow":false,"component":"service","query":{"duration":4,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":2,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-15T15:07:57.978Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":383,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.979Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":384,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.979Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":384,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.979Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":384,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.979Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":384,"queryHash":"209ca468fb904180","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.980Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":385,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-15T15:07:57.984Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":389,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.984Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":389,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.984Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":389,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.984Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":389,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.984Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":389,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.984Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":47,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":389,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.984Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":389,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.985Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":320,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":390,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-12-31","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.985Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":390,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:57.985Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":320,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":390,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-12-31","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.032Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":437,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.032Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.072Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":477,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.072Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.103Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":146,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":508,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"sizeKB":22,"cachedAt":"2025-10-15T14:05:42.477Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.104Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":472,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":509,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.104Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":608,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":72,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.105Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":389,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":120,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.105Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":510,"chartType":"dual-axis","recordCount":48,"queryTimeMs":120,"cacheHit":true,"fetchDuration":121,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.107Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":146,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":512,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"sizeKB":21,"cachedAt":"2025-10-15T14:05:42.428Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.107Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":472,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":512,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.108Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":608,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":36,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.108Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":389,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":0,"duration":123,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.108Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":513,"chartType":"dual-axis","recordCount":46,"queryTimeMs":123,"cacheHit":true,"fetchDuration":123,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.108Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":68,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":124,"parallelFetch":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.109Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":514,"chartType":"dual-axis","recordCount":94,"fetchDuration":124,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.146Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":551,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.146Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":110,"function":"getResolvedColumns","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":552,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.147Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":107,"function":"ComboChartHandler.transform","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":552,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.148Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":218,"function":"ComboChartHandler.transform","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.148Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":553,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":39,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.149Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":554,"chartType":"dual-axis","totalDuration":169,"fetchDuration":124,"transformDuration":39,"recordCount":94,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.149Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":0,"cacheMisses":1,"totalQueryTime":124,"parallelDuration":169,"duration":180,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.150Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":555,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.150Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"renderDashboardHandler","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":226,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":0,"cacheMisses":1,"cacheHitRate":0,"totalQueryTime":124,"parallelExecution":true,"filtersApplied":1,"nocache":false},"slow":false,"performance":{"target":2000,"actual":226,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.151Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":226,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:07:58.151Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4kyeo_p0161dud","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":556,"userId":"[UUID]","statusCode":200,"totalDuration":556,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 1556ms
 ‚úì Compiled /api/organizations in 343ms (2727 modules)
{"@timestamp":"2025-10-15T15:07:58.671Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.671Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.705Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":10,"remaining":190,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.705Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.705Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.738Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"type":"api","identifier":"::1","current":11,"remaining":189,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.739Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.739Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.810Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-15T15:07:58.820Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.821Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":82,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.821Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":116,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.821Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":151,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.821Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.822Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.822Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.822Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":152,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.823Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":153,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-15T15:07:58.830Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"index.ts","line":257,"function":"OrganizationsService.getOrganizations","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":5,"slow":false,"component":"service","query":{"duration":3,"slow":false},"enrichment":{"duration":2,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.830Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":7,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.830Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":7,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.831Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4kzmu_mpah9wyk","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"userId":"[UUID]","statusCode":200,"totalDuration":161,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 649ms
{"@timestamp":"2025-10-15T15:07:58.862Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.862Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.932Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":12,"remaining":188,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.933Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.933Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.968Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"type":"api","identifier":"::1","current":13,"remaining":187,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.968Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:58.968Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.038Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":176,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.038Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.039Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.039Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":177,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.039Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.040Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.040Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.040Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.041Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":179,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-15T15:07:59.048Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"index.ts","line":257,"function":"OrganizationsService.getOrganizations","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":6,"slow":false,"component":"service","query":{"duration":3,"slow":false},"enrichment":{"duration":3,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.048Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":7,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.049Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":8,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:07:59.049Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4l054_7o2t6ike","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":187,"userId":"[UUID]","statusCode":200,"totalDuration":187,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 210ms
üåê MIDDLEWARE: Processing request for: /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63?datePreset=this_year&startDate=2025-01-01&endDate=2025-12-31 200 in 466ms
{"@timestamp":"2025-10-15T15:08:06.895Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:06.895Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:06.922Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:06.922Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"endpoint":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:06.944Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":2,"remaining":198,"limit":200}
{"@timestamp":"2025-10-15T15:08:06.945Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
üîê AUTH: Using access token from httpOnly cookie
{"@timestamp":"2025-10-15T15:08:06.957Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"type":"api","identifier":"::1","current":3,"remaining":197,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:06.957Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:06.957Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":36,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:06.967Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"type":"api","identifier":"::1","current":1,"remaining":199,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:06.967Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:06.967Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:06.979Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"sorsPP9c41AokDzny-VMNMD-N5HIs6MD","tokenSource":"[REDACTED]","validationDuration":34}
üîê AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-15T15:08:06.990Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"type":"api","identifier":"::1","current":4,"remaining":196,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:06.990Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:06.990Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":69,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.001Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"type":"api","identifier":"::1","current":5,"remaining":195,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.001Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.001Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":106,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.085Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":261,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":90,"fromRedis":true}
{"@timestamp":"2025-10-15T15:08:07.086Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"sorsPP9c41AokDzny-VMNMD-N5HIs6MD","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":90,"duration":141}
{"@timestamp":"2025-10-15T15:08:07.086Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-15T15:08:07.086Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":141,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":91}
{"@timestamp":"2025-10-15T15:08:07.086Z","level":"INFO","message":"user context retrieved successfully from JWT token","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"GET","operation":"get_user_context","userId":"[UUID]","email":"[REDACTED]","rbac":{"roles":1,"permissions":90,"isSuperAdmin":true,"orgAdminFor":0},"organizations":{"direct":0,"accessible":0,"current":null},"duration":176,"slow":false,"component":"auth","cached":true}
 GET /api/auth/me 200 in 233ms
{"@timestamp":"2025-10-15T15:08:07.124Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":203,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-15T15:08:07.132Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":211,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.132Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.132Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":142,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.132Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":131,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":175,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":212,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":212,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":166,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":238,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":238,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":212,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.133Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":212,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:261:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-15T15:08:07.168Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":247,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:261:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
{"@timestamp":"2025-10-15T15:08:07.201Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":68,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.201Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":68,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.201Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":306,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-15T15:08:07.210Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":211,"function":"RBACDashboardsServiceImpl.getDashboards","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"page":1},"empty":false,"duration":7,"slow":false,"component":"service","query":{"duration":7,"slow":false},"rbacScope":"all","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-15T15:08:07.211Z","level":"INFO","message":"dashboards counted","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":366,"function":"RBACDashboardsServiceImpl.getDashboardCount","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"count_dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"count":7,"duration":1,"metadata":{"query":{"duration":1,"slow":false},"rbacScope":"all","component":"service"},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.211Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"published":7,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":28,"averageChartsPerDashboard":4,"page":1,"pageSize":7},"duration":10,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.211Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":10,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:07.211Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4l6bh_lw2crnzi","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":316,"userId":"[UUID]","statusCode":200,"totalDuration":316,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 365ms
{"@timestamp":"2025-10-15T15:08:07.213Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":12,"slow":false,"component":"service","query":{"duration":8,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":3,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.213Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":80,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.213Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":80,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:07.213Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4l6bh_46qwk7zp","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":292,"userId":"[UUID]","statusCode":200,"totalDuration":292,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
 GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 200 in 360ms
{"@timestamp":"2025-10-15T15:08:07.246Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.246Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.290Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":160,"function":"process.closeDb"}
{"@timestamp":"2025-10-15T15:08:07.321Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"type":"api","identifier":"::1","current":6,"remaining":194,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.321Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.321Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":75,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.354Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"type":"api","identifier":"::1","current":7,"remaining":193,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.354Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":108,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.355Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":109,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.427Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":181,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.428Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.428Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":107,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.428Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":182,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.428Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.428Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":182,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.428Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.428Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":182,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.428Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":182,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-15T15:08:07.434Z","level":"INFO","message":"charts list query completed - returned 49 of 49","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":49,"total":49,"chartTypeBreakdown":{"bar":22,"number":20,"stacked-bar":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1},"activeCount":49,"inactiveCount":0},"duration":6,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.435Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":7,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:07.435Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4l6m1_qkcj228o","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"userId":"[UUID]","statusCode":200,"totalDuration":189,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 210ms
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-15T15:08:07.447Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-15T15:08:07.491Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-15T15:08:07.491Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-15T15:08:07.491Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-15T15:08:07.492Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-15T15:08:07.492Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-15T15:08:07.492Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-15T15:08:07.492Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-15T15:08:07.492Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-15T15:08:07.492Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-15T15:08:07.497Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.497Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.534Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":8,"remaining":192,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.534Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.534Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.568Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":9,"remaining":191,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.568Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.569Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.638Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.638Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.639Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":104,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.639Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.639Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.639Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.639Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.639Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.639Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":142,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Error: Route "/api/admin/analytics/dashboard/[dashboardId]/render" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at renderDashboardHandler (app/api/admin/analytics/dashboard/[dashboardId]/render/route.ts:47:11)
    at eval (lib/api/rbac-route-handler.ts:261:32)
  45 |   const startTime = Date.now();
  46 |   const { params } = args[0] as RenderDashboardParams;
> 47 |   const { dashboardId } = params;
     |           ^
  48 |
  49 |   log.info('Dashboard batch render request initiated', {
  50 |     dashboardId,
{"@timestamp":"2025-10-15T15:08:07.671Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":25,"function":"renderDashboardHandler","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":174,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.672Z","level":"INFO","message":"Dashboard universal filters applied","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"renderDashboardHandler","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":175,"dashboardId":"[UUID]","filters":{"hasDateRange":true,"dateRangePreset":"this_year"},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.673Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":176,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":true,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-15T15:08:07.686Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":13,"slow":false,"component":"service","query":{"duration":10,"slow":false},"chartCountQuery":{"duration":2,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-15T15:08:07.688Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":191,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.689Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.689Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.689Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.689Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"queryHash":"209ca468fb904180","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.689Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":192,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-15T15:08:07.692Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.692Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.692Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.692Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.692Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.692Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":47,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.693Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":196,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.693Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":320,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":196,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-12-31","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.693Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":196,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.693Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":320,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":196,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-12-31","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.819Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":322,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.819Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.820Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":323,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.820Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.854Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":146,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":357,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"sizeKB":22,"cachedAt":"2025-10-15T14:05:42.477Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.855Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":472,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":358,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.855Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":608,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":36,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.855Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":389,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":162,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.855Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":358,"chartType":"dual-axis","recordCount":48,"queryTimeMs":162,"cacheHit":true,"fetchDuration":163,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.878Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-15T15:08:07.880Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-15T15:08:07.881Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-15T15:08:07.881Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-15T15:08:07.881Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-15T15:08:07.881Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-15T15:08:07.881Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-15T15:08:07.881Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-15T15:08:07.881Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-15T15:08:07.888Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":146,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":391,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"sizeKB":21,"cachedAt":"2025-10-15T14:05:42.428Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.888Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":472,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":391,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.888Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":608,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":68,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.888Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":389,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":0,"duration":195,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.888Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":391,"chartType":"dual-axis","recordCount":46,"queryTimeMs":195,"cacheHit":true,"fetchDuration":195,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.888Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":68,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":196,"parallelFetch":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.889Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":392,"chartType":"dual-axis","recordCount":94,"fetchDuration":197,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.897Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":160,"function":"process.closeDb"}
{"@timestamp":"2025-10-15T15:08:07.926Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":430,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.927Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":110,"function":"getResolvedColumns","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":430,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.927Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":107,"function":"ComboChartHandler.transform","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":430,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.927Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":218,"function":"ComboChartHandler.transform","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.927Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":430,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":38,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.927Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":430,"chartType":"dual-axis","totalDuration":238,"fetchDuration":197,"transformDuration":38,"recordCount":94,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.928Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":0,"cacheMisses":1,"totalQueryTime":197,"parallelDuration":238,"duration":254,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.928Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":431,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.928Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"renderDashboardHandler","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":289,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":0,"cacheMisses":1,"cacheHitRate":0,"totalQueryTime":197,"parallelExecution":true,"filtersApplied":1,"nocache":false},"slow":false,"performance":{"target":2000,"actual":289,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.928Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":289,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:07.928Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4l6s6_v21ik6tw","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":431,"userId":"[UUID]","statusCode":200,"totalDuration":431,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 480ms
{"@timestamp":"2025-10-15T15:08:07.967Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:07.967Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.001Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":34,"type":"api","identifier":"::1","current":10,"remaining":190,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.002Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.002Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.038Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":11,"remaining":189,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.038Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.038Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.107Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.107Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":69,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.107Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":105,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.107Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.107Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.107Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.107Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.107Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":140,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.108Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":141,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-15T15:08:08.111Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"index.ts","line":257,"function":"OrganizationsService.getOrganizations","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":3,"slow":false,"component":"service","query":{"duration":2,"slow":false},"enrichment":{"duration":1,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.111Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.112Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":4,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.112Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4l765_mhf1y6el","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":145,"userId":"[UUID]","statusCode":200,"totalDuration":145,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 162ms
{"@timestamp":"2025-10-15T15:08:08.135Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.135Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.172Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":12,"remaining":188,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.172Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.172Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.206Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"type":"api","identifier":"::1","current":13,"remaining":187,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.206Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":71,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.207Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":72,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.372Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":237,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-15T15:08:08.386Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":251,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.387Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":181,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.387Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":215,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.387Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.387Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.387Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":252,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.388Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.388Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":253,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.388Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":253,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-15T15:08:08.392Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"index.ts","line":257,"function":"OrganizationsService.getOrganizations","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":4,"slow":false,"component":"service","query":{"duration":2,"slow":false},"enrichment":{"duration":2,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.392Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":4,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.393Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":5,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:08.393Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4l7at_r9vfqfia","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":258,"userId":"[UUID]","statusCode":200,"totalDuration":258,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 275ms
üåê MIDDLEWARE: Processing request for: /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63
üåê MIDDLEWARE: Protected route detected
üåê MIDDLEWARE: Checking auth - access token: true, refresh token: true
üåê MIDDLEWARE: Access token valid - allowing access
üåê MIDDLEWARE: User authenticated (or has refresh token) - allowing request to proceed
 GET /dashboard/view/8a9a8def-656f-4c90-840e-bb89c7abcd63?datePreset=this_year&startDate=2025-01-01&endDate=2025-12-31 200 in 85ms
{"@timestamp":"2025-10-15T15:08:11.359Z","level":"INFO","message":"GET /api/admin/analytics/dashboards - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.359Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.371Z","level":"INFO","message":"GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.371Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.485Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"type":"api","identifier":"::1","current":14,"remaining":186,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.485Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.485Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":126,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.485Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","type":"api","identifier":"::1","current":15,"remaining":185,"limit":200}
{"@timestamp":"2025-10-15T15:08:11.485Z","level":"INFO","message":"JWT authentication middleware initiated","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":100,"function":"requireJWTAuth","url":"http://localhost:4001/api/auth/me","method":"GET","hasAuthHeader":false,"hasCookieHeader":"[REDACTED]"}
üîê AUTH: Using access token from httpOnly cookie
{"@timestamp":"2025-10-15T15:08:11.486Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":115,"type":"api","identifier":"::1","current":16,"remaining":184,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.486Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":115,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.486Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":115,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.520Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"type":"api","identifier":"::1","current":17,"remaining":183,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.520Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"pathname":"/api/admin/analytics/dashboards","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.520Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":161,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.520Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"type":"api","identifier":"::1","current":18,"remaining":182,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.520Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.520Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":149,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.521Z","level":"INFO","message":"Auth: jwt_validation","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":153,"function":"requireJWTAuth","component":"auth","action":"jwt_validation","success":true,"userId":"[UUID]","sessionId":"sorsPP9c41AokDzny-VMNMD-N5HIs6MD","tokenSource":"[REDACTED]","validationDuration":36}
üîê AUTH: JWT cache miss, falling back to database query
{"@timestamp":"2025-10-15T15:08:11.635Z","level":"DEBUG","message":"Redis user context cache hit","service":"bendcare-os","env":"development","file":"cached-user-context.ts","line":261,"function":"eval","userId":"[UUID]","rolesCount":1,"permissionsCount":90,"fromRedis":true}
{"@timestamp":"2025-10-15T15:08:11.636Z","level":"INFO","message":"JWT authentication completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":189,"function":"requireJWTAuth","userId":"[UUID]","sessionId":"sorsPP9c41AokDzny-VMNMD-N5HIs6MD","tokenSource":"[REDACTED]","cacheHit":true,"roleCount":1,"permissionCount":90,"duration":151}
{"@timestamp":"2025-10-15T15:08:11.636Z","level":"WARN","message":"Security: jwt_authentication_successful","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":199,"function":"requireJWTAuth","component":"security","event":"jwt_authentication_successful","severity":"low","action":"jwt_middleware_success","userId":"[UUID]","tokenValidated":"[REDACTED]","rbacContextLoaded":true,"cacheOptimized":true}
{"@timestamp":"2025-10-15T15:08:11.636Z","level":"INFO","message":"JWT middleware completed","service":"bendcare-os","env":"development","file":"jwt-auth.ts","line":207,"function":"requireJWTAuth","duration":151,"performanceTiming":true,"tokenValidationTime":"[REDACTED]","cacheEnabled":true,"totalOperations":91}
{"@timestamp":"2025-10-15T15:08:11.636Z","level":"INFO","message":"user context retrieved successfully from JWT token","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"GET","operation":"get_user_context","userId":"[UUID]","email":"[REDACTED]","rbac":{"roles":1,"permissions":90,"isSuperAdmin":true,"orgAdminFor":0},"organizations":{"direct":0,"accessible":0,"current":null},"duration":268,"slow":false,"component":"auth","cached":true}
 GET /api/auth/me 200 in 315ms
{"@timestamp":"2025-10-15T15:08:11.672Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":313,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":321,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":160,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":160,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":321,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":321,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":194,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.680Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":309,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.681Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.681Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.681Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":1,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.681Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":322,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.681Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":322,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.681Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.681Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.681Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":310,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:26:25)
    at eval (lib/api/rbac-route-handler.ts:261:32)
  24 |
  25 |   log.info('Dashboard get request initiated', {
> 26 |     dashboardId: params.dashboardId,
     |                         ^
  27 |     requestingUserId: userContext.user_id,
  28 |   });
  29 |
{"@timestamp":"2025-10-15T15:08:11.713Z","level":"INFO","message":"Dashboard get request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":29,"function":"getDashboardHandler","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":342,"dashboardId":"[UUID]","requestingUserId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
Error: Route "/api/admin/analytics/dashboards/[dashboardId]" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getDashboardHandler (app/api/admin/analytics/dashboards/[dashboardId]/route.ts:35:71)
    at eval (lib/api/rbac-route-handler.ts:261:32)
  33 |
  34 |     // Get dashboard with automatic permission checking
> 35 |     const dashboard = await dashboardsService.getDashboardById(params.dashboardId);
     |                                                                       ^
  36 |
  37 |     if (!dashboard) {
  38 |       return createErrorResponse('Dashboard not found', 404);
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email", count("dashboard_charts"."chart_definition_id") from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" left join "dashboard_charts" on "dashboards"."dashboard_id" = "dashboard_charts"."dashboard_id" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) group by "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "users"."user_id", "users"."first_name", "users"."last_name", "users"."email" order by "dashboards"."created_at" desc limit $3 -- params: [true, true, 1000000]
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-15T15:08:11.756Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":211,"function":"RBACDashboardsServiceImpl.getDashboards","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"page":1},"empty":false,"duration":75,"slow":false,"component":"service","query":{"duration":75,"slow":false},"rbacScope":"all","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
Query: select count(*) from "dashboards" where ("dashboards"."is_active" = $1 and "dashboards"."is_published" = $2) -- params: [true, true]
{"@timestamp":"2025-10-15T15:08:11.755Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":160,"function":"process.closeDb"}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-15T15:08:11.757Z","level":"INFO","message":"dashboards counted","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":366,"function":"RBACDashboardsServiceImpl.getDashboardCount","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"count_dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"count":7,"duration":1,"metadata":{"query":{"duration":1,"slow":false},"rbacScope":"all","component":"service"},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.757Z","level":"INFO","message":"dashboards list query completed - returned 7 of 7","service":"bendcare-os","env":"development","file":"route.ts","line":63,"function":"getDashboardsHandler","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_dashboards","resourceType":"dashboards","userId":"[UUID]","filters":{"is_active":true,"is_published":true},"filterCount":2,"results":{"returned":7,"total":7,"published":7,"draft":0,"hasDefault":true,"defaultDashboardId":"[UUID]","totalCharts":28,"averageChartsPerDashboard":4,"page":1,"pageSize":7},"duration":76,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.757Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":76,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
{"@timestamp":"2025-10-15T15:08:11.758Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4l9rr_94ur9pj7","method":"GET","path":"/api/admin/analytics/dashboards","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":399,"userId":"[UUID]","statusCode":200,"totalDuration":399,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards"}}
 GET /api/admin/analytics/dashboards?is_published=true&is_active=true 200 in 437ms
{"@timestamp":"2025-10-15T15:08:11.760Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":14,"slow":false,"component":"service","query":{"duration":9,"slow":false},"chartCountQuery":{"duration":2,"slow":false},"chartsQuery":{"duration":3,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.760Z","level":"DEBUG","message":"DB: SELECT on dashboards","service":"bendcare-os","env":"development","file":"route.ts","line":41,"function":"getDashboardHandler","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","component":"database","operation":"SELECT","table":"dashboards","duration":79,"rowCount":1,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.760Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":79,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
{"@timestamp":"2025-10-15T15:08:11.760Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4l9rr_ok02wrmj","method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":389,"userId":"[UUID]","statusCode":200,"totalDuration":389,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63"}}
 GET /api/admin/analytics/dashboards/8a9a8def-656f-4c90-840e-bb89c7abcd63 200 in 428ms
{"@timestamp":"2025-10-15T15:08:11.785Z","level":"INFO","message":"GET /api/admin/analytics/charts - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:11.785Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/charts","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:11.818Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"type":"api","identifier":"::1","current":19,"remaining":181,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:11.818Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:11.818Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":33,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:11.855Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"type":"api","identifier":"::1","current":20,"remaining":180,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:11.855Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"pathname":"/api/admin/analytics/charts","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:11.855Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":70,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.012Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.013Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/charts","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":157,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.013Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":195,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.013Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.013Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.014Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":229,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.014Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.014Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":229,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.015Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":230,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."is_active" = $1 order by "chart_definitions"."created_at" desc limit $2 -- params: [true, 1000000]
Query: select count(*) from "chart_definitions" where "chart_definitions"."is_active" = $1 -- params: [true]
{"@timestamp":"2025-10-15T15:08:12.027Z","level":"INFO","message":"charts list query completed - returned 49 of 49","service":"bendcare-os","env":"development","file":"route.ts","line":50,"function":"getChartsHandler","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_charts","resourceType":"chart_definitions","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":49,"total":49,"chartTypeBreakdown":{"bar":22,"number":20,"stacked-bar":2,"dual-axis":2,"progress-bar":1,"table":1,"horizontal-bar":1},"activeCount":49,"inactiveCount":0},"duration":11,"slow":false,"component":"analytics","_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.028Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":13,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
{"@timestamp":"2025-10-15T15:08:12.028Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4la49_54wmuu6e","method":"GET","path":"/api/admin/analytics/charts","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":243,"userId":"[UUID]","statusCode":200,"totalDuration":243,"_contextMetadata":{"method":"GET","path":"/api/admin/analytics/charts"}}
 GET /api/admin/analytics/charts?is_active=true 200 in 260ms
üåê MIDDLEWARE: ‚úì CSRF validated for POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render
{"@timestamp":"2025-10-15T15:08:12.045Z","level":"DEBUG","message":"Request sanitization completed","service":"bendcare-os","env":"development","file":"request-sanitization.ts","line":232,"function":"sanitizeRequestBody","duration":0,"hasErrors":false,"errorCount":0}
{"@timestamp":"2025-10-15T15:08:12.068Z","level":"INFO","message":"POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.068Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","requiredPermissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAllPermissions":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.105Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"type":"api","identifier":"::1","current":21,"remaining":179,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.105Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"limitType":"api","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.105Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":37,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.145Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"type":"api","identifier":"::1","current":22,"remaining":178,"limit":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.145Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.145Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":77,"component":"auth","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.215Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.215Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":70,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.215Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.215Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.215Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.215Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.215Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"requireAll":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.215Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"userId":"[UUID]","permissions":["analytics:read:all","analytics:read:organization","analytics:read:own"],"rbacDuration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.215Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":147,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Error: Route "/api/admin/analytics/dashboard/[dashboardId]/render" used `params.dashboardId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at renderDashboardHandler (app/api/admin/analytics/dashboard/[dashboardId]/render/route.ts:47:11)
    at eval (lib/api/rbac-route-handler.ts:261:32)
  45 |   const startTime = Date.now();
  46 |   const { params } = args[0] as RenderDashboardParams;
> 47 |   const { dashboardId } = params;
     |           ^
  48 |
  49 |   log.info('Dashboard batch render request initiated', {
  50 |     dashboardId,
{"@timestamp":"2025-10-15T15:08:12.246Z","level":"INFO","message":"Dashboard batch render request initiated","service":"bendcare-os","env":"development","file":"route.ts","line":25,"function":"renderDashboardHandler","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.246Z","level":"INFO","message":"Dashboard universal filters applied","service":"bendcare-os","env":"development","file":"route.ts","line":40,"function":"renderDashboardHandler","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"dashboardId":"[UUID]","filters":{"hasDateRange":true,"dateRangePreset":"this_year"},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.246Z","level":"INFO","message":"Dashboard batch render initiated","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":55,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":178,"dashboardId":"[UUID]","userId":"[UUID]","hasUniversalFilters":true,"organizationFilter":null,"queryDeduplicationEnabled":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "dashboards"."dashboard_id", "dashboards"."dashboard_name", "dashboards"."dashboard_description", "dashboards"."layout_config", "dashboards"."dashboard_category_id", "dashboards"."organization_id", "dashboards"."created_by", "dashboards"."created_at", "dashboards"."updated_at", "dashboards"."is_active", "dashboards"."is_published", "dashboards"."is_default", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "dashboards" left join "chart_categories" on "dashboards"."dashboard_category_id" = "chart_categories"."chart_category_id" left join "users" on "dashboards"."created_by" = "users"."user_id" where "dashboards"."dashboard_id" = $1 limit $2 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63", 1]
Query: select count(*) from "dashboard_charts" where "dashboard_charts"."dashboard_id" = $1 -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "dashboard_charts"."position_config" from "dashboard_charts" inner join "chart_definitions" on "dashboard_charts"."chart_definition_id" = "chart_definitions"."chart_definition_id" where "dashboard_charts"."dashboard_id" = $1 order by "dashboard_charts"."added_at" -- params: ["8a9a8def-656f-4c90-840e-bb89c7abcd63"]
{"@timestamp":"2025-10-15T15:08:12.251Z","level":"INFO","message":"dashboard retrieved successfully","service":"bendcare-os","env":"development","file":"rbac-dashboards-service.ts","line":336,"function":"RBACDashboardsServiceImpl.getDashboardById","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"read_dashboard","resourceType":"dashboard","resourceId":"[UUID]","resourceName":"Single Dual","userId":"[UUID]","found":true,"duration":5,"slow":false,"component":"service","query":{"duration":3,"slow":false},"chartCountQuery":{"duration":1,"slow":false},"chartsQuery":{"duration":1,"slow":false},"chartCount":1,"rbacScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "chart_definitions"."chart_definition_id", "chart_definitions"."chart_name", "chart_definitions"."chart_description", "chart_definitions"."chart_type", "chart_definitions"."data_source", "chart_definitions"."chart_config", "chart_definitions"."access_control", "chart_definitions"."data_source_id", "chart_definitions"."chart_category_id", "chart_definitions"."created_by", "chart_definitions"."created_at", "chart_definitions"."updated_at", "chart_definitions"."is_active", "chart_categories"."chart_category_id", "chart_categories"."category_name", "chart_categories"."category_description", "chart_categories"."parent_category_id", "chart_categories"."created_at", "chart_categories"."updated_at", "users"."user_id", "users"."email", "users"."first_name", "users"."last_name", "users"."password_hash", "users"."email_verified", "users"."is_active", "users"."provider_uid", "users"."created_at", "users"."updated_at", "users"."deleted_at" from "chart_definitions" left join "chart_categories" on "chart_definitions"."chart_category_id" = "chart_categories"."chart_category_id" left join "users" on "chart_definitions"."created_by" = "users"."user_id" where "chart_definitions"."chart_definition_id" = $1 limit $2 -- params: ["b0f26439-c29e-4880-8e87-6903e64564de", 1]
{"@timestamp":"2025-10-15T15:08:12.253Z","level":"INFO","message":"Dashboard charts loaded","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":136,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":185,"dashboardId":"[UUID]","totalCharts":1,"validCharts":1,"chartTypes":["dual-axis"],"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.253Z","level":"INFO","message":"Processing chart in batch","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":154,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":185,"chartId":"[UUID]","chartName":"dual2","chartType":"dual-axis","batchSupported":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.254Z","level":"INFO","message":"Batch chart config prepared","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":222,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":186,"chartId":"[UUID]","chartType":"dual-axis","chartName":"dual2","hasGroupBy":true,"groupByValue":"practice","hasDualAxisConfig":true,"hasAggregation":false,"runtimeFilterKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.254Z","level":"DEBUG","message":"Query hash generated","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":95,"function":"generateQueryHash","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":186,"dataSourceId":3,"hashLength":64,"signatureKeys":"[REDACTED]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.254Z","level":"INFO","message":"Query cache miss - executing query","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":161,"function":"DashboardQueryCache.get","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":186,"queryHash":"209ca468fb904180","cacheSize":0,"deduplication":"miss","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.254Z","level":"INFO","message":"Chart configuration resolved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":28,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":186,"chartType":"dual-axis","dataSourceId":3,"hasRuntimeFilters":true,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
Query: select "data_source_id", "data_source_name", "data_source_description", "table_name", "schema_name", "database_type", "connection_config", "is_active", "requires_auth", "created_at", "updated_at", "created_by" from "chart_data_sources" where "chart_data_sources"."data_source_id" = $1 -- params: [3]
Query: select count(*) from "chart_data_source_columns" where ("chart_data_source_columns"."data_source_id" = $1 and "chart_data_source_columns"."is_active" = $2) -- params: [3, true]
{"@timestamp":"2025-10-15T15:08:12.257Z","level":"INFO","message":"Data source access check passed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":207,"function":"ChartDataOrchestrator.verifyDataSourceAccess","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"dataSourceId":3,"dataSourceName":"App Measures with Entities","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.257Z","level":"INFO","message":"Data source access verified","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":36,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"dataSourceId":3,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.257Z","level":"INFO","message":"Runtime filters merged","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":42,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"chartType":"dual-axis","hasStartDate":true,"hasEndDate":true,"hasPracticeUid":false,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.257Z","level":"INFO","message":"Chart handler retrieved","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":55,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"chartType":"dual-axis","handlerType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.257Z","level":"INFO","message":"Chart configuration validated","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":64,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"chartType":"dual-axis","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.257Z","level":"INFO","message":"Fetching dual-axis data in parallel","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":47,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"chartType":"dual-axis","primaryMeasure":"Cancellations","secondaryMeasure":"Cash Transfer","userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.257Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":189,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.258Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":320,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":190,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-12-31","limit":10000,"measure":"Cancellations","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.258Z","level":"INFO","message":"Fetching chart data with Redis cache integration","service":"bendcare-os","env":"development","file":"base-handler.ts","line":42,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":190,"chartType":"dual-axis","dataSourceId":3,"userId":"[UUID]","hasDataSourceId":true,"note":"Passing UserContext to enable Redis cache path","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.258Z","level":"INFO","message":"Building analytics query with caching","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":320,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":190,"params":{"data_source_id":3,"start_date":"2025-01-01","end_date":"2025-12-31","limit":10000,"measure":"Cash Transfer","frequency":"Monthly","advanced_filters":[]},"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.294Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":226,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.294Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.295Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.295Z","level":"DEBUG","message":"Chart context built","service":"bendcare-os","env":"development","file":"chart-context.ts","line":46,"function":"buildChartRenderContext","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","userId":"[UUID]","permissionScope":"all","practiceCount":0,"providerCount":0,"organizationCount":0,"includesHierarchy":false,"duration":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.330Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":146,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":48,"sizeKB":22,"cachedAt":"2025-10-15T14:05:42.477Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.330Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":472,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":48,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.330Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":608,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":48,"afterRBAC":48,"finalRowCount":48,"duration":36,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.330Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":389,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cancellations","rowCount":48,"totalCount":48,"duration":73,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.330Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":262,"chartType":"dual-axis","recordCount":48,"queryTimeMs":73,"cacheHit":true,"fetchDuration":73,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.331Z","level":"INFO","message":"Data source cache hit","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":146,"function":"DataSourceCacheService.getCached","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"cacheKey":"[REDACTED]","cacheLevel":0,"rowCount":46,"sizeKB":21,"cachedAt":"2025-10-15T14:05:42.428Z","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.331Z","level":"WARN","message":"Security: RBAC filter: all scope, no filtering","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":472,"function":"DataSourceCacheService.applyRBACFilter","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"component":"security","event":"RBAC filter: all scope, no filtering","severity":"low","userId":"[UUID]","rowCount":46,"permissionScope":"all","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.331Z","level":"INFO","message":"Data source served from cache (server-filtered)","service":"bendcare-os","env":"development","file":"data-source-cache.ts","line":608,"function":"DataSourceCacheService.fetchDataSource","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","cacheKey":"[REDACTED]","cacheLevel":0,"cachedRowCount":46,"afterRBAC":46,"finalRowCount":46,"duration":36,"userId":"[UUID]","permissionScope":"all","security":"filtered_before_client_send","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.331Z","level":"INFO","message":"Analytics query completed (with caching)","service":"bendcare-os","env":"development","file":"analytics-query-builder.ts","line":389,"function":"AnalyticsQueryBuilder.queryMeasures","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dataSourceId":3,"measure":"Cash Transfer","rowCount":46,"totalCount":0,"duration":73,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.331Z","level":"INFO","message":"Chart data fetched successfully","service":"bendcare-os","env":"development","file":"base-handler.ts","line":54,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"chartType":"dual-axis","recordCount":46,"queryTimeMs":73,"cacheHit":true,"fetchDuration":73,"userId":"[UUID]","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.331Z","level":"INFO","message":"Dual-axis data fetched successfully","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":68,"function":"ComboChartHandler.fetchData","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","primaryCount":48,"secondaryCount":46,"totalCount":94,"duration":74,"parallelFetch":true,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.331Z","level":"INFO","message":"Chart data fetched","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":71,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":263,"chartType":"dual-axis","recordCount":94,"fetchDuration":74,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.371Z","level":"DEBUG","message":"Data source config cache hit","service":"bendcare-os","env":"development","file":"chart-config-cache.ts","line":50,"function":"ChartConfigCacheService.getDataSourceConfig","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":303,"component":"chart-config-cache","dataSourceId":3,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.372Z","level":"DEBUG","message":"All columns resolved","service":"bendcare-os","env":"development","file":"column-resolver.ts","line":110,"function":"getResolvedColumns","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":304,"dataSourceId":3,"resolved":{"measureColumn":"numeric_value","dateColumn":"date_value","timePeriodColumn":"time_period","practiceColumn":"practice_uid","providerColumn":"provider_uid"},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.372Z","level":"DEBUG","message":"Resolved columns for dual-axis chart","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":107,"function":"ComboChartHandler.transform","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":304,"dataSourceId":3,"dateColumn":"date_value","measureColumn":"numeric_value","_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.372Z","level":"INFO","message":"Dual-axis data transformation completed","service":"bendcare-os","env":"development","file":"combo-handler.ts","line":218,"function":"ComboChartHandler.transform","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","labelCount":9,"primaryDataPoints":48,"secondaryDataPoints":46,"primaryMeasureType":"count","secondaryMeasureType":"currency","duration":41,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.372Z","level":"INFO","message":"Chart data transformed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":80,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":304,"chartType":"dual-axis","datasetCount":2,"labelCount":9,"transformDuration":41,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.372Z","level":"INFO","message":"Chart data orchestration completed","service":"bendcare-os","env":"development","file":"chart-data-orchestrator.ts","line":111,"function":"ChartDataOrchestrator.orchestrate","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":304,"chartType":"dual-axis","totalDuration":118,"fetchDuration":74,"transformDuration":41,"recordCount":94,"hasColumns":false,"columnCount":0,"hasFormattedData":false,"formattedRowCount":0,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.372Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"dashboard-renderer.ts","line":306,"function":"DashboardRenderer.renderDashboard","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","chartsRendered":1,"cacheHits":0,"cacheMisses":1,"totalQueryTime":74,"parallelDuration":118,"duration":126,"queryDeduplication":{"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalCharts":1,"queriesSaved":0},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.372Z","level":"INFO","message":"Query cache cleared","service":"bendcare-os","env":"development","file":"dashboard-query-cache.ts","line":184,"function":"DashboardQueryCache.clear","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":304,"uniqueQueries":1,"queriesDeduped":0,"deduplicationRate":"0%","totalRequests":1,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.372Z","level":"INFO","message":"Dashboard batch render completed","service":"bendcare-os","env":"development","file":"route.ts","line":58,"function":"renderDashboardHandler","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","dashboardId":"[UUID]","userId":"[UUID]","component":"analytics","operation":"batch_render","duration":157,"metrics":{"chartsRendered":1,"queriesExecuted":1,"cacheHits":0,"cacheMisses":1,"cacheHitRate":0,"totalQueryTime":74,"parallelExecution":true,"filtersApplied":1,"nocache":false},"slow":false,"performance":{"target":2000,"actual":157,"overTarget":false},"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.373Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":157,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
{"@timestamp":"2025-10-15T15:08:12.373Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4labv_v4tyad29","method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":305,"userId":"[UUID]","statusCode":200,"totalDuration":305,"_contextMetadata":{"method":"POST","path":"/api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render"}}
 POST /api/admin/analytics/dashboard/8a9a8def-656f-4c90-840e-bb89c7abcd63/render 200 in 325ms
{"@timestamp":"2025-10-15T15:08:12.417Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.417Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.451Z","level":"INFO","message":"Registering chart type handlers","service":"bendcare-os","env":"development","file":"index.ts","line":43,"function":"registerAllHandlers"}
{"@timestamp":"2025-10-15T15:08:12.453Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"line","totalHandlers":1}
{"@timestamp":"2025-10-15T15:08:12.453Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"bar","totalHandlers":2}
{"@timestamp":"2025-10-15T15:08:12.453Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"pie","totalHandlers":3}
{"@timestamp":"2025-10-15T15:08:12.453Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"table","totalHandlers":4}
{"@timestamp":"2025-10-15T15:08:12.453Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"number","totalHandlers":5}
{"@timestamp":"2025-10-15T15:08:12.453Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"progress-bar","totalHandlers":6}
{"@timestamp":"2025-10-15T15:08:12.453Z","level":"INFO","message":"Chart type handler registered","service":"bendcare-os","env":"development","file":"chart-type-registry.ts","line":24,"function":"ChartTypeRegistry.register","chartType":"dual-axis","totalHandlers":7}
{"@timestamp":"2025-10-15T15:08:12.453Z","level":"INFO","message":"Chart type handlers registered successfully","service":"bendcare-os","env":"development","file":"index.ts","line":66,"function":"registerAllHandlers","count":7,"types":["line","bar","pie","table","number","progress-bar","dual-axis"]}
{"@timestamp":"2025-10-15T15:08:12.470Z","level":"INFO","message":"Main database connections closed","service":"bendcare-os","env":"development","file":"index.ts","line":160,"function":"process.closeDb"}
{"@timestamp":"2025-10-15T15:08:12.534Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"type":"api","identifier":"::1","current":23,"remaining":177,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.534Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":117,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.535Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":118,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.571Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"type":"api","identifier":"::1","current":24,"remaining":176,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.571Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.571Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":154,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.644Z","level":"DEBUG","message":"User context cache hit","service":"bendcare-os","env":"development","file":"user-context.ts","line":288,"function":"getUserContextSafe","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.644Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":73,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.644Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":110,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.644Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":227,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.645Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.645Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.645Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.645Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.645Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":228,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-15T15:08:12.648Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"index.ts","line":257,"function":"OrganizationsService.getOrganizations","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":2,"slow":false,"component":"service","query":{"duration":2,"slow":false},"enrichment":{"duration":0,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.648Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":3,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.648Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":3,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.648Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4lalo_m9dfvd20","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":231,"userId":"[UUID]","statusCode":200,"totalDuration":231,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 253ms
{"@timestamp":"2025-10-15T15:08:12.670Z","level":"INFO","message":"GET /api/organizations - RBAC route","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":47,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"component":"api","request":{},"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.670Z","level":"INFO","message":"RBAC route initiated","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":48,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"endpoint":"/api/organizations","requiredPermissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAllPermissions":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.705Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"type":"api","identifier":"::1","current":25,"remaining":175,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.705Z","level":"INFO","message":"Rate limit check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":61,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"limitType":"api","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.705Z","level":"DEBUG","message":"API auth check initiated","service":"bendcare-os","env":"development","file":"global-auth.ts","line":65,"function":"applyGlobalAuth","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":35,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.743Z","level":"DEBUG","message":"Rate limit check passed","service":"bendcare-os","env":"development","file":"rate-limit.ts","line":94,"function":"applyRateLimit","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":73,"type":"api","identifier":"::1","current":26,"remaining":174,"limit":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.744Z","level":"DEBUG","message":"Using httpOnly cookie for authentication","service":"bendcare-os","env":"development","file":"global-auth.ts","line":100,"function":"applyGlobalAuth","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"pathname":"/api/organizations","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.744Z","level":"DEBUG","message":"Using access token from httpOnly cookie","service":"bendcare-os","env":"development","file":"auth.ts","line":36,"function":"requireAuth","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":74,"component":"auth","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.877Z","level":"DEBUG","message":"Loading user context","service":"bendcare-os","env":"development","file":"user-context.ts","line":304,"function":"getUserContextSafe","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":207,"userId":"[UUID]","operation":"getUserContext","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "user_id", "email", "first_name", "last_name", "is_active", "email_verified", "created_at", "updated_at" from "users" where "users"."user_id" = $1 limit $2 -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", 1]
Query: select "user_organizations"."user_organization_id", "user_organizations"."user_id", "user_organizations"."organization_id", "user_organizations"."is_active", "user_organizations"."joined_at", "user_organizations"."created_at", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at" from "user_organizations" inner join "organizations" on "user_organizations"."organization_id" = "organizations"."organization_id" where ("user_organizations"."user_id" = $1 and "user_organizations"."is_active" = $2 and "organizations"."is_active" = $3) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true]
Query: select distinct "user_roles"."user_role_id", "user_roles"."user_id", "user_roles"."role_id", "user_roles"."organization_id", "user_roles"."granted_by", "user_roles"."granted_at", "user_roles"."expires_at", "user_roles"."is_active", "user_roles"."created_at", "roles"."name", "roles"."description", "roles"."organization_id", "roles"."is_system_role", "roles"."is_active", "roles"."created_at", "roles"."updated_at", "roles"."deleted_at", "permissions"."permission_id", "permissions"."name", "permissions"."description", "permissions"."resource", "permissions"."action", "permissions"."scope", "permissions"."is_active", "permissions"."created_at", "permissions"."updated_at" from "user_roles" inner join "roles" on "user_roles"."role_id" = "roles"."role_id" inner join "role_permissions" on "roles"."role_id" = "role_permissions"."role_id" inner join "permissions" on "role_permissions"."permission_id" = "permissions"."permission_id" where ("user_roles"."user_id" = $1 and "user_roles"."is_active" = $2 and "roles"."is_active" = $3 and "permissions"."is_active" = $4) -- params: ["cfd640bd-fcb6-4a78-ab0f-0bc8f0ab8d0f", true, true, true]
{"@timestamp":"2025-10-15T15:08:12.887Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"user-context.ts","line":314,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":217,"userId":"[UUID]","rolesCount":1,"permissionsCount":90,"organizationsCount":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.887Z","level":"INFO","message":"API authentication successful","service":"bendcare-os","env":"development","file":"global-auth.ts","line":122,"function":"applyGlobalAuth","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","pathname":"/api/organizations","userId":"[UUID]","userEmail":"[REDACTED]","authMethod":"httponly_cookie","duration":143,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.888Z","level":"INFO","message":"Global auth check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":71,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":182,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.888Z","level":"DEBUG","message":"Global authentication completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":74,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":218,"hasSession":true,"hasUser":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.888Z","level":"INFO","message":"User context retrieved from session","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":145,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","cached":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.888Z","level":"DEBUG","message":"User context loaded successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":167,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":218,"userId":"[UUID]","roleCount":1,"permissionCount":90,"isSuperAdmin":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.888Z","level":"INFO","message":"RBAC permission check completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":183,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":0,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"requireAll":false,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.889Z","level":"INFO","message":"RBAC permission check passed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":192,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"userId":"[UUID]","permissions":["organizations:read:own","organizations:read:organization","organizations:read:all"],"rbacDuration":0,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.889Z","level":"INFO","message":"Auth: rbac_check","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":199,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":219,"component":"auth","action":"rbac_check","success":true,"userId":"[UUID]","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
Query: select "organizations"."organization_id", "organizations"."name", "organizations"."slug", "organizations"."parent_organization_id", "organizations"."is_active", "organizations"."created_at", "organizations"."updated_at", "organizations"."deleted_at", "practices"."practice_id", "practices"."domain", "practices"."status", "practices"."template_id" from "organizations" left join "practices" on "organizations"."organization_id" = "practices"."practice_id" where ("organizations"."is_active" = $1 and "organizations"."deleted_at" is null and "organizations"."is_active" = $2) order by "organizations"."created_at" desc -- params: [true, true]
Query: select "organization_id", count(*) from "user_organizations" where ("user_organizations"."organization_id" in ($1, $2, $3, $4, $5) and "user_organizations"."is_active" = $6) group by "user_organizations"."organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
Query: select "parent_organization_id", count(*) from "organizations" where ("organizations"."parent_organization_id" in ($1, $2, $3, $4, $5) and "organizations"."parent_organization_id" is not null and "organizations"."is_active" = $6 and "organizations"."deleted_at" is null) group by "organizations"."parent_organization_id" -- params: ["d9e5bd24-b104-4ff5-a219-678eedb31aaa", "4e23ee8f-33b1-4a6a-a371-0437d01c40d6", "7b70e645-82f2-4b18-8b22-db946991f6d5", "640c5969-74bc-4189-a455-81bf26f74829", "13f5a859-91ba-46ad-a4d1-40fb7a2996f2", true]
{"@timestamp":"2025-10-15T15:08:12.895Z","level":"INFO","message":"organizations list query completed - returned 5 of 5","service":"bendcare-os","env":"development","file":"index.ts","line":257,"function":"OrganizationsService.getOrganizations","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"total":5,"page":1,"hasMore":false},"empty":false,"duration":6,"slow":false,"component":"service","query":{"duration":3,"slow":false},"enrichment":{"duration":2,"slow":false},"rbacScope":"all","batchOptimized":true,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.895Z","level":"INFO","message":"organizations list query completed - returned 5 organizations","service":"bendcare-os","env":"development","file":"route.ts","line":67,"function":"getOrganizationsHandler","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","operation":"list_organizations","resourceType":"organizations","userId":"[UUID]","isSuperAdmin":true,"filters":{"is_active":true},"filterCount":1,"results":{"returned":5,"active":5,"inactive":0,"page":1,"pageSize":10},"sort":{"field":"created_at","direction":"desc"},"duration":6,"slow":false,"component":"business-logic","_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.896Z","level":"INFO","message":"Handler execution completed","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":205,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":7,"userId":"[UUID]","statusCode":200,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
{"@timestamp":"2025-10-15T15:08:12.896Z","level":"INFO","message":"RBAC route completed successfully","service":"bendcare-os","env":"development","file":"rbac-route-handler.ts","line":211,"function":"eval","correlationId":"cor_mgs4lasu_8274opmu","method":"GET","path":"/api/organizations","ipAddress":"::1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36","duration":226,"userId":"[UUID]","statusCode":200,"totalDuration":226,"_contextMetadata":{"method":"GET","path":"/api/organizations"}}
 GET /api/organizations?is_active=true 200 in 243ms

